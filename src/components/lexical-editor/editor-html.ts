/**
 * Auto-generated Lexical Editor HTML
 *
 * DO NOT EDIT THIS FILE DIRECTLY.
 * Edit the source files in the web/ directory and run the build script.
 *
 * Generated at: 2025-12-16T12:09:54.924Z
 */
export const EDITOR_HTML = "<!doctype html>\n<html lang=\"ja\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"\n    />\n    <title>Lexical Editor</title>\n    <style>\n      * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      html, body {\n        height: 100%;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        font-size: 16px;\n        line-height: 1.6;\n        -webkit-text-size-adjust: 100%;\n        background-color: #0a0a0a;\n        color: #fff;\n      }\n\n      #editor-container {\n        height: 100%;\n        position: relative;\n      }\n\n      #editor {\n        height: 100%;\n        padding: 16px;\n        outline: none;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      .editor-input {\n        min-height: 100%;\n        outline: none;\n        caret-color: #007AFF;\n        color: #fff;\n        white-space: pre-wrap;\n        word-wrap: break-word;\n      }\n\n      .editor-input:focus {\n        outline: none;\n      }\n\n      .editor-input.show-placeholder:before {\n        content: attr(data-placeholder);\n        color: #6B7280;\n        pointer-events: none;\n        position: absolute;\n      }\n\n      /* Text formatting - native elements */\n      .editor-input b,\n      .editor-input strong {\n        font-weight: bold;\n      }\n\n      .editor-input i,\n      .editor-input em {\n        font-style: italic;\n      }\n\n      .editor-input u {\n        text-decoration: underline;\n      }\n\n      .editor-input s,\n      .editor-input strike {\n        text-decoration: line-through;\n      }\n\n      /* Text formatting - Lexical theme classes */\n      .text-bold {\n        font-weight: bold;\n      }\n\n      .text-italic {\n        font-style: italic;\n      }\n\n      .text-underline {\n        text-decoration: underline;\n      }\n\n      .text-strikethrough {\n        text-decoration: line-through;\n      }\n\n      .text-underline-strikethrough {\n        text-decoration: underline line-through;\n      }\n\n      /* Headings */\n      .editor-input h1 {\n        font-size: 24px;\n        font-weight: bold;\n        margin: 16px 0 8px 0;\n      }\n\n      .editor-input h2 {\n        font-size: 20px;\n        font-weight: bold;\n        margin: 12px 0 6px 0;\n      }\n\n      /* Lists */\n      .editor-input ul,\n      .editor-input ol {\n        padding-left: 24px;\n        margin: 8px 0;\n      }\n\n      .editor-input li {\n        margin: 4px 0;\n      }\n\n      /* Links */\n      .editor-input a {\n        color: #007AFF;\n        text-decoration: underline;\n      }\n\n      /* Paragraphs */\n      .editor-input p {\n        margin: 0;\n        min-height: 1.6em;\n      }\n\n      /* Divider */\n      .editor-input hr,\n      .lexical-divider {\n        display: block;\n        margin: 16px 0;\n        border: none;\n        border-top: 1px solid #444;\n        cursor: pointer;\n      }\n\n      .lexical-divider:focus,\n      .lexical-divider.selected {\n        outline: 2px solid #007AFF;\n        outline-offset: 2px;\n      }\n    </style>\n  </head>\n  <body>\n    <div id=\"editor-container\">\n      <div id=\"editor\"></div>\n    </div>\n\n    <script>\n      \"use strict\";(()=>{var xl=Object.defineProperty;var hh=(n,t,e)=>t in n?xl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Fe=(n,t)=>{for(var e in t)xl(n,e,{get:t[e],enumerable:!0})};var C=(n,t,e)=>hh(n,typeof t!=\"symbol\"?t+\"\":t,e);var ea={};Fe(ea,{$addUpdateTag:()=>ku,$applyNodeReplacement:()=>Mr,$caretFromPoint:()=>Pt,$caretRangeFromSelection:()=>ys,$cloneWithProperties:()=>Js,$cloneWithPropertiesEphemeral:()=>jp,$comparePointCaretNext:()=>qs,$copyNode:()=>Ys,$create:()=>Xp,$createLineBreakNode:()=>An,$createNodeSelection:()=>bs,$createParagraphNode:()=>Nt,$createPoint:()=>He,$createRangeSelection:()=>du,$createRangeSelectionFromDom:()=>Sp,$createTabNode:()=>Oo,$createTextNode:()=>le,$extendCaretToRange:()=>Vs,$findMatchingParent:()=>ur,$getAdjacentChildCaret:()=>wn,$getAdjacentNode:()=>bu,$getAdjacentSiblingOrParentSiblingCaret:()=>o_,$getCaretInDirection:()=>Ft,$getCaretRange:()=>wt,$getCaretRangeInDirection:()=>Qs,$getCharacterOffsets:()=>us,$getChildCaret:()=>Et,$getChildCaretAtIndex:()=>Gu,$getChildCaretOrSelf:()=>Wu,$getCollapsedCaretRange:()=>zu,$getCommonAncestor:()=>dr,$getCommonAncestorResultBranchOrder:()=>Zs,$getEditor:()=>Gs,$getNearestNodeFromDOMNode:()=>Ro,$getNearestRootOrShadowRoot:()=>$u,$getNodeByKey:()=>ae,$getNodeByKeyOrThrow:()=>Lu,$getNodeFromDOMNode:()=>Fs,$getPreviousSelection:()=>sn,$getRoot:()=>ke,$getSelection:()=>Y,$getSiblingCaret:()=>he,$getState:()=>io,$getStateChange:()=>Jh,$getTextContent:()=>Op,$getTextNodeOffset:()=>Ue,$getTextPointCaret:()=>Lt,$getTextPointCaretSlice:()=>_s,$getWritableNodeState:()=>Cs,$hasAncestor:()=>Co,$hasUpdateTag:()=>Up,$insertNodes:()=>Tp,$isBlockElementNode:()=>Cp,$isChildCaret:()=>ze,$isDecoratorNode:()=>Z,$isEditorState:()=>Ap,$isElementNode:()=>v,$isExtendableTextPointCaret:()=>Yu,$isInlineElementOrDecoratorNode:()=>Hp,$isLeafNode:()=>Bp,$isLineBreakNode:()=>Xt,$isNodeCaret:()=>Qp,$isNodeSelection:()=>Mo,$isParagraphNode:()=>yu,$isRangeSelection:()=>w,$isRootNode:()=>ge,$isRootOrShadowRoot:()=>Ye,$isSiblingCaret:()=>on,$isTabNode:()=>As,$isTextNode:()=>$,$isTextPointCaret:()=>St,$isTextPointCaretSlice:()=>r_,$isTokenOrSegmented:()=>_t,$isTokenOrTab:()=>Rt,$nodesOfType:()=>zp,$normalizeCaret:()=>Be,$normalizeSelection__EXPERIMENTAL:()=>so,$onUpdate:()=>Iu,$parseSerializedNode:()=>Dp,$removeTextFromCaretRange:()=>Hu,$rewindSiblingCaret:()=>Bn,$selectAll:()=>Wp,$setCompositionKey:()=>ue,$setPointFromCaret:()=>Pn,$setSelection:()=>ve,$setSelectionFromCaretRange:()=>Uu,$setState:()=>jh,$splitAtPointCaretNext:()=>a_,$splitNode:()=>Yp,$updateRangeSelectionFromCaretRange:()=>fr,ArtificialNode__DO_NOT_USE:()=>yo,BLUR_COMMAND:()=>Yc,CAN_REDO_COMMAND:()=>sp,CAN_UNDO_COMMAND:()=>ap,CLEAR_EDITOR_COMMAND:()=>op,CLEAR_HISTORY_COMMAND:()=>ip,CLICK_COMMAND:()=>vc,COLLABORATION_TAG:()=>nu,COMMAND_PRIORITY_CRITICAL:()=>Lp,COMMAND_PRIORITY_EDITOR:()=>Rp,COMMAND_PRIORITY_HIGH:()=>$p,COMMAND_PRIORITY_LOW:()=>kp,COMMAND_PRIORITY_NORMAL:()=>Ip,CONTROLLED_TEXT_INSERTION_COMMAND:()=>Tn,COPY_COMMAND:()=>Ms,CUT_COMMAND:()=>vs,DELETE_CHARACTER_COMMAND:()=>mr,DELETE_LINE_COMMAND:()=>xr,DELETE_WORD_COMMAND:()=>yr,DRAGEND_COMMAND:()=>Uc,DRAGOVER_COMMAND:()=>zc,DRAGSTART_COMMAND:()=>Wc,DROP_COMMAND:()=>Bc,DecoratorNode:()=>Nr,ElementNode:()=>$t,FOCUS_COMMAND:()=>Hc,FORMAT_ELEMENT_COMMAND:()=>rp,FORMAT_TEXT_COMMAND:()=>At,HISTORIC_TAG:()=>up,HISTORY_MERGE_TAG:()=>no,HISTORY_PUSH_TAG:()=>dp,INDENT_CONTENT_COMMAND:()=>tp,INSERT_LINE_BREAK_COMMAND:()=>sr,INSERT_PARAGRAPH_COMMAND:()=>ts,INSERT_TAB_COMMAND:()=>ep,INTERNAL_$isBlock:()=>xt,IS_ALL_FORMATTING:()=>vh,IS_BOLD:()=>Nh,IS_CODE:()=>Th,IS_HIGHLIGHT:()=>xs,IS_ITALIC:()=>Ch,IS_STRIKETHROUGH:()=>Sh,IS_SUBSCRIPT:()=>Oh,IS_SUPERSCRIPT:()=>Mh,IS_UNDERLINE:()=>Eh,KEY_ARROW_DOWN_COMMAND:()=>$c,KEY_ARROW_LEFT_COMMAND:()=>Rc,KEY_ARROW_RIGHT_COMMAND:()=>Ac,KEY_ARROW_UP_COMMAND:()=>Ic,KEY_BACKSPACE_COMMAND:()=>wc,KEY_DELETE_COMMAND:()=>Fc,KEY_DOWN_COMMAND:()=>Dc,KEY_ENTER_COMMAND:()=>fo,KEY_ESCAPE_COMMAND:()=>Pc,KEY_MODIFIER_COMMAND:()=>Gc,KEY_SPACE_COMMAND:()=>Lc,KEY_TAB_COMMAND:()=>Kc,LineBreakNode:()=>Dn,MOVE_TO_END:()=>bc,MOVE_TO_START:()=>kc,NODE_STATE_KEY:()=>Wh,OUTDENT_CONTENT_COMMAND:()=>np,PASTE_COMMAND:()=>Es,PASTE_TAG:()=>fp,ParagraphNode:()=>kn,REDO_COMMAND:()=>Os,REMOVE_TEXT_COMMAND:()=>ns,RootNode:()=>Rn,SELECTION_CHANGE_COMMAND:()=>Ss,SELECTION_INSERT_CLIPBOARD_NODES_COMMAND:()=>Qh,SELECT_ALL_COMMAND:()=>rs,SKIP_COLLAB_TAG:()=>gp,SKIP_DOM_SELECTION_TAG:()=>ou,SKIP_SCROLL_INTO_VIEW_TAG:()=>ru,SKIP_SELECTION_FOCUS_TAG:()=>iu,TEXT_TYPE_TO_FORMAT:()=>xe,TabNode:()=>bn,TextNode:()=>en,UNDO_COMMAND:()=>Ts,buildImportMap:()=>cp,configExtension:()=>c_,createCommand:()=>K,createEditor:()=>wp,createSharedNodeState:()=>Cc,createState:()=>Gh,declarePeerDependency:()=>u_,defineExtension:()=>l_,flipDirection:()=>Kt,getDOMOwnerDocument:()=>Us,getDOMSelection:()=>et,getDOMSelectionFromTarget:()=>wu,getDOMTextNode:()=>nn,getEditorPropertyFromDOMNode:()=>Tr,getNearestEditorFromDOMNode:()=>Ps,getRegisteredNode:()=>Ls,getRegisteredNodeOrThrow:()=>$s,getStaticNodeConfig:()=>vr,getTextDirection:()=>Kp,getTransformSetFromKlass:()=>Nu,isBlockDomNode:()=>hs,isCurrentlyReadOnlyMode:()=>Fn,isDOMDocumentNode:()=>Su,isDOMNode:()=>Kn,isDOMTextNode:()=>tt,isDOMUnmanaged:()=>Bu,isDocumentFragment:()=>Pu,isExactShortcutMatch:()=>j,isHTMLAnchorElement:()=>Gp,isHTMLElement:()=>Ce,isInlineDomNode:()=>Fu,isLexicalEditor:()=>Ao,isModifierMatch:()=>Au,isSelectionCapturedInDecoratorInput:()=>ws,isSelectionWithinEditor:()=>Er,makeStepwiseIterator:()=>Xs,removeFromParent:()=>kt,resetRandomKey:()=>Pp,safeCast:()=>d_,setDOMUnmanaged:()=>Vp,setNodeIndentFromDOM:()=>Ku,shallowMergeConfig:()=>f_});function A(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),r=new URLSearchParams;r.append(\"code\",n);for(let o of t)r.append(\"v\",o);throw e.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function fc(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),r=new URLSearchParams;r.append(\"code\",n);for(let o of t)r.append(\"v\",o);e.search=r.toString(),console.warn(`Minified Lexical warning #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var Ge=typeof window<\"u\"&&window.document!==void 0&&window.document.createElement!==void 0,ph=Ge&&\"documentMode\"in document?document.documentMode:null,Ke=Ge&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),qt=Ge&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),oo=!(!Ge||!(\"InputEvent\"in window)||ph)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),gr=Ge&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),vn=Ge&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,_h=Ge&&/Android/.test(navigator.userAgent),gc=Ge&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Nl=Ge&&_h&&gc,hr=Ge&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&Ke&&!gc;function hc(...n){let t=[];for(let e of n)if(e&&typeof e==\"string\")for(let[r]of e.matchAll(/\\S+/g))t.push(r);return t}var mh=0,yh=1,xh=2,Nh=1,Ch=2,Sh=4,Eh=8,Th=16,Oh=32,Mh=64,xs=128,vh=2047,Dh=1,Ah=2,bh=3,Rh=4,kh=5,Ih=6,Eo=gr||vn||hr?\"\\xA0\":\"\\u200B\",It=`\n\n`,$h=qt?\"\\xA0\":Eo,pc=\"\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC\",_c=\"A-Za-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C\\uFE00-\\uFE6F\\uFEFD-\\uFFFF\",Lh=new RegExp(\"^[^\"+_c+\"]*[\"+pc+\"]\"),wh=new RegExp(\"^[^\"+pc+\"]*[\"+_c+\"]\"),xe={bold:1,capitalize:1024,code:16,highlight:xs,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},Ph={directionless:1,unmergeable:2},Cl={center:2,end:6,justify:4,left:1,right:3,start:5},Fh={[Ah]:\"center\",[Ih]:\"end\",[Rh]:\"justify\",[Dh]:\"left\",[bh]:\"right\",[kh]:\"start\"},Kh={normal:0,segmented:2,token:1},Bh={[mh]:\"normal\",[xh]:\"segmented\",[yh]:\"token\"},Wh=\"$\",Sl=\"$config\";function mc(n,t,e,r,o,i){let s=n.getFirstChild();for(;s!==null;){let a=s.__key;s.__parent===t&&(v(s)&&mc(s,a,e,r,o,i),e.has(a)||i.delete(a),o.push(a)),s=s.getNextSibling()}}var Yi=!1,Ns=0;function zh(n){Ns=n.timeStamp}function Ii(n,t,e){let r=n.nodeName===\"BR\",o=t.__lexicalLineBreak;return o&&(n===o||r&&n.previousSibling===o)||r&&bo(n,e)!==void 0}function Uh(n,t,e){let r=et($e(e)),o=null,i=null;r!==null&&r.anchorNode===n&&(o=r.anchorOffset,i=r.focusOffset);let s=n.nodeValue;s!==null&&Ws(t,s,o,i,!1)}function Hh(n,t,e){if(w(n)){let r=n.anchor.getNode();if(r.is(e)&&n.format!==r.getFormat())return!1}return tt(t)&&e.isAttached()}function Yh(n,t,e,r){for(let o=n;o&&!Bu(o);o=Or(o)){let i=bo(o,t);if(i!==void 0){let s=ae(i,e);if(s)return Z(s)||!Ce(o)?void 0:[o,s]}else if(o===r)return[r,Ou(e)]}}function yc(n,t,e){Yi=!0;let r=performance.now()-Ns>100;try{be(n,()=>{let o=Y()||(function(f){return f.getEditorState().read(()=>{let h=Y();return h!==null?h.clone():null})})(n),i=new Map,s=n.getRootElement(),a=n._editorState,l=n._blockCursorElement,c=!1,u=\"\";for(let f=0;f<t.length;f++){let h=t[f],g=h.type,p=h.target,_=Yh(p,n,a,s);if(!_)continue;let[x,y]=_;if(g===\"characterData\")r&&$(y)&&tt(p)&&Hh(o,p,y)&&Uh(p,y,n);else if(g===\"childList\"){c=!0;let N=h.addedNodes;for(let E=0;E<N.length;E++){let T=N[E],D=Fs(T),O=T.parentNode;if(O!=null&&T!==l&&D===null&&!Ii(T,O,n)){if(qt){let R=(Ce(T)?T.innerText:null)||T.nodeValue;R&&(u+=R)}O.removeChild(T)}}let S=h.removedNodes,M=S.length;if(M>0){let E=0;for(let T=0;T<M;T++){let D=S[T];(Ii(D,p,n)||l===D)&&(p.appendChild(D),E++)}M!==E&&i.set(x,y)}}}if(i.size>0)for(let[f,h]of i)h.reconcileObservedMutation(f,n);let d=e.takeRecords();if(d.length>0){for(let f=0;f<d.length;f++){let h=d[f],g=h.addedNodes,p=h.target;for(let _=0;_<g.length;_++){let x=g[_],y=x.parentNode;y==null||x.nodeName!==\"BR\"||Ii(x,p,n)||y.removeChild(x)}}e.takeRecords()}o!==null&&(c&&ve(o),qt&&Ru(n)&&o.insertRawText(u))})}finally{Yi=!1}}function xc(n){let t=n._observer;t!==null&&yc(n,t.takeRecords(),t)}function Nc(n){(function(t){Ns===0&&$e(t).addEventListener(\"textInput\",zh,!0)})(n),n._observer=new MutationObserver((t,e)=>{yc(n,t,e)})}var Gi=class{constructor(t,e){C(this,\"key\");C(this,\"parse\");C(this,\"unparse\");C(this,\"isEqual\");C(this,\"defaultValue\");this.key=t,this.parse=e.parse.bind(e),this.unparse=(e.unparse||Vh).bind(e),this.isEqual=(e.isEqual||Object.is).bind(e),this.defaultValue=this.parse(void 0)}};function Gh(n,t){return new Gi(n,t)}function io(n,t,e=\"latest\"){let r=(e===\"latest\"?n.getLatest():n).__state;return r?r.getValue(t):t.defaultValue}function Jh(n,t,e){let r=io(n,e,\"direct\"),o=io(t,e,\"direct\");return e.isEqual(r,o)?null:[r,o]}function jh(n,t,e){let r;if(ce(),typeof e==\"function\"){let i=n.getLatest(),s=io(i,t);if(r=e(s),t.isEqual(s,r))return i}else r=e;let o=n.getWritable();return Cs(o).updateFromKnown(t,r),o}function Cc(n){let t=new Map,e=new Set;for(let r=typeof n==\"function\"?n:n.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){let{ownNodeConfig:o}=vr(r);if(o&&o.stateConfigs)for(let i of o.stateConfigs){let s;\"stateConfig\"in i?(s=i.stateConfig,i.flat&&e.add(s.key)):s=i,t.set(s.key,s)}}return{flatKeys:e,sharedConfigMap:t}}var Ji=class n{constructor(t,e,r=void 0,o=new Map,i=void 0){C(this,\"node\");C(this,\"knownState\");C(this,\"unknownState\");C(this,\"sharedNodeState\");C(this,\"size\");this.node=t,this.sharedNodeState=e,this.unknownState=r,this.knownState=o;let{sharedConfigMap:s}=this.sharedNodeState,a=i!==void 0?i:(function(l,c,u){let d=u.size;if(c)for(let f in c){let h=l.get(f);h&&u.has(h)||d++}return d})(s,r,o);this.size=a}getValue(t){let e=this.knownState.get(t);if(e!==void 0)return e;this.sharedNodeState.sharedConfigMap.set(t.key,t);let r=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){let o=this.unknownState[t.key];o!==void 0&&(r=t.parse(o)),this.updateFromKnown(t,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let t={...this.unknownState},e={};for(let[r,o]of this.knownState)r.isEqual(o,r.defaultValue)?delete t[r.key]:t[r.key]=r.unparse(o);for(let r of this.sharedNodeState.flatKeys)r in t&&(e[r]=t[r],delete t[r]);return El(t)&&(e.$=t),e}getWritable(t){if(this.node===t)return this;let{sharedNodeState:e,unknownState:r}=this,o=new Map(this.knownState);return new n(t,e,(function(i,s,a){let l;if(a)for(let[c,u]of Object.entries(a)){let d=i.get(c);d?s.has(d)||s.set(d,d.parse(u)):(l=l||{},l[c]=u)}return l})(e.sharedConfigMap,o,r),o,this.size)}updateFromKnown(t,e){let r=t.key;this.sharedNodeState.sharedConfigMap.set(r,t);let{knownState:o,unknownState:i}=this;o.has(t)||i&&r in i||(i&&(delete i[r],this.unknownState=El(i)),this.size++),o.set(t,e)}updateFromUnknown(t,e){let r=this.sharedNodeState.sharedConfigMap.get(t);r?this.updateFromKnown(r,r.parse(e)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=e)}updateFromJSON(t){let{knownState:e}=this;for(let r of e.keys())e.set(r,r.defaultValue);if(this.size=e.size,this.unknownState=void 0,t)for(let[r,o]of Object.entries(t))this.updateFromUnknown(r,o)}};function Cs(n){let t=n.getWritable(),e=t.__state?t.__state.getWritable(t):new Ji(t,Sc(t));return t.__state=e,e}function Sc(n){return n.__state?n.__state.sharedNodeState:$s(Gs(),n.getType()).sharedNodeState}function El(n){if(n)for(let t in n)return n}function Vh(n){return n}function Tl(n,t,e){for(let[r,o]of t.knownState){if(n.has(r.key))continue;n.add(r.key);let i=e?e.getValue(r):r.defaultValue;if(i!==o&&!r.isEqual(i,o))return!0}return!1}function Ol(n,t,e){let{unknownState:r}=t,o=e?e.unknownState:void 0;if(r){for(let[i,s]of Object.entries(r))if(!n.has(i)&&(n.add(i),s!==(o?o[i]:void 0)))return!0}return!1}function Ml(n,t){let e=n.__state;return e&&e.node===n?e.getWritable(t):e}function vl(n,t){let e=n.__mode,r=n.__format,o=n.__style,i=t.__mode,s=t.__format,a=t.__style,l=n.__state,c=t.__state;return(e===null||e===i)&&(r===null||r===s)&&(o===null||o===a)&&(n.__state===null||l===c||(function(u,d){if(u===d)return!0;if(u&&d&&u.size!==d.size)return!1;let f=new Set;return!(u&&Tl(f,u,d)||d&&Tl(f,d,u)||u&&Ol(f,u,d)||d&&Ol(f,d,u))})(l,c))}function Dl(n,t){let e=n.mergeWithSibling(t),r=te()._normalizedNodes;return r.add(n.__key),r.add(t.__key),e}function Al(n){let t,e,r=n;if(r.__text!==\"\"||!r.isSimpleText()||r.isUnmergeable()){for(;(t=r.getPreviousSibling())!==null&&$(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==\"\"){if(vl(t,r)){r=Dl(t,r);break}break}t.remove()}for(;(e=r.getNextSibling())!==null&&$(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==\"\"){if(vl(r,e)){r=Dl(r,e);break}break}e.remove()}}else r.remove()}function so(n){return bl(n.anchor),bl(n.focus),n}function bl(n){for(;n.type===\"element\";){let t=n.getNode(),e=n.offset,r,o;if(e===t.getChildrenSize()?(r=t.getChildAtIndex(e-1),o=!0):(r=t.getChildAtIndex(e),o=!1),$(r)){n.set(r.__key,o?r.getTextContentSize():0,\"text\",!0);break}if(!v(r))break;n.set(r.__key,o?r.getChildrenSize():0,\"element\",!0)}}var Zt,Ne,pr,To,ji,Vi,Qt,We,Xi,_r,se=\"\",Ze=null,Qe=\"\",mt=\"\",Cn=!1,ao=!1;function lo(n,t){let e=Qt.get(n);if(t!==null){let r=es(n);r.parentNode===t&&t.removeChild(r)}if(We.has(n)||Ne._keyToDOMMap.delete(n),v(e)){let r=uo(e,Qt);qi(r,0,r.length-1,null)}e!==void 0&&zs(_r,pr,To,e,\"destroyed\")}function qi(n,t,e,r){let o=t;for(;o<=e;++o){let i=n[o];i!==void 0&&lo(i,r)}}function jt(n,t){n.setProperty(\"text-align\",t)}var Xh=\"40px\";function Ec(n,t){let e=Zt.theme.indent;if(typeof e==\"string\"){let o=n.classList.contains(e);t>0&&!o?n.classList.add(e):t<1&&o&&n.classList.remove(e)}let r=getComputedStyle(n).getPropertyValue(\"--lexical-indent-base-value\")||Xh;n.style.setProperty(\"padding-inline-start\",t===0?\"\":`calc(${t} * ${r})`)}function Tc(n,t){let e=n.style;t===0?jt(e,\"\"):t===1?jt(e,\"left\"):t===2?jt(e,\"center\"):t===3?jt(e,\"right\"):t===4?jt(e,\"justify\"):t===5?jt(e,\"start\"):t===6&&jt(e,\"end\")}function Zi(n,t){let e=(function(r){let o=r.__dir;if(o!==null)return o;if(ge(r))return null;let i=r.getParentOrThrow();return ge(i)&&i.__dir===null?\"auto\":null})(t);e!==null?n.dir=e:n.removeAttribute(\"dir\")}function co(n,t){let e=We.get(n);e===void 0&&A(60);let r=e.createDOM(Zt,Ne);if((function(o,i,s){let a=s._keyToDOMMap;(function(l,c,u){let d=`__lexicalKey_${c._key}`;l[d]=u})(i,s,o),a.set(o,i)})(n,r,Ne),$(e)?r.setAttribute(\"data-lexical-text\",\"true\"):Z(e)&&r.setAttribute(\"data-lexical-decorator\",\"true\"),v(e)){let o=e.__indent,i=e.__size;if(Zi(r,e),o!==0&&Ec(r,o),i!==0){let a=i-1;Qi(uo(e,We),e,0,a,e.getDOMSlot(r))}let s=e.__format;s!==0&&Tc(r,s),e.isInline()||Oc(null,e,r),ko(e)&&(se+=It,mt+=It)}else{let o=e.getTextContent();if(Z(e)){let i=e.decorate(Ne,Zt);i!==null&&Mc(n,i),r.contentEditable=\"false\"}se+=o,mt+=o}return t!==null&&t.insertChild(r),zs(_r,pr,To,e,\"created\"),r}function Qi(n,t,e,r,o){let i=se;se=\"\";let s=e;for(;s<=r;++s){co(n[s],o);let a=We.get(n[s]);a!==null&&$(a)&&(Ze===null&&(Ze=a.getFormat()),Qe===\"\"&&(Qe=a.getStyle()))}ko(t)&&(se+=It),o.element.__lexicalTextContent=se,se=i+se}function Rl(n,t){if(n){let e=n.__last;if(e){let r=t.get(e);if(r)return Xt(r)?\"line-break\":Z(r)&&r.isInline()?\"decorator\":null}return\"empty\"}return null}function Oc(n,t,e){let r=Rl(n,Qt),o=Rl(t,We);r!==o&&t.getDOMSlot(e).setManagedLineBreak(o)}function qh(n,t,e){var r;Ze=null,Qe=\"\",(function(o,i,s){let a=se,l=o.__size,c=i.__size;se=\"\";let u=s.element;if(l===1&&c===1){let d=o.__first,f=i.__first;if(d===f)ir(d,u);else{let g=es(d),p=co(f,null);try{u.replaceChild(p,g)}catch(_){if(typeof _==\"object\"&&_!=null){let x=`${_.toString()} Parent: ${u.tagName}, new child: {tag: ${p.tagName} key: ${f}}, old child: {tag: ${g.tagName}, key: ${d}}.`;throw new Error(x)}throw _}lo(d,null)}let h=We.get(f);$(h)&&(Ze===null&&(Ze=h.getFormat()),Qe===\"\"&&(Qe=h.getStyle()))}else{let d=uo(o,Qt),f=uo(i,We);if(d.length!==l&&A(227),f.length!==c&&A(228),l===0)c!==0&&Qi(f,i,0,c-1,s);else if(c===0){if(l!==0){let h=s.after==null&&s.before==null&&s.element.__lexicalLineBreak==null;qi(d,0,l-1,h?null:u),h&&(u.textContent=\"\")}}else(function(h,g,p,_,x,y){let N=_-1,S=x-1,M,E,T=y.getFirstChild(),D=0,O=0;for(;D<=N&&O<=S;){let q=g[D],H=p[O];if(q===H)T=$i(ir(H,y.element)),D++,O++;else{M===void 0&&(M=new Set(g)),E===void 0&&(E=new Set(p));let ee=E.has(q),ie=M.has(H);if(ee)if(ie){let Ae=rn(Ne,H);Ae===T?T=$i(ir(H,y.element)):(y.withBefore(T).insertChild(Ae),ir(H,y.element)),D++,O++}else co(H,y.withBefore(T)),O++;else T=$i(es(q)),lo(q,y.element),D++}let G=We.get(H);G!==null&&$(G)&&(Ze===null&&(Ze=G.getFormat()),Qe===\"\"&&(Qe=G.getStyle()))}let R=D>N,P=O>S;if(R&&!P){let q=p[S+1],H=q===void 0?null:Ne.getElementByKey(q);Qi(p,h,O,S,y.withBefore(H))}else P&&!R&&qi(g,D,N,y.element)})(i,d,f,l,c,s)}ko(i)&&(se+=It),u.__lexicalTextContent=se,se=a+se})(n,t,t.getDOMSlot(e)),r=t,Ze==null||Ze===r.__textFormat||ao||r.setTextFormat(Ze),(function(o){Qe===\"\"||Qe===o.__textStyle||ao||o.setTextStyle(Qe)})(t)}function uo(n,t){let e=[],r=n.__first;for(;r!==null;){let o=t.get(r);o===void 0&&A(101),e.push(r),r=o.__next}return e}function ir(n,t){let e=Qt.get(n),r=We.get(n);e!==void 0&&r!==void 0||A(61);let o=Cn||Vi.has(n)||ji.has(n),i=rn(Ne,n);if(e===r&&!o){if(v(e)){let s=i.__lexicalTextContent;s!==void 0&&(se+=s,mt+=s)}else{let s=e.getTextContent();mt+=s,se+=s}return i}if(e!==r&&o&&zs(_r,pr,To,r,\"updated\"),r.updateDOM(e,i,Zt)){let s=co(n,null);return t===null&&A(62),t.replaceChild(s,i),lo(n,null),s}if(v(e)&&v(r)){let s=r.__indent;(Cn||s!==e.__indent)&&Ec(i,s);let a=r.__format;if((Cn||a!==e.__format)&&Tc(i,a),o&&(qh(e,r,i),ge(r)||r.isInline()||Oc(e,r,i)),ko(r)&&(se+=It,mt+=It),(Cn||r.__dir!==e.__dir)&&(Zi(i,r),ge(r)&&!Cn))for(let l of r.getChildren())v(l)&&Zi(rn(Ne,l.getKey()),l)}else{let s=r.getTextContent();if(Z(r)){let a=r.decorate(Ne,Zt);a!==null&&Mc(n,a)}se+=s,mt+=s}if(!ao&&ge(r)&&r.__cachedText!==mt){let s=r.getWritable();s.__cachedText=mt,r=s}return i}function Mc(n,t){let e=Ne._pendingDecorators,r=Ne._decorators;if(e===null){if(r[n]===t)return;e=Tu(Ne)}e[n]=t}function $i(n){let t=n.nextSibling;return t!==null&&t===Ne._blockCursorElement&&(t=t.nextSibling),t}function Zh(n,t,e,r,o,i){se=\"\",mt=\"\",Cn=r===2,Ne=e,Zt=e._config,pr=e._nodes,To=Ne._listeners.mutation,ji=o,Vi=i,Qt=n._nodeMap,We=t._nodeMap,ao=t._readOnly,Xi=new Map(e._keyToDOMMap);let s=new Map;return _r=s,ir(\"root\",null),Ne=void 0,pr=void 0,ji=void 0,Vi=void 0,Qt=void 0,We=void 0,Zt=void 0,Xi=void 0,_r=void 0,s}function es(n){let t=Xi.get(n);return t===void 0&&A(75,n),t}function K(n){return{type:n}}var Ss=K(\"SELECTION_CHANGE_COMMAND\"),Qh=K(\"SELECTION_INSERT_CLIPBOARD_NODES_COMMAND\"),vc=K(\"CLICK_COMMAND\"),mr=K(\"DELETE_CHARACTER_COMMAND\"),sr=K(\"INSERT_LINE_BREAK_COMMAND\"),ts=K(\"INSERT_PARAGRAPH_COMMAND\"),Tn=K(\"CONTROLLED_TEXT_INSERTION_COMMAND\"),Es=K(\"PASTE_COMMAND\"),ns=K(\"REMOVE_TEXT_COMMAND\"),yr=K(\"DELETE_WORD_COMMAND\"),xr=K(\"DELETE_LINE_COMMAND\"),At=K(\"FORMAT_TEXT_COMMAND\"),Ts=K(\"UNDO_COMMAND\"),Os=K(\"REDO_COMMAND\"),Dc=K(\"KEYDOWN_COMMAND\"),Ac=K(\"KEY_ARROW_RIGHT_COMMAND\"),bc=K(\"MOVE_TO_END\"),Rc=K(\"KEY_ARROW_LEFT_COMMAND\"),kc=K(\"MOVE_TO_START\"),Ic=K(\"KEY_ARROW_UP_COMMAND\"),$c=K(\"KEY_ARROW_DOWN_COMMAND\"),fo=K(\"KEY_ENTER_COMMAND\"),Lc=K(\"KEY_SPACE_COMMAND\"),wc=K(\"KEY_BACKSPACE_COMMAND\"),Pc=K(\"KEY_ESCAPE_COMMAND\"),Fc=K(\"KEY_DELETE_COMMAND\"),Kc=K(\"KEY_TAB_COMMAND\"),ep=K(\"INSERT_TAB_COMMAND\"),tp=K(\"INDENT_CONTENT_COMMAND\"),np=K(\"OUTDENT_CONTENT_COMMAND\"),Bc=K(\"DROP_COMMAND\"),rp=K(\"FORMAT_ELEMENT_COMMAND\"),Wc=K(\"DRAGSTART_COMMAND\"),zc=K(\"DRAGOVER_COMMAND\"),Uc=K(\"DRAGEND_COMMAND\"),Ms=K(\"COPY_COMMAND\"),vs=K(\"CUT_COMMAND\"),rs=K(\"SELECT_ALL_COMMAND\"),op=K(\"CLEAR_EDITOR_COMMAND\"),ip=K(\"CLEAR_HISTORY_COMMAND\"),sp=K(\"CAN_REDO_COMMAND\"),ap=K(\"CAN_UNDO_COMMAND\"),Hc=K(\"FOCUS_COMMAND\"),Yc=K(\"BLUR_COMMAND\"),Gc=K(\"KEY_MODIFIER_COMMAND\"),gt=Object.freeze({}),os=[[\"keydown\",function(n,t){if(ar=n.timeStamp,Jc=n.key,!t.isComposing()&&!k(t,Dc,n)&&n.key!=null){if(Li&&sc(n))return be(t,()=>{Xr(t,wi)}),Li=!1,void(wi=\"\");if((function(e){return j(e,\"ArrowRight\",{shiftKey:\"any\"})})(n))k(t,Ac,n);else if((function(e){return j(e,\"ArrowRight\",pt)})(n))k(t,bc,n);else if((function(e){return j(e,\"ArrowLeft\",{shiftKey:\"any\"})})(n))k(t,Rc,n);else if((function(e){return j(e,\"ArrowLeft\",pt)})(n))k(t,kc,n);else if((function(e){return j(e,\"ArrowUp\",{altKey:\"any\",shiftKey:\"any\"})})(n))k(t,Ic,n);else if((function(e){return j(e,\"ArrowDown\",{altKey:\"any\",shiftKey:\"any\"})})(n))k(t,$c,n);else if((function(e){return j(e,\"Enter\",{altKey:\"any\",ctrlKey:\"any\",metaKey:\"any\",shiftKey:!0})})(n))lr=!0,k(t,fo,n);else if((function(e){return e.key===\" \"})(n))k(t,Lc,n);else if((function(e){return Ke&&j(e,\"o\",{ctrlKey:!0})})(n))n.preventDefault(),lr=!0,k(t,sr,!0);else if((function(e){return j(e,\"Enter\",{altKey:\"any\",ctrlKey:\"any\",metaKey:\"any\"})})(n))lr=!1,k(t,fo,n);else if((function(e){return j(e,\"Backspace\",{shiftKey:\"any\"})||Ke&&j(e,\"h\",{ctrlKey:!0})})(n))sc(n)?k(t,wc,n):(n.preventDefault(),k(t,mr,!0));else if((function(e){return e.key===\"Escape\"})(n))k(t,Pc,n);else if((function(e){return j(e,\"Delete\",{})||Ke&&j(e,\"d\",{ctrlKey:!0})})(n))(function(e){return e.key===\"Delete\"})(n)?k(t,Fc,n):(n.preventDefault(),k(t,mr,!1));else if((function(e){return j(e,\"Backspace\",ic)})(n))n.preventDefault(),k(t,yr,!0);else if((function(e){return j(e,\"Delete\",ic)})(n))n.preventDefault(),k(t,yr,!1);else if((function(e){return Ke&&j(e,\"Backspace\",{metaKey:!0})})(n))n.preventDefault(),k(t,xr,!0);else if((function(e){return Ke&&(j(e,\"Delete\",{metaKey:!0})||j(e,\"k\",{ctrlKey:!0}))})(n))n.preventDefault(),k(t,xr,!1);else if((function(e){return j(e,\"b\",pt)})(n))n.preventDefault(),k(t,At,\"bold\");else if((function(e){return j(e,\"u\",pt)})(n))n.preventDefault(),k(t,At,\"underline\");else if((function(e){return j(e,\"i\",pt)})(n))n.preventDefault(),k(t,At,\"italic\");else if((function(e){return j(e,\"Tab\",{shiftKey:\"any\"})})(n))k(t,Kc,n);else if((function(e){return j(e,\"z\",pt)})(n))n.preventDefault(),k(t,Ts,void 0);else if((function(e){return Ke?j(e,\"z\",{metaKey:!0,shiftKey:!0}):j(e,\"y\",{ctrlKey:!0})||j(e,\"z\",{ctrlKey:!0,shiftKey:!0})})(n))n.preventDefault(),k(t,Os,void 0);else{let e=t._editorState._selection;e===null||w(e)?ac(n)&&(n.preventDefault(),k(t,rs,n)):(function(r){return j(r,\"c\",pt)})(n)?(n.preventDefault(),k(t,Ms,n)):(function(r){return j(r,\"x\",pt)})(n)?(n.preventDefault(),k(t,vs,n)):ac(n)&&(n.preventDefault(),k(t,rs,n))}(function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey})(n)&&k(t,Gc,n)}}],[\"pointerdown\",function(n,t){let e=n.target,r=n.pointerType;Kn(e)&&r!==\"touch\"&&r!==\"pen\"&&n.button===0&&be(t,()=>{nc(e)||(as=!0)})}],[\"compositionstart\",function(n,t){be(t,()=>{let e=Y();if(w(e)&&!t.isComposing()){let r=e.anchor,o=e.anchor.getNode();ue(r.key),(n.timeStamp<ar+30||r.type===\"element\"||!e.isCollapsed()||o.getFormat()!==e.format||$(o)&&o.getStyle()!==e.style)&&k(t,Tn,$h)}})}],[\"compositionend\",function(n,t){qt?rr=!0:vn||!gr&&!hr?be(t,()=>{Xr(t,n.data)}):(Li=!0,wi=n.data)}],[\"input\",function(n,t){n.stopPropagation(),be(t,()=>{if(Ce(n.target)&&nc(n.target))return;let e=Y(),r=n.data,o=Zc(n);if(r!=null&&w(e)&&Xc(e,o,r,n.timeStamp,!1)){rr&&(Xr(t,r),rr=!1);let i=e.anchor.getNode(),s=et($e(t));if(s===null)return;let a=e.isBackward(),l=a?e.anchor.offset:e.focus.offset,c=a?e.focus.offset:e.anchor.offset;oo&&!e.isCollapsed()&&$(i)&&s.anchorNode!==null&&i.getTextContent().slice(0,l)+r+i.getTextContent().slice(l+c)===Du(s.anchorNode)||k(t,Tn,r);let u=r.length;qt&&u>1&&n.inputType===\"insertCompositionText\"&&!t.isComposing()&&(e.anchor.offset-=u),gr||vn||hr||!t.isComposing()||(ar=0,ue(null))}else Bs(!1,t,r!==null?r:void 0),rr&&(Xr(t,r||void 0),rr=!1);(function(){ce();let i=te();xc(i)})()},{event:n}),Sn=null}],[\"click\",function(n,t){be(t,()=>{let e=Y(),r=et($e(t)),o=sn();if(r){if(w(e)){let i=e.anchor,s=i.getNode();if(i.type===\"element\"&&i.offset===0&&e.isCollapsed()&&!ge(s)&&ke().getChildrenSize()===1&&s.getTopLevelElementOrThrow().isEmpty()&&o!==null&&e.is(o))r.removeAllRanges(),e.dirty=!0;else if(n.detail===3&&!e.isCollapsed()&&s!==e.focus.getNode()){let a=ur(s,l=>v(l)&&!l.isInline());v(a)&&a.select(0)}}else if(n.pointerType===\"touch\"||n.pointerType===\"pen\"){let i=r.anchorNode;(Ce(i)||tt(i))&&ve(vo(o,r,t,n))}}k(t,vc,n)})}],[\"cut\",gt],[\"copy\",gt],[\"dragstart\",gt],[\"dragover\",gt],[\"dragend\",gt],[\"paste\",gt],[\"focus\",gt],[\"blur\",gt],[\"drop\",gt]];oo&&os.push([\"beforeinput\",(n,t)=>(function(e,r){let o=e.inputType,i=Zc(e);o===\"deleteCompositionText\"||qt&&Ru(r)||o!==\"insertCompositionText\"&&be(r,()=>{let s=Y();if(o===\"deleteContentBackward\"){if(s===null){let h=sn();if(!w(h))return;ve(h.clone())}if(w(s)){let h=s.anchor.key===s.focus.key;if(a=e.timeStamp,Jc===\"MediaLast\"&&a<ar+30&&r.isComposing()&&h){if(ue(null),ar=0,setTimeout(()=>{be(r,()=>{ue(null)})},30),w(s)){let g=s.anchor.getNode();g.markDirty(),$(g)||A(142),qc(s,g)}}else{ue(null),e.preventDefault();let g=s.anchor.getNode(),p=g.getTextContent(),_=g.canInsertTextAfter(),x=s.anchor.offset===0&&s.focus.offset===p.length,y=Nl&&h&&!x&&_;if(y&&s.isCollapsed()&&(y=!Z(bu(s.anchor,!0))),!y){k(r,mr,!0);let N=Y();Nl&&w(N)&&N.isCollapsed()&&(Vt=N,setTimeout(()=>Vt=null))}}return}}var a;if(!w(s))return;let l=e.data;Sn!==null&&Bs(!1,r,Sn),s.dirty&&Sn===null||!s.isCollapsed()||ge(s.anchor.getNode())||i===null||s.applyDOMRange(i),Sn=null;let c=s.anchor,u=s.focus,d=c.getNode(),f=u.getNode();if(o!==\"insertText\"&&o!==\"insertTranspose\")switch(e.preventDefault(),o){case\"insertFromYank\":case\"insertFromDrop\":case\"insertReplacementText\":k(r,Tn,e);break;case\"insertFromComposition\":ue(null),k(r,Tn,e);break;case\"insertLineBreak\":ue(null),k(r,sr,!1);break;case\"insertParagraph\":ue(null),lr&&!vn?(lr=!1,k(r,sr,!1)):k(r,ts,void 0);break;case\"insertFromPaste\":case\"insertFromPasteAsQuotation\":k(r,Es,e);break;case\"deleteByComposition\":(function(h,g){return h!==g||v(h)||v(g)||!Rt(h)||!Rt(g)})(d,f)&&k(r,ns,e);break;case\"deleteByDrag\":case\"deleteByCut\":k(r,ns,e);break;case\"deleteContent\":k(r,mr,!1);break;case\"deleteWordBackward\":k(r,yr,!0);break;case\"deleteWordForward\":k(r,yr,!1);break;case\"deleteHardLineBackward\":case\"deleteSoftLineBackward\":k(r,xr,!0);break;case\"deleteContentForward\":case\"deleteHardLineForward\":case\"deleteSoftLineForward\":k(r,xr,!1);break;case\"formatStrikeThrough\":k(r,At,\"strikethrough\");break;case\"formatBold\":k(r,At,\"bold\");break;case\"formatItalic\":k(r,At,\"italic\");break;case\"formatUnderline\":k(r,At,\"underline\");break;case\"historyUndo\":k(r,Ts,void 0);break;case\"historyRedo\":k(r,Os,void 0)}else{if(l===`\n`)e.preventDefault(),k(r,sr,!1);else if(l===It)e.preventDefault(),k(r,ts,void 0);else if(l==null&&e.dataTransfer){let h=e.dataTransfer.getData(\"text/plain\");e.preventDefault(),s.insertRawText(h)}else l!=null&&Xc(s,i,l,e.timeStamp,!0)?(e.preventDefault(),k(r,Tn,l)):Sn=l;jc=e.timeStamp}})})(n,t)]);var ar=0,Jc=null,jc=0,Sn=null,is=new WeakMap,go=new WeakMap,ss=!1,as=!1,lr=!1,rr=!1,Li=!1,wi=\"\",Vt=null,Vc=[0,\"\",0,\"root\",0];function Xc(n,t,e,r,o){let i=n.anchor,s=n.focus,a=i.getNode(),l=te(),c=et($e(l)),u=c!==null?c.anchorNode:null,d=i.key,f=l.getElementByKey(d),h=e.length;return d!==s.key||!$(a)||(!o&&(!oo||jc<r+50)||a.isDirty()&&h<2||Mu(e))&&i.offset!==s.offset&&!a.isComposing()||_t(a)||a.isDirty()&&h>1||(o||!oo)&&f!==null&&!a.isComposing()&&u!==nn(f)||c!==null&&t!==null&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||a.getFormat()!==n.format||a.getStyle()!==n.style||(function(g,p){if(p.isSegmented())return!0;if(!g.isCollapsed())return!1;let _=g.anchor.offset,x=p.getParentOrThrow(),y=Rt(p);return _===0?!p.canInsertTextBefore()||!x.canInsertTextBefore()&&!p.isComposing()||y||(function(N){let S=N.getPreviousSibling();return($(S)||v(S)&&S.isInline())&&!S.canInsertTextAfter()})(p):_===p.getTextContentSize()&&(!p.canInsertTextAfter()||!x.canInsertTextAfter()&&!p.isComposing()||y)})(n,a)}function kl(n,t){return tt(n)&&n.nodeValue!==null&&t!==0&&t!==n.nodeValue.length}function Il(n,t,e){let{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}=n;ss&&(ss=!1,kl(r,o)&&kl(i,s)&&!Vt)||be(t,()=>{if(!e)return void ve(null);if(!Er(t,r,i))return;let a=Y();if(Vt&&w(a)&&a.isCollapsed()){let l=a.anchor,c=Vt.anchor;(l.key===c.key&&l.offset===c.offset+1||l.offset===1&&c.getNode().is(l.getNode().getPreviousSibling()))&&(a=Vt.clone(),ve(a))}if(Vt=null,w(a)){let l=a.anchor,c=l.getNode();if(a.isCollapsed()){n.type===\"Range\"&&n.anchorNode===n.focusNode&&(a.dirty=!0);let u=$e(t).event,d=u?u.timeStamp:performance.now(),[f,h,g,p,_]=Vc,x=ke(),y=t.isComposing()===!1&&x.getTextContent()===\"\";if(d<_+200&&l.offset===g&&l.key===p)to(a,f,h);else if(l.type===\"text\")$(c)||A(141),qc(a,c);else if(l.type===\"element\"&&!y){v(c)||A(259);let N=l.getNode();N.isEmpty()?(function(S,M){let E=M.getTextFormat(),T=M.getTextStyle();to(S,E,T)})(a,N):to(a,0,\"\")}}else{let u=l.key,d=a.focus.key,f=a.getNodes(),h=f.length,g=a.isBackward(),p=g?s:o,_=g?o:s,x=g?d:u,y=g?u:d,N=2047,S=!1;for(let M=0;M<h;M++){let E=f[M],T=E.getTextContentSize();if($(E)&&T!==0&&!(M===0&&E.__key===x&&p===T||M===h-1&&E.__key===y&&_===0)&&(S=!0,N&=E.getFormat(),N===0))break}a.format=S?N:0}}k(t,Ss,void 0)})}function to(n,t,e){n.format===t&&n.style===e||(n.format=t,n.style=e,n.dirty=!0)}function qc(n,t){to(n,t.getFormat(),t.getStyle())}function Zc(n){if(!n.getTargetRanges)return null;let t=n.getTargetRanges();return t.length===0?null:t[0]}function Xr(n,t){let e=n._compositionKey;if(ue(null),e!==null&&t!=null){if(t===\"\"){let r=ae(e),o=nn(n.getElementByKey(e));return void(o!==null&&o.nodeValue!==null&&$(r)&&Ws(r,o.nodeValue,null,null,!0))}if(t[t.length-1]===`\n`){let r=Y();if(w(r)){let o=r.focus;return r.anchor.set(o.key,o.offset,o.type),void k(n,fo,null)}}}Bs(!0,n,t)}function Qc(n){let t=n.__lexicalEventHandles;return t===void 0&&(t=[],n.__lexicalEventHandles=t),t}var On=new Map;function eu(n){let t=wu(n.target);if(t===null)return;let e=Ps(t.anchorNode);if(e===null)return;as&&(as=!1,be(e,()=>{let l=sn(),c=t.anchorNode;(Ce(c)||tt(c))&&ve(vo(l,t,e,n))}));let r=Ks(e),o=r[r.length-1],i=o._key,s=On.get(i),a=s||o;a!==e&&Il(t,a,!1),Il(t,e,!0),e!==o?On.set(i,e):s&&On.delete(i)}function $l(n){n._lexicalHandled=!0}function Ll(n){return n._lexicalHandled===!0}var wl=()=>{};function lp(n){let t=is.get(n);if(t===void 0)return void wl();let e=go.get(t);if(e===void 0)return void wl();let r=e-1;r>=0||A(164),is.delete(n),go.set(t,r),r===0&&t.removeEventListener(\"selectionchange\",eu);let o=Tr(n);Ao(o)?((function(s){if(s._parentEditor!==null){let a=Ks(s),l=a[a.length-1]._key;On.get(l)===s&&On.delete(l)}else On.delete(s._key)})(o),n.__lexicalEditor=null):o&&A(198);let i=Qc(n);for(let s=0;s<i.length;s++)i[s]();n.__lexicalEventHandles=[]}function ls(n,t,e){ce();let r=n.__key,o=n.getParent();if(o===null)return;let i=(function(a){let l=Y();if(!w(l)||!v(a))return l;let{anchor:c,focus:u}=l,d=c.getNode(),f=u.getNode();return Co(d,a)&&c.set(a.__key,0,\"element\"),Co(f,a)&&u.set(a.__key,0,\"element\"),l})(n),s=!1;if(w(i)&&t){let a=i.anchor,l=i.focus;a.key===r&&(mo(a,n,o,n.getPreviousSibling(),n.getNextSibling()),s=!0),l.key===r&&(mo(l,n,o,n.getPreviousSibling(),n.getNextSibling()),s=!0)}else Mo(i)&&t&&n.isSelected()&&n.selectPrevious();if(w(i)&&t&&!s){let a=n.getIndexWithinParent();kt(n),_o(i,o,a,-1)}else kt(n);e||Ye(o)||o.canBeEmpty()||!o.isEmpty()||ls(o,t),t&&i&&ge(o)&&o.isEmpty()&&o.selectEnd()}function cp(n){return n}var tu=Symbol.for(\"ephemeral\");function ho(n){return n[tu]||!1}var Re=class{constructor(t){C(this,\"__type\");C(this,\"__key\");C(this,\"__parent\");C(this,\"__prev\");C(this,\"__next\");C(this,\"__state\");this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,\"__state\",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Eu(this,t)}static getType(){let{ownNodeType:t}=vr(this);return t===void 0&&A(64,this.name),t}static clone(t){A(65,this.name)}$config(){return{}}config(t,e){let r=e.extends||Object.getPrototypeOf(this.constructor);return Object.assign(e,{extends:r,type:t}),{[t]:e}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}getType(){return this.__type}isInline(){A(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t===\"root\")return!0;let e=ae(t);if(e===null)break;t=e.__parent}return!1}isSelected(t){let e=t||Y();if(e==null)return!1;let r=e.getNodes().some(o=>o.__key===this.__key);if($(this))return r;if(w(e)&&e.anchor.type===\"element\"&&e.focus.type===\"element\"){if(e.isCollapsed())return!1;let o=this.getParent();if(Z(this)&&this.isInline()&&o){let i=e.isBackward()?e.focus:e.anchor;if(o.is(i.getNode())&&i.offset===o.getChildrenSize()&&this.is(o.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){let t=this.getParent();if(t===null)return-1;let e=t.getFirstChild(),r=0;for(;e!==null;){if(this.is(e))return r;r++,e=e.getNextSibling()}return-1}getParent(){let t=this.getLatest().__parent;return t===null?null:ae(t)}getParentOrThrow(){let t=this.getParent();return t===null&&A(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){let e=t.getParent();if(Ye(e))return v(t)||t===this&&Z(t)||A(194),t;t=e}return null}getTopLevelElementOrThrow(){let t=this.getTopLevelElement();return t===null&&A(67,this.__key),t}getParents(){let t=[],e=this.getParent();for(;e!==null;)t.push(e),e=e.getParent();return t}getParentKeys(){let t=[],e=this.getParent();for(;e!==null;)t.push(e.__key),e=e.getParent();return t}getPreviousSibling(){let t=this.getLatest().__prev;return t===null?null:ae(t)}getPreviousSiblings(){let t=[],e=this.getParent();if(e===null)return t;let r=e.getFirstChild();for(;r!==null&&!r.is(this);)t.push(r),r=r.getNextSibling();return t}getNextSibling(){let t=this.getLatest().__next;return t===null?null:ae(t)}getNextSiblings(){let t=[],e=this.getNextSibling();for(;e!==null;)t.push(e),e=e.getNextSibling();return t}getCommonAncestor(t){let e=v(this)?this:this.getParent(),r=v(t)?t:t.getParent(),o=e&&r?dr(e,r):null;return o?o.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){let e=dr(this,t);return e!==null&&(e.type===\"descendant\"||(e.type===\"branch\"?Zs(e)===-1:(e.type!==\"same\"&&e.type!==\"ancestor\"&&A(279),!1)))}isParentOf(t){let e=dr(this,t);return e!==null&&e.type===\"ancestor\"}getNodesBetween(t){let e=this.isBefore(t),r=[],o=new Set,i=this;for(;i!==null;){let s=i.__key;if(o.has(s)||(o.add(s),r.push(i)),i===t)break;let a=v(i)?e?i.getFirstChild():i.getLastChild():null;if(a!==null){i=a;continue}let l=e?i.getNextSibling():i.getPreviousSibling();if(l!==null){i=l;continue}let c=i.getParentOrThrow();if(o.has(c.__key)||r.push(c),c===t)break;let u=null,d=c;do{if(d===null&&A(68),u=e?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),d===null)break;u!==null||o.has(d.__key)||r.push(d)}while(u===null);i=u}return e||r.reverse(),r}isDirty(){let t=te()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){if(ho(this))return this;let t=ae(this.__key);return t===null&&A(113),t}getWritable(){if(ho(this))return this;ce();let t=Tt(),e=te(),r=t._nodeMap,o=this.__key,i=this.getLatest(),s=e._cloneNotNeeded,a=Y();if(a!==null&&a.setCachedNodes(null),s.has(o))return No(i),i;let l=Js(i);return s.add(o),No(l),r.set(o,l),l}getTextContent(){return\"\"}getTextContentSize(){return this.getTextContent().length}createDOM(t,e){A(70)}updateDOM(t,e,r){A(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){let t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){A(18,this.name)}updateFromJSON(t){return(function(e,r){let o=e.getWritable(),i=r.$,s=i;for(let a of Sc(o).flatKeys)a in r&&(s!==void 0&&s!==i||(s={...i}),s[a]=r[a]);return(o.__state||s)&&Cs(e).updateFromJSON(s),o})(this,t)}static transform(){return null}remove(t){ls(this,!0,t)}replace(t,e){ce();let r=Y();r!==null&&(r=r.clone()),zi(this,t);let o=this.getLatest(),i=this.__key,s=t.__key,a=t.getWritable(),l=this.getParentOrThrow().getWritable(),c=l.__size;kt(a);let u=o.getPreviousSibling(),d=o.getNextSibling(),f=o.__prev,h=o.__next,g=o.__parent;if(ls(o,!1,!0),u===null?l.__first=s:u.getWritable().__next=s,a.__prev=f,d===null?l.__last=s:d.getWritable().__prev=s,a.__next=h,a.__parent=g,l.__size=c,e&&(v(this)&&v(a)||A(139),this.getChildren().forEach(p=>{a.append(p)})),w(r)){ve(r);let p=r.anchor,_=r.focus;p.key===i&&Bl(p,a),_.key===i&&Bl(_,a)}return bt()===i&&ue(s),a}insertAfter(t,e=!0){ce(),zi(this,t);let r=this.getWritable(),o=t.getWritable(),i=o.getParent(),s=Y(),a=!1,l=!1;if(i!==null){let h=t.getIndexWithinParent();if(kt(o),w(s)){let g=i.__key,p=s.anchor,_=s.focus;a=p.type===\"element\"&&p.key===g&&p.offset===h+1,l=_.type===\"element\"&&_.key===g&&_.offset===h+1}}let c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=o.__key,f=r.__next;if(c===null?u.__last=d:c.getWritable().__prev=d,u.__size++,r.__next=d,o.__next=f,o.__prev=r.__key,o.__parent=r.__parent,e&&w(s)){let h=this.getIndexWithinParent();_o(s,u,h+1);let g=u.__key;a&&s.anchor.set(g,h+2,\"element\"),l&&s.focus.set(g,h+2,\"element\")}return t}insertBefore(t,e=!0){ce(),zi(this,t);let r=this.getWritable(),o=t.getWritable(),i=o.__key;kt(o);let s=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=r.__prev,c=this.getIndexWithinParent();s===null?a.__first=i:s.getWritable().__next=i,a.__size++,r.__prev=i,o.__prev=l,o.__next=r.__key,o.__parent=r.__parent;let u=Y();return e&&w(u)&&_o(u,this.getParentOrThrow(),c),t}isParentRequired(){return!1}createParentElementNode(){return Nt()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,e){ce();let r=this.getPreviousSibling(),o=this.getParentOrThrow();if(r===null)return o.select(0,0);if(v(r))return r.select();if(!$(r)){let i=r.getIndexWithinParent()+1;return o.select(i,i)}return r.select(t,e)}selectNext(t,e){ce();let r=this.getNextSibling(),o=this.getParentOrThrow();if(r===null)return o.select();if(v(r))return r.select(0,0);if(!$(r)){let i=r.getIndexWithinParent();return o.select(i,i)}return r.select(t,e)}markDirty(){this.getWritable()}reconcileObservedMutation(t,e){this.markDirty()}};C(Re,\"importDOM\");var up=\"historic\",dp=\"history-push\",no=\"history-merge\",fp=\"paste\",nu=\"collaboration\",gp=\"skip-collab\",ru=\"skip-scroll-into-view\",ou=\"skip-dom-selection\",iu=\"skip-selection-focus\",Dn=class n extends Re{static getType(){return\"linebreak\"}static clone(t){return new n(t.__key)}constructor(t){super(t)}getTextContent(){return`\n`}createDOM(){return document.createElement(\"br\")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(e){let r=e.parentElement;if(r!==null&&hs(r)){let o=r.firstChild;if(o===e||o.nextSibling===e&&qr(o)){let i=r.lastChild;if(i===e||i.previousSibling===e&&qr(i))return!0}}return!1})(t)||(function(e){let r=e.parentElement;if(r!==null&&hs(r)){let o=r.firstChild;if(o===e||o.nextSibling===e&&qr(o))return!1;let i=r.lastChild;if(i===e||i.previousSibling===e&&qr(i))return!0}return!1})(t)?null:{conversion:hp,priority:0}}}static importJSON(t){return An().updateFromJSON(t)}};function hp(n){return{node:An()}}function An(){return Mr(new Dn)}function Xt(n){return n instanceof Dn}function qr(n){return tt(n)&&/^( |\\t|\\r?\\n)+$/.test(n.textContent||\"\")}function Pi(n,t){return 16&t?\"code\":t&xs?\"mark\":32&t?\"sub\":64&t?\"sup\":null}function Fi(n,t){return 1&t?\"strong\":2&t?\"em\":\"span\"}function su(n,t,e,r,o){let i=r.classList,s=Mn(o,\"base\");s!==void 0&&i.add(...s),s=Mn(o,\"underlineStrikethrough\");let a=!1,l=8&t&&4&t;s!==void 0&&(8&e&&4&e?(a=!0,l||i.add(...s)):l&&i.remove(...s));for(let c in xe){let u=xe[c];if(s=Mn(o,c),s!==void 0)if(e&u){if(a&&(c===\"underline\"||c===\"strikethrough\")){t&u&&i.remove(...s);continue}((t&u)===0||l&&c===\"underline\"||c===\"strikethrough\")&&i.add(...s)}else t&u&&i.remove(...s)}}function au(n,t,e){let r=t.firstChild,o=e.isComposing(),i=n+(o?Eo:\"\");if(r==null)t.textContent=i;else{let s=r.nodeValue;if(s!==i)if(o||qt){let[a,l,c]=(function(u,d){let f=u.length,h=d.length,g=0,p=0;for(;g<f&&g<h&&u[g]===d[g];)g++;for(;p+g<f&&p+g<h&&u[f-p-1]===d[h-p-1];)p++;return[g,f-g-p,d.slice(g,h-p)]})(s,i);l!==0&&r.deleteData(a,l),r.insertData(a,c)}else r.nodeValue=i}}function Pl(n,t,e,r,o,i){au(o,n,t);let s=i.theme.text;s!==void 0&&su(0,0,r,n,s)}function Zr(n,t){let e=document.createElement(t);return e.appendChild(n),e}var en=class n extends Re{constructor(e=\"\",r){super(r);C(this,\"__text\");C(this,\"__format\");C(this,\"__style\");C(this,\"__mode\");C(this,\"__detail\");this.__text=e,this.__format=0,this.__style=\"\",this.__mode=0,this.__detail=0}static getType(){return\"text\"}static clone(e){return new n(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let e=this.getLatest();return Bh[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===bt()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let r=xe[e];return(this.getFormat()&r)!==0}isSimpleText(){return this.__type===\"text\"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,r){return xo(this.getLatest().__format,e,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,r){let o=this.__format,i=Pi(0,o),s=Fi(0,o),a=i===null?s:i,l=document.createElement(a),c=l;this.hasFormat(\"code\")&&l.setAttribute(\"spellcheck\",\"false\"),i!==null&&(c=document.createElement(s),l.appendChild(c)),Pl(c,this,0,o,this.__text,e);let u=this.__style;return u!==\"\"&&(l.style.cssText=u),l}updateDOM(e,r,o){let i=this.__text,s=e.__format,a=this.__format,l=Pi(0,s),c=Pi(0,a),u=Fi(0,s),d=Fi(0,a);if((l===null?u:l)!==(c===null?d:c))return!0;if(l===c&&u!==d){let _=r.firstChild;_==null&&A(48);let x=document.createElement(d);return Pl(x,this,0,a,i,o),r.replaceChild(x,_),!1}let f=r;c!==null&&l!==null&&(f=r.firstChild,f==null&&A(49)),au(i,f,this);let h=o.theme.text;h!==void 0&&s!==a&&su(0,s,a,f,h);let g=e.__style,p=this.__style;return g!==p&&(r.style.cssText=p),!1}static importDOM(){return{\"#text\":()=>({conversion:yp,priority:0}),b:()=>({conversion:_p,priority:0}),code:()=>({conversion:ht,priority:0}),em:()=>({conversion:ht,priority:0}),i:()=>({conversion:ht,priority:0}),mark:()=>({conversion:ht,priority:0}),s:()=>({conversion:ht,priority:0}),span:()=>({conversion:pp,priority:0}),strong:()=>({conversion:ht,priority:0}),sub:()=>({conversion:ht,priority:0}),sup:()=>({conversion:ht,priority:0}),u:()=>({conversion:ht,priority:0})}}static importJSON(e){return le().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:r}=super.exportDOM(e);return Ce(r)||A(132),r.style.whiteSpace=\"pre-wrap\",this.hasFormat(\"lowercase\")?r.style.textTransform=\"lowercase\":this.hasFormat(\"uppercase\")?r.style.textTransform=\"uppercase\":this.hasFormat(\"capitalize\")&&(r.style.textTransform=\"capitalize\"),this.hasFormat(\"bold\")&&(r=Zr(r,\"b\")),this.hasFormat(\"italic\")&&(r=Zr(r,\"i\")),this.hasFormat(\"strikethrough\")&&(r=Zr(r,\"s\")),this.hasFormat(\"underline\")&&(r=Zr(r,\"u\")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,r){}setFormat(e){let r=this.getWritable();return r.__format=typeof e==\"string\"?xe[e]:e,r}setDetail(e){let r=this.getWritable();return r.__detail=typeof e==\"string\"?Ph[e]:e,r}setStyle(e){let r=this.getWritable();return r.__style=e,r}toggleFormat(e){let r=xo(this.getFormat(),e,null);return this.setFormat(r)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let r=Kh[e];if(this.__mode===r)return this;let o=this.getWritable();return o.__mode=r,o}setTextContent(e){if(this.__text===e)return this;let r=this.getWritable();return r.__text=e,r}select(e,r){ce();let o=e,i=r,s=Y(),a=this.getTextContent(),l=this.__key;if(typeof a==\"string\"){let c=a.length;o===void 0&&(o=c),i===void 0&&(i=c)}else o=0,i=0;if(!w(s))return uu(l,o,l,i,\"text\",\"text\");{let c=bt();c!==s.anchor.key&&c!==s.focus.key||ue(l),s.setTextNodeRange(this,o,this,i)}return s}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,r,o,i){let s=this.getWritable(),a=s.__text,l=o.length,c=e;c<0&&(c=l+c,c<0&&(c=0));let u=Y();if(i&&w(u)){let f=e+l;u.setTextNodeRange(s,f,s,f)}let d=a.slice(0,c)+o+a.slice(c+r);return s.__text=d,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){ce();let r=this.getLatest(),o=r.getTextContent();if(o===\"\")return[];let i=r.__key,s=bt(),a=o.length;e.sort((O,R)=>O-R),e.push(a);let l=[],c=e.length;for(let O=0,R=0;O<a&&R<=c;R++){let P=e[R];P>O&&(l.push(o.slice(O,P)),O=P)}let u=l.length;if(u===1)return[r];let d=l[0],f=r.getParent(),h,g=r.getFormat(),p=r.getStyle(),_=r.__detail,x=!1,y=null,N=null,S=Y();if(w(S)){let[O,R]=S.isBackward()?[S.focus,S.anchor]:[S.anchor,S.focus];O.type===\"text\"&&O.key===i&&(y=O),R.type===\"text\"&&R.key===i&&(N=R)}r.isSegmented()?(h=le(d),h.__format=g,h.__style=p,h.__detail=_,h.__state=Ml(r,h),x=!0):h=r.setTextContent(d);let M=[h];for(let O=1;O<u;O++){let R=le(l[O]);R.__format=g,R.__style=p,R.__detail=_,R.__state=Ml(r,R);let P=R.__key;s===i&&ue(P),M.push(R)}let E=y?y.offset:null,T=N?N.offset:null,D=0;for(let O of M){if(!y&&!N)break;let R=D+O.getTextContentSize();if(y!==null&&E!==null&&E<=R&&E>=D&&(y.set(O.getKey(),E-D,\"text\"),E<R&&(y=null)),N!==null&&T!==null&&T<=R&&T>=D){N.set(O.getKey(),T-D,\"text\");break}D=R}if(f!==null){(function(P){let q=P.getPreviousSibling(),H=P.getNextSibling();q!==null&&No(q),H!==null&&No(H)})(this);let O=f.getWritable(),R=this.getIndexWithinParent();x?(O.splice(R,0,M),this.remove()):O.splice(R,1,M),w(S)&&_o(S,f,R,u-1)}return M}mergeWithSibling(e){let r=e===this.getPreviousSibling();r||e===this.getNextSibling()||A(50);let o=this.__key,i=e.__key,s=this.__text,a=s.length;bt()===i&&ue(o);let l=Y();if(w(l)){let f=l.anchor,h=l.focus;f!==null&&f.key===i&&Jl(f,r,o,e,a),h!==null&&h.key===i&&Jl(h,r,o,e,a)}let c=e.__text,u=r?c+s:s+c;this.setTextContent(u);let d=this.getWritable();return e.remove(),d}isTextEntity(){return!1}};function pp(n){return{forChild:Ds(n.style),node:null}}function _p(n){let t=n,e=t.style.fontWeight===\"normal\";return{forChild:Ds(t.style,e?void 0:\"bold\"),node:null}}var Fl=new WeakMap;function mp(n){if(!Ce(n))return!1;if(n.nodeName===\"PRE\")return!0;let t=n.style.whiteSpace;return typeof t==\"string\"&&t.startsWith(\"pre\")}function yp(n){let t=n;n.parentElement===null&&A(129);let e=t.textContent||\"\";if((function(r){let o,i=r.parentNode,s=[r];for(;i!==null&&(o=Fl.get(i))===void 0&&!mp(i);)s.push(i),i=i.parentNode;let a=o===void 0?i:o;for(let l=0;l<s.length;l++)Fl.set(s[l],a);return a})(t)!==null){let r=e.split(/(\\r?\\n|\\t)/),o=[],i=r.length;for(let s=0;s<i;s++){let a=r[s];a===`\n`||a===`\\r\n`?o.push(An()):a===\"\t\"?o.push(Oo()):a!==\"\"&&o.push(le(a))}return{node:o}}if(e=e.replace(/\\r/g,\"\").replace(/[ \\t\\n]+/g,\" \"),e===\"\")return{node:null};if(e[0]===\" \"){let r=t,o=!0;for(;r!==null&&(r=Kl(r,!1))!==null;){let i=r.textContent||\"\";if(i.length>0){/[ \\t\\n]$/.test(i)&&(e=e.slice(1)),o=!1;break}}o&&(e=e.slice(1))}if(e[e.length-1]===\" \"){let r=t,o=!0;for(;r!==null&&(r=Kl(r,!0))!==null;)if((r.textContent||\"\").replace(/^( |\\t|\\r?\\n)+/,\"\").length>0){o=!1;break}o&&(e=e.slice(0,e.length-1))}return e===\"\"?{node:null}:{node:le(e)}}function Kl(n,t){let e=n;for(;;){let r;for(;(r=t?e.nextSibling:e.previousSibling)===null;){let i=e.parentElement;if(i===null)return null;e=i}if(e=r,Ce(e)){let i=e.style.display;if(i===\"\"&&!Fu(e)||i!==\"\"&&!i.startsWith(\"inline\"))return null}let o=e;for(;(o=t?e.firstChild:e.lastChild)!==null;)e=o;if(tt(e))return e;if(e.nodeName===\"BR\")return null}}var xp={code:\"code\",em:\"italic\",i:\"italic\",mark:\"highlight\",s:\"strikethrough\",strong:\"bold\",sub:\"subscript\",sup:\"superscript\",u:\"underline\"};function ht(n){let t=xp[n.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:Ds(n.style,t),node:null}}function le(n=\"\"){return Mr(new en(n))}function $(n){return n instanceof en}function Ds(n,t){let e=n.fontWeight,r=n.textDecoration.split(\" \"),o=e===\"700\"||e===\"bold\",i=r.includes(\"line-through\"),s=n.fontStyle===\"italic\",a=r.includes(\"underline\"),l=n.verticalAlign;return c=>($(c)&&(o&&!c.hasFormat(\"bold\")&&c.toggleFormat(\"bold\"),i&&!c.hasFormat(\"strikethrough\")&&c.toggleFormat(\"strikethrough\"),s&&!c.hasFormat(\"italic\")&&c.toggleFormat(\"italic\"),a&&!c.hasFormat(\"underline\")&&c.toggleFormat(\"underline\"),l!==\"sub\"||c.hasFormat(\"subscript\")||c.toggleFormat(\"subscript\"),l!==\"super\"||c.hasFormat(\"superscript\")||c.toggleFormat(\"superscript\"),t&&!c.hasFormat(t)&&c.toggleFormat(t)),c)}var bn=class n extends en{static getType(){return\"tab\"}static clone(t){return new n(t.__key)}constructor(t){super(\"\t\",t),this.__detail=2}static importDOM(){return null}createDOM(t){let e=super.createDOM(t),r=Mn(t.theme,\"tab\");return r!==void 0&&e.classList.add(...r),e}static importJSON(t){return Oo().updateFromJSON(t)}setTextContent(t){return t!==\"\t\"&&t!==\"\"&&fc(126),super.setTextContent(\"\t\")}spliceText(t,e,r,o){return r===\"\"&&e===0||r===\"\t\"&&e===1||A(286),this}setDetail(t){return t!==2&&A(127),this}setMode(t){return t!==\"normal\"&&A(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}};function Oo(){return Mr(new bn)}function As(n){return n instanceof bn}var cs=class{constructor(t,e,r){C(this,\"key\");C(this,\"offset\");C(this,\"type\");C(this,\"_selection\");this._selection=null,this.key=t,this.offset=e,this.type=r}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:qs(Be(Pt(this,\"next\")),Be(Pt(t,\"next\")))<0}getNode(){let t=ae(this.key);return t===null&&A(20),t}set(t,e,r,o){let i=this._selection,s=this.key;o&&this.key===t&&this.offset===e&&this.type===r||(this.key=t,this.offset=e,this.type=r,Fn()||(bt()===s&&ue(t),i!==null&&(i.setCachedNodes(null),i.dirty=!0)))}};function He(n,t,e){return new cs(n,t,e)}function Ki(n,t){let e=t.__key,r=n.offset,o=\"element\";if($(t)){o=\"text\";let i=t.getTextContentSize();r>i&&(r=i)}else if(!v(t)){let i=t.getNextSibling();if($(i))e=i.__key,r=0,o=\"text\";else{let s=t.getParent();s&&(e=s.__key,r=t.getIndexWithinParent()+1)}}n.set(e,r,o)}function Bl(n,t){if(v(t)){let e=t.getLastDescendant();v(e)||$(e)?Ki(n,e):Ki(n,t)}else Ki(n,t)}var po=class n{constructor(t){C(this,\"_nodes\");C(this,\"_cachedNodes\");C(this,\"dirty\");this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Mo(t))return!1;let e=this._nodes,r=t._nodes;return e.size===r.size&&Array.from(e).every(o=>r.has(o))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new n(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){let e=this.getNodes(),r=e.length,o=e[r-1],i;if($(o))i=o.select();else{let s=o.getIndexWithinParent()+1;i=o.getParentOrThrow().select(s,s)}i.insertNodes(t);for(let s=0;s<r;s++)e[s].remove()}getNodes(){let t=this._cachedNodes;if(t!==null)return t;let e=this._nodes,r=[];for(let o of e){let i=ae(o);i!==null&&r.push(i)}return Fn()||(this._cachedNodes=r),r}getTextContent(){let t=this.getNodes(),e=\"\";for(let r=0;r<t.length;r++)e+=t[r].getTextContent();return e}deleteNodes(){let t=this.getNodes();if((Y()||sn())===this&&t[0]){let e=he(t[0],\"next\");Uu(wt(e,e))}for(let e of t)e.remove()}};function w(n){return n instanceof tn}var tn=class n{constructor(t,e,r,o){C(this,\"format\");C(this,\"style\");C(this,\"anchor\");C(this,\"focus\");C(this,\"_cachedNodes\");C(this,\"dirty\");this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=r,this.style=o,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!w(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let t=this._cachedNodes;if(t!==null)return t;let e=(function(r){let o=[],[i,s]=r.getTextSlices();i&&o.push(i.caret.origin);let a=new Set,l=new Set;for(let c of r)if(ze(c)){let{origin:u}=c;o.length===0?a.add(u):(l.add(u),o.push(u))}else{let{origin:u}=c;v(u)&&l.has(u)||o.push(u)}if(s&&o.push(s.caret.origin),on(r.focus)&&v(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let c=Et(r.focus.origin,\"previous\");ze(c)&&a.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(o[o.length-1]);c=wn(c))a.delete(c.origin),o.pop();for(;o.length>1;){let c=o[o.length-1];if(!v(c)||l.has(c)||c.isEmpty()||a.has(c))break;o.pop()}if(o.length===0&&r.isCollapsed()){let c=Be(r.anchor),u=Be(r.anchor.getFlipped()),d=h=>St(h)?h.origin:h.getNodeAtCaret(),f=d(c)||d(u)||(r.anchor.getNodeAtCaret()?c.origin:u.origin);o.push(f)}return o})(Qs(ys(this),\"next\"));return Fn()||(this._cachedNodes=e),e}setTextNodeRange(t,e,r,o){this.anchor.set(t.__key,e,\"text\"),this.focus.set(r.__key,o,\"text\")}getTextContent(){let t=this.getNodes();if(t.length===0)return\"\";let e=t[0],r=t[t.length-1],o=this.anchor,i=this.focus,s=o.isBefore(i),[a,l]=us(this),c=\"\",u=!0;for(let d=0;d<t.length;d++){let f=t[d];if(v(f)&&!f.isInline())u||(c+=`\n`),u=!f.isEmpty();else if(u=!1,$(f)){let h=f.getTextContent();f===e?f===r?o.type===\"element\"&&i.type===\"element\"&&i.offset!==o.offset||(h=a<l?h.slice(a,l):h.slice(l,a)):h=s?h.slice(a):h.slice(l):f===r&&(h=s?h.slice(0,l):h.slice(0,a)),c+=h}else!Z(f)&&!Xt(f)||f===r&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(t){let e=te(),r=e.getEditorState()._selection,o=cu(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,r);if(o===null)return;let[i,s]=o;this.anchor.set(i.key,i.offset,i.type,!0),this.focus.set(s.key,s.offset,s.type,!0),so(this)}clone(){let t=this.anchor,e=this.focus;return new n(He(t.key,t.offset,t.type),He(e.key,e.offset,e.type),this.format,this.style)}toggleFormat(t){this.format=xo(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){let e=xe[t];return(this.format&e)!==0}insertRawText(t){let e=t.split(/(\\r?\\n|\\t)/),r=[],o=e.length;for(let i=0;i<o;i++){let s=e[i];s===`\n`||s===`\\r\n`?r.push(An()):s===\"\t\"?r.push(Oo()):r.push(le(s))}this.insertNodes(r)}insertText(t){let e=this.anchor,r=this.focus,o=this.format,i=this.style,s=e,a=r;!this.isCollapsed()&&r.isBefore(e)&&(s=r,a=e),s.type===\"element\"&&(function(_,x,y,N){let S=_.getNode(),M=S.getChildAtIndex(_.offset),E=le();if(E.setFormat(y),E.setStyle(N),yu(M))M.splice(0,0,[E]);else{let T=ge(S)?Nt().append(E):E;M===null?S.append(T):M.insertBefore(T)}_.is(x)&&x.set(E.__key,0,\"text\"),_.set(E.__key,0,\"text\")})(s,a,o,i),a.type===\"element\"&&Pn(a,Be(Pt(a,\"next\")));let l=s.offset,c=a.offset,u=this.getNodes(),d=u.length,f=u[0];$(f)||A(26);let h=f.getTextContent().length,g=f.getParentOrThrow(),p=u[d-1];if(d===1&&a.type===\"element\"&&(c=h,a.set(s.key,c,\"text\")),this.isCollapsed()&&l===h&&(_t(f)||!f.canInsertTextAfter()||!g.canInsertTextAfter()&&f.getNextSibling()===null)){let _=f.getNextSibling();if($(_)&&_.canInsertTextBefore()&&!_t(_)||(_=le(),_.setFormat(o),_.setStyle(i),g.canInsertTextAfter()?f.insertAfter(_):g.insertAfter(_)),_.select(0,0),f=_,t!==\"\")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(_t(f)||!f.canInsertTextBefore()||!g.canInsertTextBefore()&&f.getPreviousSibling()===null)){let _=f.getPreviousSibling();if($(_)&&!_t(_)||(_=le(),_.setFormat(o),g.canInsertTextBefore()?f.insertBefore(_):g.insertBefore(_)),_.select(),f=_,t!==\"\")return void this.insertText(t)}else if(f.isSegmented()&&l!==h){let _=le(f.getTextContent());_.setFormat(o),f.replace(_),f=_}else if(!this.isCollapsed()&&t!==\"\"){let _=p.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||v(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(\"\"),lu(this.anchor,this.focus,null),void this.insertText(t)}if(d===1){if(Rt(f)){let N=le(t);return N.select(),void f.replace(N)}let _=f.getFormat(),x=f.getStyle();if(l!==c||_===o&&x===i){if(As(f)){let N=le(t);return N.setFormat(o),N.setStyle(i),N.select(),void f.replace(N)}}else{if(f.getTextContent()!==\"\"){let N=le(t);if(N.setFormat(o),N.setStyle(i),N.select(),l===0)f.insertBefore(N,!1);else{let[S]=f.splitText(l);S.insertAfter(N,!1)}return void(N.isComposing()&&this.anchor.type===\"text\"&&(this.anchor.offset-=t.length))}f.setFormat(o),f.setStyle(i)}let y=c-l;f=f.spliceText(l,y,t,!0),f.getTextContent()===\"\"?f.remove():this.anchor.type===\"text\"&&(f.isComposing()?this.anchor.offset-=t.length:(this.format=_,this.style=x))}else{let _=new Set([...f.getParentKeys(),...p.getParentKeys()]),x=v(f)?f:f.getParentOrThrow(),y=v(p)?p:p.getParentOrThrow(),N=p;if(!x.is(y)&&y.isInline())do N=y,y=y.getParentOrThrow();while(y.isInline());if(a.type===\"text\"&&(c!==0||p.getTextContent()===\"\")||a.type===\"element\"&&p.getIndexWithinParent()<c)if($(p)&&!Rt(p)&&c!==p.getTextContentSize()){if(p.isSegmented()){let D=le(p.getTextContent());p.replace(D),p=D}ge(a.getNode())||a.type!==\"text\"||(p=p.spliceText(0,c,\"\")),_.add(p.__key)}else{let D=p.getParentOrThrow();D.canBeEmpty()||D.getChildrenSize()!==1?p.remove():D.remove()}else _.add(p.__key);let S=y.getChildren(),M=new Set(u),E=x.is(y),T=x.isInline()&&f.getNextSibling()===null?x:f;for(let D=S.length-1;D>=0;D--){let O=S[D];if(O.is(f)||v(O)&&O.isParentOf(f))break;O.isAttached()&&(!M.has(O)||O.is(N)?E||T.insertAfter(O,!1):O.remove())}if(!E){let D=y,O=null;for(;D!==null;){let R=D.getChildren(),P=R.length;(P===0||R[P-1].is(O))&&(_.delete(D.__key),O=D),D=D.getParent()}}if(Rt(f))if(l===h)f.select();else{let D=le(t);D.select(),f.replace(D)}else f=f.spliceText(l,h-l,t,!0),f.getTextContent()===\"\"?f.remove():f.isComposing()&&this.anchor.type===\"text\"&&(this.anchor.offset-=t.length);for(let D=1;D<d;D++){let O=u[D],R=O.__key;_.has(R)||O.remove()}}}removeText(){let t=Y()===this;fr(this,Hu(ys(this))),t&&Y()!==this&&ve(this)}formatText(t,e=null){if(this.isCollapsed())return this.toggleFormat(t),void ue(null);let r=this.getNodes(),o=[];for(let S of r)$(S)&&o.push(S);let i=S=>{r.forEach(M=>{if(v(M)){let E=M.getFormatFlags(t,S);M.setTextFormat(E)}})},s=o.length;if(s===0)return this.toggleFormat(t),ue(null),void i(e);let a=this.anchor,l=this.focus,c=this.isBackward(),u=c?l:a,d=c?a:l,f=0,h=o[0],g=u.type===\"element\"?0:u.offset;if(u.type===\"text\"&&g===h.getTextContentSize()&&(f=1,h=o[1],g=0),h==null)return;let p=h.getFormatFlags(t,e);i(p);let _=s-1,x=o[_],y=d.type===\"text\"?d.offset:x.getTextContentSize();if(h.is(x)){if(g===y)return;if(_t(h)||g===0&&y===h.getTextContentSize())h.setFormat(p);else{let S=h.splitText(g,y),M=g===0?S[0]:S[1];M.setFormat(p),u.type===\"text\"&&u.set(M.__key,0,\"text\"),d.type===\"text\"&&d.set(M.__key,y-g,\"text\")}return void(this.format=p)}g===0||_t(h)||([,h]=h.splitText(g),g=0),h.setFormat(p);let N=x.getFormatFlags(t,p);y>0&&(y===x.getTextContentSize()||_t(x)||([x]=x.splitText(y)),x.setFormat(N));for(let S=f+1;S<_;S++){let M=o[S],E=M.getFormatFlags(t,N);M.setFormat(E)}u.type===\"text\"&&u.set(h.__key,g,\"text\"),d.type===\"text\"&&d.set(x.__key,y,\"text\"),this.format=p|N}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key===\"root\"){this.insertParagraph();let g=Y();return w(g)||A(134),g.insertNodes(t)}let e=(this.isBackward()?this.focus:this.anchor).getNode(),r=ur(e,xt),o=t[t.length-1];if(v(r)&&\"__language\"in r){if(\"__language\"in t[0])this.insertText(t[0].getTextContent());else{let g=Bi(this);r.splice(g,0,t),o.selectEnd()}return}if(!t.some(g=>(v(g)||Z(g))&&!g.isInline())){v(r)||A(211,e.constructor.name,e.getType());let g=Bi(this);return r.splice(g,0,t),void o.selectEnd()}let i=(function(g){let p=Nt(),_=null;for(let x=0;x<g.length;x++){let y=g[x],N=Xt(y);if(N||Z(y)&&y.isInline()||v(y)&&y.isInline()||$(y)||y.isParentRequired()){if(_===null&&(_=y.createParentElementNode(),p.append(_),N))continue;_!==null&&_.append(y)}else p.append(y),_=null}return p})(t),s=i.getLastDescendant(),a=i.getChildren(),l=!v(r)||!r.isEmpty()?this.insertParagraph():null,c=a[a.length-1],u=a[0];var d;v(d=u)&&xt(d)&&!d.isEmpty()&&v(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(v(r)||A(211,e.constructor.name,e.getType()),r.append(...u.getChildren()),u=a[1]),u&&(r===null&&A(212,e.constructor.name,e.getType()),(function(g,p){let _=p.getParentOrThrow().getLastChild(),x=p,y=[p];for(;x!==_;)x.getNextSibling()||A(140),x=x.getNextSibling(),y.push(x);let N=g;for(let S of y)N=N.insertAfter(S)})(r,u));let f=ur(s,xt);l&&v(f)&&(l.canMergeWhenEmpty()||xt(c))&&(f.append(...l.getChildren()),l.remove()),v(r)&&r.isEmpty()&&r.remove(),s.selectEnd();let h=v(r)?r.getLastChild():null;Xt(h)&&f!==r&&h.remove()}insertParagraph(){if(this.anchor.key===\"root\"){let s=Nt();return ke().splice(this.anchor.offset,0,[s]),s.select(),s}let t=Bi(this),e=ur(this.anchor.getNode(),xt);v(e)||A(213);let r=e.getChildAtIndex(t),o=r?[r,...r.getNextSiblings()]:[],i=e.insertNewAfter(this,!1);return i?(i.append(...o),i.selectStart(),i):null}insertLineBreak(t){let e=An();if(this.insertNodes([e]),t){let r=e.getParentOrThrow(),o=e.getIndexWithinParent();r.select(o,o)}}extract(){let t=[...this.getNodes()],e=t.length,r=t[0],o=t[e-1],[i,s]=us(this),a=this.isBackward(),[l,c]=a?[this.focus,this.anchor]:[this.anchor,this.focus],[u,d]=a?[s,i]:[i,s];if(e===0)return[];if(e===1){if($(r)&&!this.isCollapsed()){let f=r.splitText(u,d),h=u===0?f[0]:f[1];return h?(l.set(h.getKey(),0,\"text\"),c.set(h.getKey(),h.getTextContentSize(),\"text\"),[h]):[]}return[r]}if($(r)&&(u===r.getTextContentSize()?t.shift():u!==0&&([,r]=r.splitText(u),t[0]=r,l.set(r.getKey(),0,\"text\"))),$(o)){let f=o.getTextContent().length;d===0?t.pop():d!==f&&([o]=o.splitText(d),t[t.length-1]=o,c.set(o.getKey(),o.getTextContentSize(),\"text\"))}return t}modify(t,e,r){if(jl(this,t,e,r))return;let o=t===\"move\",i=te(),s=et($e(i));if(!s)return;let a=i._blockCursorElement,l=i._rootElement,c=this.focus.getNode();if(l===null||a===null||!v(c)||c.isInline()||c.canBeEmpty()||gs(a,i,l),this.dirty){let u=rn(i,this.anchor.key),d=rn(i,this.focus.key);this.anchor.type===\"text\"&&(u=nn(u)),this.focus.type===\"text\"&&(d=nn(d)),u&&d&&fu(s,u,this.anchor.offset,d,this.focus.offset)}if((function(u,d,f,h){u.modify(d,f,h)})(s,t,e?\"backward\":\"forward\",r),s.rangeCount>0){let u=s.getRangeAt(0),d=this.anchor.getNode(),f=ge(d)?d:$u(d);if(this.applyDOMRange(u),this.dirty=!0,!o){let h=this.getNodes(),g=[],p=!1;for(let _=0;_<h.length;_++){let x=h[_];Co(x,f)?g.push(x):p=!0}if(p&&g.length>0)if(e){let _=g[0];v(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{let _=g[g.length-1];v(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}s.anchorNode===u.startContainer&&s.anchorOffset===u.startOffset||(function(_){let x=_.focus,y=_.anchor,N=y.key,S=y.offset,M=y.type;y.set(x.key,x.offset,x.type,!0),x.set(N,S,M,!0)})(this)}}r===\"lineboundary\"&&jl(this,t,e,r,\"decorators\")}forwardDeletion(t,e,r){if(!r&&(t.type===\"element\"&&v(e)&&t.offset===e.getChildrenSize()||t.type===\"text\"&&t.offset===e.getTextContentSize())){let o=e.getParent(),i=e.getNextSibling()||(o===null?null:o.getNextSibling());if(v(i)&&i.isShadowRoot())return!0}return!1}deleteCharacter(t){let e=this.isCollapsed();if(this.isCollapsed()){let r=this.anchor,o=r.getNode();if(this.forwardDeletion(r,o,t))return;let i=Vs(Pt(r,t?\"previous\":\"next\"));if(i.getTextSlices().every(a=>a===null||a.distance===0)){let a={type:\"initial\"};for(let l of i.iterNodeCarets(\"shadowRoot\"))if(ze(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(a.type===\"merge-block\")break;if(v(i.anchor.origin)&&i.anchor.origin.isEmpty()){let c=Be(l);fr(this,wt(c,c)),i.anchor.origin.remove()}return}a.type!==\"merge-next-block\"&&a.type!==\"merge-block\"||(a={block:a.block,caret:l,type:\"merge-block\"})}}else{if(a.type===\"merge-block\")break;if(on(l)){if(v(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(i.anchor.origin))break}else a={block:l.origin,type:\"merge-next-block\"};continue}if(Z(l.origin)){if(!l.origin.isIsolated())if(a.type===\"merge-next-block\"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&v(i.anchor.origin)&&i.anchor.origin.isEmpty()){i.anchor.origin.remove();let c=bs();c.add(l.origin.getKey()),ve(c)}else l.origin.remove();return}break}}if(a.type===\"merge-block\"){let{caret:l,block:c}=a;return fr(this,wt(!l.origin.isEmpty()&&c.isEmpty()?Bn(he(c,l.direction)):i.anchor,l)),this.removeText()}}let s=this.focus;if(this.modify(\"extend\",t,\"character\"),this.isCollapsed()){if(t&&r.offset===0&&zl(this,r.getNode()))return}else{let a=s.type===\"text\"?s.getNode():null;if(o=r.type===\"text\"?r.getNode():null,a!==null&&a.isSegmented()){let l=s.offset,c=a.getTextContentSize();if(a.is(o)||t&&l!==c||!t&&l!==0)return void Ul(a,t,l)}else if(o!==null&&o.isSegmented()){let l=r.offset,c=o.getTextContentSize();if(o.is(a)||t&&l!==0||!t&&l!==c)return void Ul(o,t,l)}(function(l,c){let u=l.anchor,d=l.focus,f=u.getNode(),h=d.getNode();if(f===h&&u.type===\"text\"&&d.type===\"text\"){let g=u.offset,p=d.offset,_=g<p,x=_?g:p,y=_?p:g,N=y-1;x!==N&&(function(S){return!(Mu(S)||Np(S))})(f.getTextContent().slice(x,y))&&(c?d.set(d.key,N,d.type):u.set(u.key,N,u.type))}})(this,t)}}if(this.removeText(),t&&!e&&this.isCollapsed()&&this.anchor.type===\"element\"&&this.anchor.offset===0){let r=this.anchor.getNode();r.isEmpty()&&ge(r.getParent())&&r.getPreviousSibling()===null&&zl(this,r)}}deleteLine(t){this.isCollapsed()&&this.modify(\"extend\",t,\"lineboundary\"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){let e=this.anchor,r=e.getNode();if(this.forwardDeletion(e,r,t))return;this.modify(\"extend\",t,\"word\")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}};function Mo(n){return n instanceof po}function Wl(n){let t=n.offset;if(n.type===\"text\")return t;let e=n.getNode();return t===e.getChildrenSize()?e.getTextContent().length:0}function us(n){let t=n.getStartEndPoints();if(t===null)return[0,0];let[e,r]=t;return e.type===\"element\"&&r.type===\"element\"&&e.key===r.key&&e.offset===r.offset?[0,0]:[Wl(e),Wl(r)]}function zl(n,t){for(let e=t;e;e=e.getParent()){if(v(e)){if(e.collapseAtStart(n))return!0;if(Ye(e))break}if(e.getPreviousSibling())break}return!1}var Np=(()=>{try{let n=new RegExp(\"\\\\p{Emoji}\",\"u\"),t=n.test.bind(n);if(t(\"\\u2764\\uFE0F\")&&t(\"#\\uFE0F\\u20E3\")&&t(\"\\u{1F44D}\"))return t}catch{}return()=>!1})();function Ul(n,t,e){let r=n,o=r.getTextContent().split(/(?=\\s)/g),i=o.length,s=0,a=0;for(let c=0;c<i;c++){let u=c===i-1;if(a=s,s+=o[c].length,t&&s===e||s>e||u){o.splice(c,1),u&&(a=void 0);break}}let l=o.join(\"\").trim();l===\"\"?r.remove():(r.setTextContent(l),r.select(a,a))}function Hl(n,t,e,r){let o,i=t;if(Ce(n)){let s=!1,a=n.childNodes,l=a.length,c=r._blockCursorElement;i===l&&(s=!0,i=l-1);let u=a[i],d=!1;if(u===c)u=a[i+1],d=!0;else if(c!==null){let f=c.parentNode;n===f&&t>Array.prototype.indexOf.call(f.children,c)&&i--}if(o=En(u),$(o))i=Ue(o,s?\"next\":\"previous\");else{let f=En(n);if(f===null)return null;if(v(f)){let h=r.getElementByKey(f.getKey());h===null&&A(214),[f,i]=f.getDOMSlot(h).resolveChildIndex(f,h,n,t),v(f)||A(215),s&&i>=f.getChildrenSize()&&(i=Math.max(0,f.getChildrenSize()-1));let p=f.getChildAtIndex(i);if(v(p)&&(function(_,x,y){let N=_.getParent();return y===null||N===null||!N.canBeEmpty()||N!==y.getNode()})(p,0,e)){let _=s?p.getLastDescendant():p.getFirstDescendant();_===null?f=p:(p=_,f=v(p)?p:p.getParentOrThrow()),i=0}$(p)?(o=p,f=null,i=Ue(p,s?\"next\":\"previous\")):p!==f&&s&&!d&&(v(f)||A(216),i=Math.min(f.getChildrenSize(),i+1))}else{let h=f.getIndexWithinParent();i=t===0&&Z(f)&&En(n)===f?h:h+1,f=f.getParentOrThrow()}if(v(f))return He(f.__key,i,\"element\")}}else o=En(n);return $(o)?He(o.__key,Ue(o,i,\"clamp\"),\"text\"):null}function Yl(n,t,e){let r=n.offset,o=n.getNode();if(r===0){let i=o.getPreviousSibling(),s=o.getParent();if(t){if((e||!t)&&i===null&&v(s)&&s.isInline()){let a=s.getPreviousSibling();$(a)&&n.set(a.__key,a.getTextContent().length,\"text\")}}else v(i)&&!e&&i.isInline()?n.set(i.__key,i.getChildrenSize(),\"element\"):$(i)&&n.set(i.__key,i.getTextContent().length,\"text\")}else if(r===o.getTextContent().length){let i=o.getNextSibling(),s=o.getParent();if(t&&v(i)&&i.isInline())n.set(i.__key,0,\"element\");else if((e||t)&&i===null&&v(s)&&s.isInline()&&!s.canInsertTextAfter()){let a=s.getNextSibling();$(a)&&n.set(a.__key,0,\"text\")}}}function lu(n,t,e){if(n.type===\"text\"&&t.type===\"text\"){let r=n.isBefore(t),o=n.is(t);Yl(n,r,o),Yl(t,!r,o),o&&t.set(n.key,n.offset,n.type);let i=te();if(i.isComposing()&&i._compositionKey!==n.key&&w(e)){let s=e.anchor,a=e.focus;n.set(s.key,s.offset,s.type,!0),t.set(a.key,a.offset,a.type,!0)}}}function cu(n,t,e,r,o,i){if(n===null||e===null||!Er(o,n,e))return null;let s=Hl(n,t,w(i)?i.anchor:null,o);if(s===null)return null;let a=Hl(e,r,w(i)?i.focus:null,o);if(a===null)return null;if(s.type===\"element\"&&a.type===\"element\"){let l=En(n),c=En(e);if(Z(l)&&Z(c))return null}return lu(s,a,i),[s,a]}function Cp(n){return v(n)&&!n.isInline()}function uu(n,t,e,r,o,i){let s=Tt(),a=new tn(He(n,t,o),He(e,r,i),0,\"\");return a.dirty=!0,s._selection=a,a}function du(){let n=He(\"root\",0,\"element\"),t=He(\"root\",0,\"element\");return new tn(n,t,0,\"\")}function bs(){return new po(new Set)}function Sp(n,t){return vo(null,n,t,null)}function vo(n,t,e,r){let o=e._window;if(o===null)return null;let i=r||o.event,s=i?i.type:void 0,a=s===\"selectionchange\",l=!Yi&&(a||s===\"beforeinput\"||s===\"compositionstart\"||s===\"compositionend\"||s===\"click\"&&i&&i.detail===3||s===\"drop\"||s===void 0),c,u,d,f;if(w(n)&&!l)return n.clone();if(t===null)return null;if(c=t.anchorNode,u=t.focusNode,d=t.anchorOffset,f=t.focusOffset,(a||s===void 0)&&w(n)&&!Er(e,c,u))return n.clone();let h=cu(c,d,u,f,e,n);if(h===null)return null;let[g,p]=h;return new tn(g,p,w(n)?n.format:0,w(n)?n.style:\"\")}function Y(){return Tt()._selection}function sn(){return te()._editorState._selection}function _o(n,t,e,r=1){let o=n.anchor,i=n.focus,s=o.getNode(),a=i.getNode();if(!t.is(s)&&!t.is(a))return;let l=t.__key;if(n.isCollapsed()){let c=o.offset;if(e<=c&&r>0||e<c&&r<0){let u=Math.max(0,c+r);o.set(l,u,\"element\"),i.set(l,u,\"element\"),Gl(n)}}else{let c=n.isBackward(),u=c?i:o,d=u.getNode(),f=c?o:i,h=f.getNode();if(t.is(d)){let g=u.offset;(e<=g&&r>0||e<g&&r<0)&&u.set(l,Math.max(0,g+r),\"element\")}if(t.is(h)){let g=f.offset;(e<=g&&r>0||e<g&&r<0)&&f.set(l,Math.max(0,g+r),\"element\")}}Gl(n)}function Gl(n){let t=n.anchor,e=t.offset,r=n.focus,o=r.offset,i=t.getNode(),s=r.getNode();if(n.isCollapsed()){if(!v(i))return;let a=i.getChildrenSize(),l=e>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(e);if($(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,\"text\"),r.set(c.__key,u,\"text\")}return}if(v(i)){let a=i.getChildrenSize(),l=e>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(e);if($(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,\"text\")}}if(v(s)){let a=s.getChildrenSize(),l=o>=a,c=l?s.getChildAtIndex(a-1):s.getChildAtIndex(o);if($(c)){let u=0;l&&(u=c.getTextContentSize()),r.set(c.__key,u,\"text\")}}}function mo(n,t,e,r,o){let i=null,s=0,a=null;r!==null?(i=r.__key,$(r)?(s=r.getTextContentSize(),a=\"text\"):v(r)&&(s=r.getChildrenSize(),a=\"element\")):o!==null&&(i=o.__key,$(o)?a=\"text\":v(o)&&(a=\"element\")),i!==null&&a!==null?n.set(i,s,a):(s=t.getIndexWithinParent(),s===-1&&(s=e.getChildrenSize()),n.set(e.__key,s,\"element\"))}function Jl(n,t,e,r,o){n.type===\"text\"?n.set(e,n.offset+(t?0:o),\"text\"):n.offset>r.getIndexWithinParent()&&n.set(n.key,n.offset-1,\"element\")}function fu(n,t,e,r,o){try{n.setBaseAndExtent(t,e,r,o)}catch{}}function Ep(n,t,e,r,o,i,s){let a=r.anchorNode,l=r.focusNode,c=r.anchorOffset,u=r.focusOffset,d=document.activeElement;if(o.has(nu)&&d!==i||d!==null&&ws(d))return;if(!w(t))return void(n!==null&&Er(e,a,l)&&r.removeAllRanges());let f=t.anchor,h=t.focus,g=f.key,p=h.key,_=rn(e,g),x=rn(e,p),y=f.offset,N=h.offset,S=t.format,M=t.style,E=t.isCollapsed(),T=_,D=x,O=!1;if(f.type===\"text\"){T=nn(_);let ee=f.getNode();O=ee.getFormat()!==S||ee.getStyle()!==M}else w(n)&&n.anchor.type===\"text\"&&(O=!0);var R,P,q,H,G;if(h.type===\"text\"&&(D=nn(x)),T!==null&&D!==null&&(E&&(n===null||O||w(n)&&(n.format!==S||n.style!==M))&&(R=S,P=M,q=y,H=g,G=performance.now(),Vc=[R,P,q,H,G]),c!==y||u!==N||a!==T||l!==D||r.type===\"Range\"&&E||(d!==null&&i.contains(d)||o.has(iu)||i.focus({preventScroll:!0}),f.type===\"element\"))){if(fu(r,T,y,D,N),!o.has(ru)&&t.isCollapsed()&&i!==null&&i===document.activeElement){let ee=w(t)&&t.anchor.type===\"element\"?T.childNodes[y]||null:r.rangeCount>0?r.getRangeAt(0):null;if(ee!==null){let ie;if(ee instanceof Text){let Ae=document.createRange();Ae.selectNode(ee),ie=Ae.getBoundingClientRect()}else ie=ee.getBoundingClientRect();(function(Ae,Nn,ft){let tr=Us(ft),ml=Hs(tr);if(tr===null||ml===null)return;let{top:bi,bottom:Ri}=Nn,Jr=0,jr=0,Dt=ft;for(;Dt!==null;){let ki=Dt===tr.body;if(ki)Jr=0,jr=$e(Ae).innerHeight;else{let Vr=Dt.getBoundingClientRect();Jr=Vr.top,jr=Vr.bottom}let nr=0;if(bi<Jr?nr=-(Jr-bi):Ri>jr&&(nr=Ri-jr),nr!==0)if(ki)ml.scrollBy(0,nr);else{let Vr=Dt.scrollTop;Dt.scrollTop+=nr;let yl=Dt.scrollTop-Vr;bi-=yl,Ri-=yl}if(ki)break;Dt=Or(Dt)}})(e,ie,i)}}ss=!0}}function Tp(n){let t=Y()||sn();t===null&&(t=ke().selectEnd()),t.insertNodes(n)}function Op(){let n=Y();return n===null?\"\":n.getTextContent()}function Bi(n){let t=n;n.isCollapsed()||t.removeText();let e=Y();w(e)&&(t=e),w(t)||A(161);let r=t.anchor,o=r.getNode(),i=r.offset;for(;!xt(o);){let s=o;if([o,i]=Mp(o,i),s.is(o))break}return i}function Mp(n,t){let e=n.getParent();if(!e){let o=Nt();return ke().append(o),o.select(),[ke(),0]}if($(n)){let o=n.splitText(t);if(o.length===0)return[e,n.getIndexWithinParent()];let i=t===0?0:1;return[e,o[0].getIndexWithinParent()+i]}if(!v(n)||t===0)return[e,n.getIndexWithinParent()];let r=n.getChildAtIndex(t);if(r){let o=new tn(He(n.__key,t,\"element\"),He(n.__key,t,\"element\"),0,\"\"),i=n.insertNewAfter(o);i&&i.append(r,...r.getNextSiblings())}return[e,n.getIndexWithinParent()+1]}function jl(n,t,e,r,o=\"decorators-and-blocks\"){if(t===\"move\"&&r===\"character\"&&!n.isCollapsed()){let[u,d]=e===n.isBackward()?[n.focus,n.anchor]:[n.anchor,n.focus];return d.set(u.key,u.offset,u.type),!0}let i=Pt(n.focus,e?\"previous\":\"next\"),s=r===\"lineboundary\",a=t===\"move\",l=i,c=o===\"decorators-and-blocks\";if(!Yu(l)){for(let u of l){c=!1;let{origin:d}=u;if(!Z(d)||d.isIsolated()||(l=u,!s||!d.isInline()))break}if(c)for(let u of Vs(i).iterNodeCarets(t===\"extend\"?\"shadowRoot\":\"root\")){if(ze(u))u.origin.isInline()||(l=u);else{if(v(u.origin))continue;Z(u.origin)&&!u.origin.isInline()&&(l=u)}break}}if(l===i)return!1;if(a&&!s&&Z(l.origin)&&l.origin.isKeyboardSelectable()){let u=bs();return u.add(l.origin.getKey()),ve(u),!0}return l=Be(l),a&&Pn(n.anchor,l),Pn(n.focus,l),c||!s}var de=null,fe=null,Me=!1,Wi=!1,ro=0,Vl={characterData:!0,childList:!0,subtree:!0};function Fn(){return Me||de!==null&&de._readOnly}function ce(){Me&&A(13)}function gu(){ro>99&&A(14)}function Tt(){return de===null&&A(195,hu()),de}function te(){return fe===null&&A(196,hu()),fe}function hu(){let n=0,t=new Set,e=Ct.version;if(typeof window<\"u\")for(let o of document.querySelectorAll(\"[contenteditable]\")){let i=Tr(o);if(Ao(i))n++;else if(i){let s=String(i.constructor.version||\"<0.17.1\");s===e&&(s+=\" (separately built, likely a bundler configuration issue)\"),t.add(s)}}let r=` Detected on the page: ${n} compatible editor(s) with version ${e}`;return t.size&&(r+=` and incompatible editors with versions ${Array.from(t).join(\", \")}`),r}function vp(){return fe}function Xl(n,t,e){let r=t.__type,o=$s(n,r),i=e.get(r);i===void 0&&(i=Array.from(o.transforms),e.set(r,i));let s=i.length;for(let a=0;a<s&&(i[a](t),t.isAttached());a++);}function ql(n,t){return n!==void 0&&n.__key!==t&&n.isAttached()}function pu(n,t){if(!t)return;let e=n._updateTags,r=t;Array.isArray(t)||(r=[t]);for(let o of r)e.add(o)}function Dp(n){return Rs(n,te()._nodes)}function Rs(n,t){let e=n.type,r=t.get(e);r===void 0&&A(17,e);let o=r.klass;n.type!==o.getType()&&A(18,o.name);let i=o.importJSON(n),s=n.children;if(v(i)&&Array.isArray(s))for(let a=0;a<s.length;a++){let l=Rs(s[a],t);i.append(l)}return i}function Zl(n,t,e){let r=de,o=Me,i=fe;de=t,Me=!0,fe=n;try{return e()}finally{de=r,Me=o,fe=i}}function yt(n,t){let e=n._pendingEditorState,r=n._rootElement,o=n._headless||r===null;if(e===null)return;let i=n._editorState,s=i._selection,a=e._selection,l=n._dirtyType!==0,c=de,u=Me,d=fe,f=n._updating,h=n._observer,g=null;if(n._pendingEditorState=null,n._editorState=e,!o&&l&&h!==null){fe=n,de=e,Me=!1,n._updating=!0;try{let E=n._dirtyType,T=n._dirtyElements,D=n._dirtyLeaves;h.disconnect(),g=Zh(i,e,n,E,T,D)}catch(E){if(E instanceof Error&&n._onError(E),Wi)throw E;return xu(n,null,r,e),Nc(n),n._dirtyType=2,Wi=!0,yt(n,i),void(Wi=!1)}finally{h.observe(r,Vl),n._updating=f,de=c,Me=u,fe=d}}e._readOnly||(e._readOnly=!0);let p=n._dirtyLeaves,_=n._dirtyElements,x=n._normalizedNodes,y=n._updateTags,N=n._deferred;l&&(n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),(function(E,T){let D=E._decorators,O=E._pendingDecorators||D,R=T._nodeMap,P;for(P in O)R.has(P)||(O===D&&(O=Tu(E)),delete O[P])})(n,e);let S=o?null:et($e(n));if(n._editable&&S!==null&&(l||a===null||a.dirty||!a.is(s))&&r!==null&&!y.has(ou)){fe=n,de=e;try{if(h!==null&&h.disconnect(),l||a===null||a.dirty){let E=n._blockCursorElement;E!==null&&gs(E,n,r),Ep(s,a,n,S,y,r)}(function(E,T,D){let O=E._blockCursorElement;if(w(D)&&D.isCollapsed()&&D.anchor.type===\"element\"&&T.contains(document.activeElement)){let R=D.anchor,P=R.getNode(),q=R.offset,H=!1,G=null;if(q===P.getChildrenSize())Ui(P.getChildAtIndex(q-1))&&(H=!0);else{let ee=P.getChildAtIndex(q);if(ee!==null&&Ui(ee)){let ie=ee.getPreviousSibling();(ie===null||Ui(ie))&&(H=!0,G=E.getElementByKey(ee.__key))}}if(H){let ee=E.getElementByKey(P.__key);return O===null&&(E._blockCursorElement=O=(function(ie){let Ae=ie.theme,Nn=document.createElement(\"div\");Nn.contentEditable=\"false\",Nn.setAttribute(\"data-lexical-cursor\",\"true\");let ft=Ae.blockCursor;if(ft!==void 0){if(typeof ft==\"string\"){let tr=hc(ft);ft=Ae.blockCursor=tr}ft!==void 0&&Nn.classList.add(...ft)}return Nn})(E._config)),T.style.caretColor=\"transparent\",void(G===null?ee.appendChild(O):ee.insertBefore(O,G))}}O!==null&&gs(O,E,T)})(n,r,a)}finally{h!==null&&h.observe(r,Vl),fe=d,de=c}}g!==null&&(function(E,T,D,O,R){let P=Array.from(E._listeners.mutation),q=P.length;for(let H=0;H<q;H++){let[G,ee]=P[H];for(let ie of ee){let Ae=T.get(ie);Ae!==void 0&&G(Ae,{dirtyLeaves:O,prevEditorState:R,updateTags:D})}}})(n,g,y,p,i),w(a)||a===null||s!==null&&s.is(a)||n.dispatchCommand(Ss,void 0);let M=n._pendingDecorators;M!==null&&(n._decorators=M,n._pendingDecorators=null,cr(\"decorator\",n,!0,M)),(function(E,T,D){let O=rc(T),R=rc(D);O!==R&&cr(\"textcontent\",E,!0,R)})(n,t||i,e),cr(\"update\",n,!0,{dirtyElements:_,dirtyLeaves:p,editorState:e,mutatedNodes:g,normalizedNodes:x,prevEditorState:t||i,tags:y}),(function(E,T){if(E._deferred=[],T.length!==0){let D=E._updating;E._updating=!0;try{for(let O=0;O<T.length;O++)T[O]()}finally{E._updating=D}}})(n,N),(function(E){let T=E._updates;if(T.length!==0){let D=T.shift();if(D){let[O,R]=D;Do(E,O,R)}}})(n)}function cr(n,t,e,...r){let o=t._updating;t._updating=e;try{let i=Array.from(t._listeners[n]);for(let s=0;s<i.length;s++)i[s].apply(null,r)}finally{t._updating=o}}function Ql(n,t){let e=n._updates,r=t||!1;for(;e.length!==0;){let o=e.shift();if(o){let[i,s]=o,a=n._pendingEditorState,l;s!==void 0&&(l=s.onUpdate,s.skipTransforms&&(r=!0),s.discrete&&(a===null&&A(191),a._flushSync=!0),l&&n._deferred.push(l),pu(n,s.tag)),a==null?Do(n,i,s):i()}}return r}function Do(n,t,e){let r=n._updateTags,o,i=!1,s=!1;e!==void 0&&(o=e.onUpdate,pu(n,e.tag),i=e.skipTransforms||!1,s=e.discrete||!1),o&&n._deferred.push(o);let a=n._editorState,l=n._pendingEditorState,c=!1;(l===null||l._readOnly)&&(l=n._pendingEditorState=_u(l||a),c=!0),l._flushSync=s;let u=de,d=Me,f=fe,h=n._updating;de=l,Me=!1,n._updating=!0,fe=n;let g=n._headless||n.getRootElement()===null;Is(null);try{c&&(g?a._selection!==null&&(l._selection=a._selection.clone()):l._selection=(function(y,N){let S=y.getEditorState()._selection,M=et($e(y));return w(S)||S==null?vo(S,M,y,N):S.clone()})(n,e&&e.event||null));let _=n._compositionKey;t(),i=Ql(n,i),(function(y,N){let S=N.getEditorState()._selection,M=y._selection;if(w(M)){let E=M.anchor,T=M.focus,D;if(E.type===\"text\"&&(D=E.getNode(),D.selectionTransform(S,M)),T.type===\"text\"){let O=T.getNode();D!==O&&O.selectionTransform(S,M)}}})(l,n),n._dirtyType!==0&&(i?(function(y,N){let S=N._dirtyLeaves,M=y._nodeMap;for(let E of S){let T=M.get(E);$(T)&&T.isAttached()&&T.isSimpleText()&&!T.isUnmergeable()&&Al(T)}})(l,n):(function(y,N){let S=N._dirtyLeaves,M=N._dirtyElements,E=y._nodeMap,T=bt(),D=new Map,O=S,R=O.size,P=M,q=P.size;for(;R>0||q>0;){if(R>0){N._dirtyLeaves=new Set;for(let H of O){let G=E.get(H);$(G)&&G.isAttached()&&G.isSimpleText()&&!G.isUnmergeable()&&Al(G),G!==void 0&&ql(G,T)&&Xl(N,G,D),S.add(H)}if(O=N._dirtyLeaves,R=O.size,R>0){ro++;continue}}N._dirtyLeaves=new Set,N._dirtyElements=new Map,P.delete(\"root\")&&P.set(\"root\",!0);for(let H of P){let G=H[0],ee=H[1];if(M.set(G,ee),!ee)continue;let ie=E.get(G);ie!==void 0&&ql(ie,T)&&Xl(N,ie,D)}O=N._dirtyLeaves,R=O.size,P=N._dirtyElements,q=P.size,ro++}N._dirtyLeaves=S,N._dirtyElements=M})(l,n),Ql(n),(function(y,N,S,M){let E=y._nodeMap,T=N._nodeMap,D=[];for(let[O]of M){let R=T.get(O);R!==void 0&&(R.isAttached()||(v(R)&&mc(R,O,E,T,D,M),E.has(O)||M.delete(O),D.push(O)))}for(let O of D)T.delete(O);for(let O of S){let R=T.get(O);R===void 0||R.isAttached()||(E.has(O)||S.delete(O),T.delete(O))}})(a,l,n._dirtyLeaves,n._dirtyElements)),_!==n._compositionKey&&(l._flushSync=!0);let x=l._selection;if(w(x)){let y=l._nodeMap,N=x.anchor.key,S=x.focus.key;y.get(N)!==void 0&&y.get(S)!==void 0||A(19)}else Mo(x)&&x._nodes.size===0&&(l._selection=null)}catch(_){return _ instanceof Error&&n._onError(_),n._pendingEditorState=a,n._dirtyType=2,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void yt(n)}finally{de=u,Me=d,fe=f,n._updating=h,ro=0}n._dirtyType!==0||n._deferred.length>0||(function(_,x){let y=x.getEditorState()._selection,N=_._selection;if(N!==null){if(N.dirty||!N.is(y))return!0}else if(y!==null)return!0;return!1})(l,n)?l._flushSync?(l._flushSync=!1,yt(n)):c&&Fp(()=>{yt(n)}):(l._flushSync=!1,c&&(r.clear(),n._deferred=[],n._pendingEditorState=null))}function be(n,t,e){fe===n&&e===void 0?t():Do(n,t,e)}var ds=class n{constructor(t,e,r){C(this,\"element\");C(this,\"before\");C(this,\"after\");this.element=t,this.before=e||null,this.after=r||null}withBefore(t){return new n(this.element,t,this.after)}withAfter(t){return new n(this.element,this.before,t)}withElement(t){return this.element===t?this:new n(t,this.before,this.after)}insertChild(t){let e=this.before||this.getManagedLineBreak();return e!==null&&e.parentElement!==this.element&&A(222),this.element.insertBefore(t,e),this}removeChild(t){return t.parentElement!==this.element&&A(223),this.element.removeChild(t),this}replaceChild(t,e){return e.parentElement!==this.element&&A(224),this.element.replaceChild(t,e),this}getFirstChild(){let t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{let e=t===\"decorator\"&&(hr||vn||gr);this.insertManagedLineBreak(e)}}removeManagedLineBreak(){let t=this.getManagedLineBreak();if(t){let e=this.element,r=t.nodeName===\"IMG\"?t.nextSibling:null;r&&e.removeChild(r),e.removeChild(t),e.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){let e=this.getManagedLineBreak();if(e){if(t===(e.nodeName===\"IMG\"))return;this.removeManagedLineBreak()}let r=this.element,o=this.before,i=document.createElement(\"br\");if(r.insertBefore(i,o),t){let s=document.createElement(\"img\");s.setAttribute(\"data-lexical-linebreak\",\"true\"),s.style.cssText=\"display: inline !important; border: 0px !important; margin: 0px !important;\",s.alt=\"\",r.insertBefore(s,i),r.__lexicalLineBreak=s}else r.__lexicalLineBreak=i}getFirstChildOffset(){let t=0;for(let e=this.after;e!==null;e=e.previousSibling)t++;return t}resolveChildIndex(t,e,r,o){if(r===this.element){let l=this.getFirstChildOffset();return[t,Math.min(l+t.getChildrenSize(),Math.max(l,o))]}let i=ec(e,r);i.push(o);let s=ec(e,this.element),a=t.getIndexWithinParent();for(let l=0;l<s.length;l++){let c=i[l],u=s[l];if(c===void 0||c<u)break;if(c>u){a+=1;break}}return[t.getParentOrThrow(),a]}};function ec(n,t){let e=[],r=t;for(;r!==n&&r!==null;r=r.parentNode){let o=0;for(let i=r.previousSibling;i!==null;i=i.previousSibling)o++;e.push(o)}return r!==n&&A(225),e.reverse()}var $t=class extends Re{constructor(e){super(e);C(this,\"__first\");C(this,\"__last\");C(this,\"__size\");C(this,\"__format\");C(this,\"__style\");C(this,\"__indent\");C(this,\"__dir\");C(this,\"__textFormat\");C(this,\"__textStyle\");this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style=\"\",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=\"\"}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){let e=this.getFormat();return Fh[e]||\"\"}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],r=this.getFirstChild();for(;r!==null;)e.push(r),r=r.getNextSibling();return e}getChildrenKeys(){let e=[],r=this.getFirstChild();for(;r!==null;)e.push(r.__key),r=r.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){let e=te()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(e)}getAllTextNodes(){let e=[],r=this.getFirstChild();for(;r!==null;){if($(r)&&e.push(r),v(r)){let o=r.getAllTextNodes();e.push(...o)}r=r.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;v(e);){let r=e.getFirstChild();if(r===null)break;e=r}return e}getLastDescendant(){let e=this.getLastChild();for(;v(e);){let r=e.getLastChild();if(r===null)break;e=r}return e}getDescendantByIndex(e){let r=this.getChildren(),o=r.length;if(e>=o){let s=r[o-1];return v(s)&&s.getLastDescendant()||s||null}let i=r[e];return v(i)&&i.getFirstDescendant()||i||null}getFirstChild(){let e=this.getLatest().__first;return e===null?null:ae(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return e===null&&A(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return e===null?null:ae(e)}getLastChildOrThrow(){let e=this.getLastChild();return e===null&&A(96,this.__key),e}getChildAtIndex(e){let r=this.getChildrenSize(),o,i;if(e<r/2){for(o=this.getFirstChild(),i=0;o!==null&&i<=e;){if(i===e)return o;o=o.getNextSibling(),i++}return null}for(o=this.getLastChild(),i=r-1;o!==null&&i>=e;){if(i===e)return o;o=o.getPreviousSibling(),i--}return null}getTextContent(){let e=\"\",r=this.getChildren(),o=r.length;for(let i=0;i<o;i++){let s=r[i];e+=s.getTextContent(),v(s)&&i!==o-1&&!s.isInline()&&(e+=It)}return e}getTextContentSize(){let e=0,r=this.getChildren(),o=r.length;for(let i=0;i<o;i++){let s=r[i];e+=s.getTextContentSize(),v(s)&&i!==o-1&&!s.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==\"\"){let r=Cl[e];return(this.getFormat()&r)!==0}return!1}hasTextFormat(e){let r=xe[e];return(this.getTextFormat()&r)!==0}getFormatFlags(e,r){return xo(this.getLatest().__textFormat,e,r)}getTextStyle(){return this.getLatest().__textStyle}select(e,r){ce();let o=Y(),i=e,s=r,a=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&r===0){let c=this.getFirstChild();if($(c)||v(c))return c.select(0,0)}else if(!(e!==void 0&&e!==a||r!==void 0&&r!==a)){let c=this.getLastChild();if($(c)||v(c))return c.select()}}i===void 0&&(i=a),s===void 0&&(s=a);let l=this.__key;return w(o)?(o.anchor.set(l,i,\"element\"),o.focus.set(l,s,\"element\"),o.dirty=!0,o):uu(l,i,l,s,\"element\",\"element\")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(r=>r.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let r=this.getWritable();return r.__dir=e,r}setFormat(e){return this.getWritable().__format=e!==\"\"?Cl[e]:0,this}setStyle(e){return this.getWritable().__style=e||\"\",this}setTextFormat(e){let r=this.getWritable();return r.__textFormat=e,r}setTextStyle(e){let r=this.getWritable();return r.__textStyle=e,r}setIndent(e){return this.getWritable().__indent=e,this}splice(e,r,o){ho(this)&&A(324,this.__key,this.__type);let i=this.getChildrenSize(),s=this.getWritable();e+r<=i||A(226,String(e),String(r),String(i));let a=s.__key,l=[],c=[],u=this.getChildAtIndex(e+r),d=null,f=i-r+o.length;if(e!==0)if(e===i)d=this.getLastChild();else{let g=this.getChildAtIndex(e);g!==null&&(d=g.getPreviousSibling())}if(r>0){let g=d===null?this.getFirstChild():d.getNextSibling();for(let p=0;p<r;p++){g===null&&A(100);let _=g.getNextSibling(),x=g.__key;kt(g.getWritable()),c.push(x),g=_}}let h=d;for(let g of o){h!==null&&g.is(h)&&(d=h=h.getPreviousSibling());let p=g.getWritable();p.__parent===a&&f--,kt(p);let _=g.__key;if(h===null)s.__first=_,p.__prev=null;else{let x=h.getWritable();x.__next=_,p.__prev=x.__key}g.__key===a&&A(76),p.__parent=a,l.push(_),h=g}if(e+r===i)h!==null&&(h.getWritable().__next=null,s.__last=h.__key);else if(u!==null){let g=u.getWritable();if(h!==null){let p=h.getWritable();g.__prev=h.__key,p.__next=u.__key}else g.__prev=null}if(s.__size=f,c.length){let g=Y();if(w(g)){let p=new Set(c),_=new Set(l),{anchor:x,focus:y}=g;tc(x,p,_)&&mo(x,x.getNode(),this,d,u),tc(y,p,_)&&mo(y,y.getNode(),this,d,u),f!==0||this.canBeEmpty()||Ye(this)||this.remove()}}return s}getDOMSlot(e){return new ds(e)}exportDOM(e){let{element:r}=super.exportDOM(e);if(Ce(r)){let o=this.getIndent();o>0&&(r.style.paddingInlineStart=40*o+\"px\");let i=this.getDirection();i&&(r.dir=i)}return{element:r}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),o=this.getTextStyle();return r!==0&&(e.textFormat=r),o!==\"\"&&(e.textStyle=o),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||\"\")}insertNewAfter(e,r){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,r,o){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,r){let o=this.getDOMSlot(e),i=o.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){let a=r.getElementByKey(s.getKey());a!==null&&(i==null?(o.insertChild(a),i=a):i!==a&&o.replaceChild(a,i),i=i.nextSibling)}}};function v(n){return n instanceof $t}function tc(n,t,e){let r=n.getNode();for(;r;){let o=r.__key;if(t.has(o)&&!e.has(o))return!0;r=r.getParent()}return!1}var Nr=class extends Re{decorate(t,e){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function Z(n){return n instanceof Nr}var Rn=class n extends $t{constructor(){super(\"root\");C(this,\"__cachedText\");this.__cachedText=null}static getType(){return\"root\"}static clone(){return new n}getTopLevelElementOrThrow(){A(51)}getTextContent(){let e=this.__cachedText;return!Fn()&&te()._dirtyType!==0||e===null?super.getTextContent():e}remove(){A(52)}replace(e){A(53)}insertBefore(e){A(54)}insertAfter(e){A(55)}updateDOM(e,r){return!1}splice(e,r,o){for(let i of o)v(i)||Z(i)||A(282);return super.splice(e,r,o)}static importJSON(e){return ke().updateFromJSON(e)}collapseAtStart(){return!0}};function ge(n){return n instanceof Rn}function _u(n){return new Cr(new Map(n._nodeMap))}function ks(){return new Cr(new Map([[\"root\",new Rn]]))}function mu(n){let t=n.exportJSON(),e=n.constructor;if(t.type!==e.getType()&&A(130,e.name),v(n)){let r=t.children;Array.isArray(r)||A(59,e.name);let o=n.getChildren();for(let i=0;i<o.length;i++){let s=mu(o[i]);r.push(s)}}return t}function Ap(n){return n instanceof Cr}var Cr=class n{constructor(t,e){C(this,\"_nodeMap\");C(this,\"_selection\");C(this,\"_flushSync\");C(this,\"_readOnly\");this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,e){return Zl(e&&e.editor||null,this,t)}clone(t){let e=new n(this._nodeMap,t===void 0?this._selection:t);return e._readOnly=!0,e}toJSON(){return Zl(null,this,()=>({root:mu(ke())}))}},yo=class extends $t{static getType(){return\"artificial\"}createDOM(t){return document.createElement(\"div\")}},kn=class n extends $t{static getType(){return\"paragraph\"}static clone(t){return new n(t.__key)}createDOM(t){let e=document.createElement(\"p\"),r=Mn(t.theme,\"paragraph\");return r!==void 0&&e.classList.add(...r),e}updateDOM(t,e,r){return!1}static importDOM(){return{p:t=>({conversion:bp,priority:0})}}exportDOM(t){let{element:e}=super.exportDOM(t);if(Ce(e)){this.isEmpty()&&e.append(document.createElement(\"br\"));let r=this.getFormatType();r&&(e.style.textAlign=r)}return{element:e}}static importJSON(t){return Nt().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,e){let r=Nt();r.setTextFormat(t.format),r.setTextStyle(t.style);let o=this.getDirection();return r.setDirection(o),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,e),r}collapseAtStart(){let t=this.getChildren();if(t.length===0||$(t[0])&&t[0].getTextContent().trim()===\"\"){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}};function bp(n){let t=Nt();return n.style&&(t.setFormat(n.style.textAlign),Ku(n,t)),{node:t}}function Nt(){return Mr(new kn)}function yu(n){return n instanceof kn}var Rp=0,kp=1,Ip=2,$p=3,Lp=4;function xu(n,t,e,r){let o=n._keyToDOMMap;o.clear(),n._editorState=ks(),n._pendingEditorState=r,n._compositionKey=null,n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;let i=n._observer;i!==null&&(i.disconnect(),n._observer=null),t!==null&&(t.textContent=\"\"),e!==null&&(e.textContent=\"\",o.set(\"root\",e))}function Nu(n){let t=new Set,e=new Set,r=n;for(;r;){let{ownNodeConfig:o}=vr(r),i=r.transform;if(!e.has(i)){e.add(i);let s=r.transform();s&&t.add(s)}if(o){let s=o.$transform;s&&t.add(s),r=o.extends}else{let s=Object.getPrototypeOf(r);r=s.prototype instanceof Re&&s!==Re?s:void 0}}return t}function wp(n){let t=n||{},e=vp(),r=t.theme||{},o=n===void 0?e:t.parentEditor||null,i=t.disableEvents||!1,s=ks(),a=t.namespace||(o!==null?o._config.namespace:vu()),l=t.editorState,c=[Rn,en,Dn,bn,kn,yo,...t.nodes||[]],{onError:u,html:d}=t,f=t.editable===void 0||t.editable,h;if(n===void 0&&e!==null)h=e._nodes;else{h=new Map;for(let p=0;p<c.length;p++){let _=c[p],x=null,y=null;if(typeof _!=\"function\"){let M=_;_=M.replace,x=M.with,y=M.withKlass||null}vr(_);let N=_.getType(),S=Nu(_);h.set(N,{exportDOM:d&&d.export?d.export.get(_):void 0,klass:_,replace:x,replaceWithKlass:y,sharedNodeState:Cc(c[p]),transforms:S})}}let g=new Ct(s,o,h,{disableEvents:i,namespace:a,theme:r},u||console.error,(function(p,_){let x=new Map,y=new Set,N=S=>{Object.keys(S).forEach(M=>{let E=x.get(M);E===void 0&&(E=[],x.set(M,E)),E.push(S[M])})};return p.forEach(S=>{let M=S.klass.importDOM;if(M==null||y.has(M))return;y.add(M);let E=M.call(S.klass);E!==null&&N(E)}),_&&N(_),x})(h,d?d.import:void 0),f,n);return l!==void 0&&(g._pendingEditorState=l,g._dirtyType=2),g}var Ct=class{constructor(t,e,r,o,i,s,a,l){C(this,\"_headless\");C(this,\"_parentEditor\");C(this,\"_rootElement\");C(this,\"_editorState\");C(this,\"_pendingEditorState\");C(this,\"_compositionKey\");C(this,\"_deferred\");C(this,\"_keyToDOMMap\");C(this,\"_updates\");C(this,\"_updating\");C(this,\"_listeners\");C(this,\"_commands\");C(this,\"_nodes\");C(this,\"_decorators\");C(this,\"_pendingDecorators\");C(this,\"_config\");C(this,\"_dirtyType\");C(this,\"_cloneNotNeeded\");C(this,\"_dirtyLeaves\");C(this,\"_dirtyElements\");C(this,\"_normalizedNodes\");C(this,\"_updateTags\");C(this,\"_observer\");C(this,\"_key\");C(this,\"_onError\");C(this,\"_htmlConversions\");C(this,\"_window\");C(this,\"_editable\");C(this,\"_blockCursorElement\");C(this,\"_createEditorArgs\");this._createEditorArgs=l,this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=o,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=vu(),this._onError=i,this._htmlConversions=s,this._editable=a,this._headless=e!==null&&e._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){let e=this._listeners.update;return e.add(t),()=>{e.delete(t)}}registerEditableListener(t){let e=this._listeners.editable;return e.add(t),()=>{e.delete(t)}}registerDecoratorListener(t){let e=this._listeners.decorator;return e.add(t),()=>{e.delete(t)}}registerTextContentListener(t){let e=this._listeners.textcontent;return e.add(t),()=>{e.delete(t)}}registerRootListener(t){let e=this._listeners.root;return t(this._rootElement,null),e.add(t),()=>{t(null,this._rootElement),e.delete(t)}}registerCommand(t,e,r){r===void 0&&A(35);let o=this._commands;o.has(t)||o.set(t,[new Set,new Set,new Set,new Set,new Set]);let i=o.get(t);i===void 0&&A(36,String(t));let s=i[r];return s.add(e),()=>{s.delete(e),i.every(a=>a.size===0)&&o.delete(t)}}registerMutationListener(t,e,r){let o=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,i=this._listeners.mutation,s=i.get(e);s===void 0&&(s=new Set,i.set(e,s)),s.add(o);let a=r&&r.skipInitialization;return a!==void 0&&a||this.initializeMutationListener(e,o),()=>{s.delete(o),s.size===0&&i.delete(e)}}getRegisteredNode(t){let e=this._nodes.get(t.getType());return e===void 0&&A(37,t.name),e}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,e){let r=this._editorState,o=ps(r).get(e.getType());if(!o)return;let i=new Map;for(let s of o.keys())i.set(s,\"created\");i.size>0&&t(i,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set([\"registerMutationListener\"])})}registerNodeTransformToKlass(t,e){let r=this.getRegisteredNode(t);return r.transforms.add(e),r}registerNodeTransform(t,e){let r=this.registerNodeTransformToKlass(t,e),o=[r],i=r.replaceWithKlass;if(i!=null){let s=this.registerNodeTransformToKlass(i,e);o.push(s)}return(function(s,a){let l=ps(s.getEditorState()),c=[];for(let u of a){let d=l.get(u);d&&c.push(d)}c.length!==0&&s.update(()=>{for(let u of c)for(let d of u.keys()){let f=ae(d);f&&f.markDirty()}},s._pendingEditorState===null?{tag:no}:void 0)})(this,o.map(s=>s.klass.getType())),()=>{o.forEach(s=>s.transforms.delete(e))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,e){return k(this,t,e)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){let e=this._rootElement;if(t!==e){let r=Mn(this._config.theme,\"root\"),o=this._pendingEditorState||this._editorState;if(this._rootElement=t,xu(this,e,t,o),e!==null&&(this._config.disableEvents||lp(e),r!=null&&e.classList.remove(...r)),t!==null){let i=Hs(t),s=t.style;s.userSelect=\"text\",s.whiteSpace=\"pre-wrap\",s.wordBreak=\"break-word\",t.setAttribute(\"data-lexical-editor\",\"true\"),this._window=i,this._dirtyType=2,Nc(this),this._updateTags.add(no),yt(this),this._config.disableEvents||(function(a,l){let c=a.ownerDocument;is.set(a,c);let u=go.get(c)??0;u<1&&c.addEventListener(\"selectionchange\",eu),go.set(c,u+1),a.__lexicalEditor=l;let d=Qc(a);for(let f=0;f<os.length;f++){let[h,g]=os[f],p=typeof g==\"function\"?_=>{Ll(_)||($l(_),(l.isEditable()||h===\"click\")&&g(_,l))}:_=>{if(Ll(_))return;$l(_);let x=l.isEditable();switch(h){case\"cut\":return x&&k(l,vs,_);case\"copy\":return k(l,Ms,_);case\"paste\":return x&&k(l,Es,_);case\"dragstart\":return x&&k(l,Wc,_);case\"dragover\":return x&&k(l,zc,_);case\"dragend\":return x&&k(l,Uc,_);case\"focus\":return x&&k(l,Hc,_);case\"blur\":return x&&k(l,Yc,_);case\"drop\":return x&&k(l,Bc,_)}};a.addEventListener(h,p),d.push(()=>{a.removeEventListener(h,p)})}})(t,this),r!=null&&t.classList.add(...r)}else this._window=null,this._updateTags.add(no),yt(this);cr(\"root\",this,!1,t,e)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,e){t.isEmpty()&&A(38);let r=t;r._readOnly&&(r=_u(t),r._selection=t._selection?t._selection.clone():null),xc(this);let o=this._pendingEditorState,i=this._updateTags,s=e!==void 0?e.tag:null;o===null||o.isEmpty()||(s!=null&&i.add(s),yt(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set(\"root\",!1),this._compositionKey=null,s!=null&&i.add(s),this._updating||yt(this)}parseEditorState(t,e){return(function(r,o,i){let s=ks(),a=de,l=Me,c=fe,u=o._dirtyElements,d=o._dirtyLeaves,f=o._cloneNotNeeded,h=o._dirtyType;o._dirtyElements=new Map,o._dirtyLeaves=new Set,o._cloneNotNeeded=new Set,o._dirtyType=0,de=s,Me=!1,fe=o,Is(null);try{let g=o._nodes;Rs(r.root,g),i&&i(),s._readOnly=!0}catch(g){g instanceof Error&&o._onError(g)}finally{o._dirtyElements=u,o._dirtyLeaves=d,o._cloneNotNeeded=f,o._dirtyType=h,de=a,Me=l,fe=c}return s})(typeof t==\"string\"?JSON.parse(t):t,this,e)}read(t){return yt(this),this.getEditorState().read(t,{editor:this})}update(t,e){(function(r,o,i){r._updating?r._updates.push([o,i]):Do(r,o,i)})(this,t,e)}focus(t,e={}){let r=this._rootElement;r!==null&&(r.setAttribute(\"autocapitalize\",\"off\"),be(this,()=>{let o=Y(),i=ke();o!==null?o.dirty||ve(o.clone()):i.getChildrenSize()!==0&&(e.defaultSelection===\"rootStart\"?i.selectStart():i.selectEnd()),ku(\"focus\"),Iu(()=>{r.removeAttribute(\"autocapitalize\"),t&&t()})}),this._pendingEditorState===null&&r.removeAttribute(\"autocapitalize\"))}blur(){let t=this._rootElement;t!==null&&t.blur();let e=et(this._window);e!==null&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,cr(\"editable\",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}};C(Ct,\"version\");Ct.version=\"0.38.2+prod.esm\";var fs=null;function Is(n){fs=n}var Cu=1;function Pp(){Cu=1}function $s(n,t){let e=Ls(n,t);return e===void 0&&A(30,t),e}function Ls(n,t){return n._nodes.get(t)}var Fp=typeof queueMicrotask==\"function\"?queueMicrotask:n=>{Promise.resolve().then(n)};function nc(n){return Z(Ro(n))}function ws(n){let t=document.activeElement;if(!Ce(t))return!1;let e=t.nodeName;return Z(Ro(n))&&(e===\"INPUT\"||e===\"TEXTAREA\"||t.contentEditable===\"true\"&&Tr(t)==null)}function Er(n,t,e){let r=n.getRootElement();try{return r!==null&&r.contains(t)&&r.contains(e)&&t!==null&&!ws(t)&&Ps(t)===n}catch{return!1}}function Ao(n){return n instanceof Ct}function Ps(n){let t=n;for(;t!=null;){let e=Tr(t);if(Ao(e))return e;t=Or(t)}return null}function Tr(n){return n?n.__lexicalEditor:null}function Kp(n){return Lh.test(n)?\"rtl\":wh.test(n)?\"ltr\":null}function Rt(n){return As(n)||n.isToken()}function _t(n){return Rt(n)||n.isSegmented()}function tt(n){return Kn(n)&&n.nodeType===3}function Su(n){return Kn(n)&&n.nodeType===9}function nn(n){let t=n;for(;t!=null;){if(tt(t))return t;t=t.firstChild}return null}function xo(n,t,e){let r=xe[t];if(e!==null&&(n&r)===(e&r))return n;let o=n^r;return t===\"subscript\"?o&=~xe.superscript:t===\"superscript\"?o&=~xe.subscript:t===\"lowercase\"?(o&=~xe.uppercase,o&=~xe.capitalize):t===\"uppercase\"?(o&=~xe.lowercase,o&=~xe.capitalize):t===\"capitalize\"&&(o&=~xe.lowercase,o&=~xe.uppercase),o}function Bp(n){return $(n)||Xt(n)||Z(n)}function Eu(n,t){let e=(function(){let s=fs;return fs=null,s})();if((t=t||e&&e.__key)!=null)return void(n.__key=t);ce(),gu();let r=te(),o=Tt(),i=\"\"+Cu++;o._nodeMap.set(i,n),v(n)?r._dirtyElements.set(i,!0):r._dirtyLeaves.add(i),r._cloneNotNeeded.add(i),r._dirtyType=1,n.__key=i}function kt(n){let t=n.getParent();if(t!==null){let e=n.getWritable(),r=t.getWritable(),o=n.getPreviousSibling(),i=n.getNextSibling(),s=i!==null?i.__key:null,a=o!==null?o.__key:null,l=o!==null?o.getWritable():null,c=i!==null?i.getWritable():null;o===null&&(r.__first=s),i===null&&(r.__last=a),l!==null&&(l.__next=s),c!==null&&(c.__prev=a),e.__prev=null,e.__next=null,e.__parent=null,r.__size--}}function No(n){gu(),ho(n)&&A(323,n.__key,n.__type);let t=n.getLatest(),e=t.__parent,r=Tt(),o=te(),i=r._nodeMap,s=o._dirtyElements;e!==null&&(function(l,c,u){let d=l;for(;d!==null;){if(u.has(d))return;let f=c.get(d);if(f===void 0)break;u.set(d,!1),d=f.__parent}})(e,i,s);let a=t.__key;o._dirtyType=1,v(n)?s.set(a,!0):o._dirtyLeaves.add(a)}function ue(n){ce();let t=te(),e=t._compositionKey;if(n!==e){if(t._compositionKey=n,e!==null){let r=ae(e);r!==null&&r.getWritable()}if(n!==null){let r=ae(n);r!==null&&r.getWritable()}}}function bt(){return Fn()?null:te()._compositionKey}function ae(n,t){let e=(t||Tt())._nodeMap.get(n);return e===void 0?null:e}function Fs(n,t){let e=bo(n,te());return e!==void 0?ae(e,t):null}function bo(n,t){return n[`__lexicalKey_${t._key}`]}function Ro(n,t){let e=n;for(;e!=null;){let r=Fs(e,t);if(r!==null)return r;e=Or(e)}return null}function Tu(n){let t=n._decorators,e=Object.assign({},t);return n._pendingDecorators=e,e}function rc(n){return n.read(()=>ke().getTextContent())}function ke(){return Ou(Tt())}function Ou(n){return n._nodeMap.get(\"root\")}function ve(n){ce();let t=Tt();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),t._selection=n}function En(n){let t=te(),e=(function(r,o){let i=r;for(;i!=null;){let s=bo(i,o);if(s!==void 0)return s;i=Or(i)}return null})(n,t);return e===null?n===t.getRootElement()?ae(\"root\"):null:ae(e)}function Mu(n){return/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g.test(n)}function Ks(n){let t=[],e=n;for(;e!==null;)t.push(e),e=e._parentEditor;return t}function vu(){return Math.random().toString(36).replace(/[^a-z]+/g,\"\").substring(0,5)}function Du(n){return tt(n)?n.nodeValue:null}function Bs(n,t,e){let r=et($e(t));if(r===null)return;let o=r.anchorNode,{anchorOffset:i,focusOffset:s}=r;if(o!==null){let a=Du(o),l=Ro(o);if(a!==null&&$(l)){if(a===Eo&&e){let c=e.length;a=e,i=c,s=c}a!==null&&Ws(l,a,i,s,n)}}}function Ws(n,t,e,r,o){let i=n;if(i.isAttached()&&(o||!i.isDirty())){let s=i.isComposing(),a=t;(s||o)&&t[t.length-1]===Eo&&(a=t.slice(0,-1));let l=i.getTextContent();if(o||a!==l){if(a===\"\"){if(ue(null),gr||vn||hr)i.remove();else{let p=te();setTimeout(()=>{p.update(()=>{i.isAttached()&&i.remove()})},20)}return}let c=i.getParent(),u=sn(),d=i.getTextContentSize(),f=bt(),h=i.getKey();if(i.isToken()||f!==null&&h===f&&!s||w(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===n.__key&&u.anchor.offset===0&&!i.canInsertTextBefore()&&!s||u.focus.key===n.__key&&u.focus.offset===d&&!i.canInsertTextAfter()&&!s))return void i.markDirty();let g=Y();if(!w(g)||e===null||r===null)return void oc(i,a,g);if(g.setTextNodeRange(i,e,i,r),i.isSegmented()){let p=le(i.getTextContent());i.replace(p),i=p}oc(i,a,g)}}}function oc(n,t,e){if(n.setTextContent(t),w(e)){let r=n.getKey();for(let o of[\"anchor\",\"focus\"]){let i=e[o];i.type===\"text\"&&i.key===r&&(i.offset=Ue(n,i.offset,\"clamp\"))}}}function Qr(n,t,e){let r=t[e]||!1;return r===\"any\"||r===n[e]}function Au(n,t){return Qr(n,t,\"altKey\")&&Qr(n,t,\"ctrlKey\")&&Qr(n,t,\"shiftKey\")&&Qr(n,t,\"metaKey\")}function j(n,t,e){return Au(n,e)&&n.key.toLowerCase()===t.toLowerCase()}var pt={ctrlKey:!Ke,metaKey:Ke},ic={altKey:Ke,ctrlKey:!Ke};function sc(n){return n.key===\"Backspace\"}function ac(n){return j(n,\"a\",pt)}function Wp(n){let t=ke();if(w(n)){let e=n.anchor,r=n.focus,o=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(o.getKey(),0,\"element\"),r.set(o.getKey(),o.getChildrenSize(),\"element\"),so(n),n}{let e=t.select(0,t.getChildrenSize());return ve(so(e)),e}}function Mn(n,t){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});let e=n.__lexicalClassNameCache,r=e[t];if(r!==void 0)return r;let o=n[t];if(typeof o==\"string\"){let i=hc(o);return e[t]=i,i}return o}function zs(n,t,e,r,o){if(e.size===0)return;let i=r.__type,s=r.__key,a=t.get(i);a===void 0&&A(33,i);let l=a.klass,c=n.get(l);c===void 0&&(c=new Map,n.set(l,c));let u=c.get(s),d=u===\"destroyed\"&&o===\"created\";(u===void 0||d)&&c.set(s,d?\"updated\":o)}function zp(n){let t=n.getType(),e=Tt();if(e._readOnly){let i=ps(e).get(t);return i?Array.from(i.values()):[]}let r=e._nodeMap,o=[];for(let[,i]of r)i instanceof n&&i.__type===t&&i.isAttached()&&o.push(i);return o}function lc(n,t,e){let r=n.getParent(),o=e,i=n;return r!==null&&(t&&e===0?(o=i.getIndexWithinParent(),i=r):t||e!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(t?o-1:o)}function bu(n,t){let e=n.offset;if(n.type===\"element\")return lc(n.getNode(),t,e);{let r=n.getNode();if(t&&e===0||!t&&e===r.getTextContentSize()){let o=t?r.getPreviousSibling():r.getNextSibling();return o===null?lc(r.getParentOrThrow(),t,r.getIndexWithinParent()+(t?0:1)):o}}return null}function Ru(n){let t=$e(n).event,e=t&&t.inputType;return e===\"insertFromPaste\"||e===\"insertFromPasteAsQuotation\"}function k(n,t,e){return(function(r,o,i){let s=Ks(r);for(let a=4;a>=0;a--)for(let l=0;l<s.length;l++){let c=s[l],u=c._commands.get(o);if(u!==void 0){let d=u[a];if(d!==void 0){let f=Array.from(d),h=f.length,g=!1;if(be(c,()=>{for(let p=0;p<h;p++)if(f[p](i,r))return void(g=!0)}),g)return g}}}return!1})(n,t,e)}function ko(n){return!ge(n)&&!n.isLastChild()&&!n.isInline()}function rn(n,t){let e=n._keyToDOMMap.get(t);return e===void 0&&A(75,t),e}function Or(n){let t=n.assignedSlot||n.parentElement;return Pu(t)?t.host:t}function Us(n){return Su(n)?n:Ce(n)?n.ownerDocument:null}function Up(n){return te()._updateTags.has(n)}function ku(n){ce(),te()._updateTags.add(n)}function Iu(n){ce(),te()._deferred.push(n)}function Co(n,t){let e=n.getParent();for(;e!==null;){if(e.is(t))return!0;e=e.getParent()}return!1}function Hs(n){let t=Us(n);return t?t.defaultView:null}function $e(n){let t=n._window;return t===null&&A(78),t}function Hp(n){return v(n)&&n.isInline()||Z(n)&&n.isInline()}function $u(n){let t=n.getParentOrThrow();for(;t!==null;){if(Ye(t))return t;t=t.getParentOrThrow()}return t}function Ye(n){return ge(n)||v(n)&&n.isShadowRoot()}function Ys(n){let t=n.constructor.clone(n);return Eu(t,null),t.afterCloneFrom(n),t}function Mr(n){let t=te(),e=n.getType(),r=Ls(t,e);r===void 0&&A(200,n.constructor.name,e);let{replace:o,replaceWithKlass:i}=r;if(o!==null){let s=o(n),a=s.constructor;return i!==null?s instanceof i||A(201,i.name,i.getType(),a.name,a.getType(),n.constructor.name,e):s instanceof n.constructor&&a!==n.constructor||A(202,a.name,a.getType(),n.constructor.name,e),s.__key===n.__key&&A(203,n.constructor.name,e,a.name,a.getType()),s}return n}function zi(n,t){!ge(n.getParent())||v(t)||Z(t)||A(99)}function Lu(n){let t=ae(n);return t===null&&A(63,n),t}function Ui(n){return(Z(n)||v(n)&&!n.canBeEmpty())&&!n.isInline()}function gs(n,t,e){e.style.removeProperty(\"caret-color\"),t._blockCursorElement=null;let r=n.parentElement;r!==null&&r.removeChild(n)}function et(n){return Ge?(n||window).getSelection():null}function wu(n){let t=Hs(n);return t?t.getSelection():null}function Yp(n,t){let e=n.getChildAtIndex(t);e==null&&(e=n),Ye(n)&&A(102);let r=s=>{let a=s.getParentOrThrow(),l=Ye(a),c=s!==e||l?Ys(s):s;if(l)return v(s)&&v(c)||A(133),s.insertAfter(c),[s,c,c];{let[u,d,f]=r(a),h=s.getNextSiblings();return f.append(c,...h),[u,d,c]}},[o,i]=r(e);return[o,i]}function Gp(n){return Ce(n)&&n.tagName===\"A\"}function Ce(n){return Kn(n)&&n.nodeType===1}function Kn(n){return typeof n==\"object\"&&n!==null&&\"nodeType\"in n&&typeof n.nodeType==\"number\"}function Pu(n){return Kn(n)&&n.nodeType===11}function Fu(n){let t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,\"i\");return n.nodeName.match(t)!==null}function hs(n){let t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,\"i\");return n.nodeName.match(t)!==null}function xt(n){if(Z(n)&&!n.isInline())return!0;if(!v(n)||Ye(n))return!1;let t=n.getFirstChild(),e=t===null||Xt(t)||$(t)||t.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&e}function Gs(){return te()}var cc=new WeakMap,Jp=new Map;function ps(n){if(!n._readOnly&&n.isEmpty())return Jp;n._readOnly||A(192);let t=cc.get(n);return t||(t=(function(e){let r=new Map;for(let[o,i]of e._nodeMap){let s=i.__type,a=r.get(s);a||(a=new Map,r.set(s,a)),a.set(o,i)}return r})(n),cc.set(n,t)),t}function Js(n){let t=n.constructor.clone(n);return t.afterCloneFrom(n),t}function jp(n){return(t=Js(n))[tu]=!0,t;var t}function Ku(n,t){let e=parseInt(n.style.paddingInlineStart,10)||0,r=Math.round(e/40);t.setIndent(r)}function Vp(n){n.__lexicalUnmanaged=!0}function Bu(n){return n.__lexicalUnmanaged===!0}function or(n,t){return(function(e,r){return Object.prototype.hasOwnProperty.call(e,r)})(n,t)&&n[t]!==Re[t]}function vr(n){let t=Sl in n.prototype?n.prototype[Sl]():void 0,e=(function(s){if(!(s===Re||s.prototype instanceof Re)){let a=\"<unknown>\",l=\"<unknown>\";try{a=s.getType()}catch{}try{Ct.version&&(l=JSON.parse(Ct.version))}catch{}A(290,s.name,a,l)}return s===Nr||s===$t||s===Re})(n),r=!e&&or(n,\"getType\")?n.getType():void 0,o,i=r;if(t)if(r)o=t[r];else for(let[s,a]of Object.entries(t))i=s,o=a;if(!e&&i&&(or(n,\"getType\")||(n.getType=()=>i),or(n,\"clone\")||(n.clone=s=>(Is(s),new n)),or(n,\"importJSON\")||(n.importJSON=o&&o.$importJSON||(s=>new n().updateFromJSON(s))),!or(n,\"importDOM\")&&o)){let{importDOM:s}=o;s&&(n.importDOM=()=>s)}return{ownNodeConfig:o,ownNodeType:i}}function Xp(n){let t=Gs();return ce(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(n))).klass}var ur=(n,t)=>{let e=n;for(;e!=null&&!ge(e);){if(t(e))return e;e=e.getParent()}return null},qp={next:\"previous\",previous:\"next\"},In=class{constructor(t){C(this,\"origin\");this.origin=t}[Symbol.iterator](){return Xs({hasNext:on,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return he(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return he(this.origin,this.direction)}remove(){let t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,e){let r=this.getNodeAtCaret();return t.is(this.origin)||t.is(r)||(r===null?this.insert(t):r.replace(t,e)),this}splice(t,e,r=\"next\"){let o=r===this.direction?e:Array.from(e).reverse(),i=this,s=this.getParentAtCaret(),a=new Map;for(let l=i.getAdjacentCaret();l!==null&&a.size<t;l=l.getAdjacentCaret()){let c=l.origin.getWritable();a.set(c.getKey(),c)}for(let l of o){if(a.size>0){let c=i.getNodeAtCaret();if(c){if(a.delete(c.getKey()),a.delete(l.getKey()),!(c.is(l)||i.origin.is(l))){let u=l.getParent();u&&u.is(s)&&l.remove(),c.replace(l)}}else c===null&&A(263,Array.from(a).join(\" \"))}else i.insert(l);i=he(l,this.direction)}for(let l of a.values())l.remove();return this}},Sr=class n extends In{constructor(){super(...arguments);C(this,\"type\",\"child\")}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:Et(e,this.direction)}getParentCaret(e=\"root\"){return he(js(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=Kt(this.direction);return he(this.getNodeAtCaret(),e)||Et(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof n&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}},Zp={root:ge,shadowRoot:Ye};function Kt(n){return qp[n]}function js(n,t=\"root\"){return Zp[t](n)?null:n}var $n=class n extends In{constructor(){super(...arguments);C(this,\"type\",\"sibling\")}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:he(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return v(this.origin)?Et(this.origin,this.direction):null}getParentCaret(e=\"root\"){return he(js(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=Kt(this.direction);return he(this.getNodeAtCaret(),e)||Et(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof n&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof n||e instanceof Ln)&&this.direction===e.direction&&this.origin.is(e.origin)}},Ln=class n extends In{constructor(e,r){super(e);C(this,\"type\",\"text\");C(this,\"offset\");this.offset=r}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:Lt(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(e=\"root\"){return he(js(this.getParentAtCaret(),e),this.direction)}getFlipped(){return Lt(this.origin,Kt(this.direction),this.offset)}isSamePointCaret(e){return e instanceof n&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof $n||e instanceof n)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return he(this.origin,this.direction)}};function St(n){return n instanceof Ln}function Qp(n){return n instanceof In}function on(n){return n instanceof $n}function ze(n){return n instanceof Sr}var e_={next:class extends Ln{constructor(){super(...arguments);C(this,\"direction\",\"next\")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends Ln{constructor(){super(...arguments);C(this,\"direction\",\"previous\")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},t_={next:class extends $n{constructor(){super(...arguments);C(this,\"direction\",\"next\")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends $n{constructor(){super(...arguments);C(this,\"direction\",\"previous\")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},n_={next:class extends Sr{constructor(){super(...arguments);C(this,\"direction\",\"next\")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(t){return this.origin.splice(0,0,[t]),this}},previous:class extends Sr{constructor(){super(...arguments);C(this,\"direction\",\"previous\")}getNodeAtCaret(){return this.origin.getLastChild()}insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this}}};function he(n,t){return n?new t_[t](n):null}function Lt(n,t,e){return n?new e_[t](n,Ue(n,e)):null}function Ue(n,t,e=\"error\"){let r=n.getTextContentSize(),o=t===\"next\"?r:t===\"previous\"?0:t;return(o<0||o>r)&&(e!==\"clamp\"&&fc(284,String(t),String(r),n.getKey()),o=o<0?0:r),o}function _s(n,t){return new So(n,t)}function Et(n,t){return v(n)?new n_[t](n):null}function Wu(n){return n&&n.getChildCaret()||n}function wn(n){return n&&Wu(n.getAdjacentCaret())}var ms=class n{constructor(t,e,r){C(this,\"type\",\"node-caret-range\");C(this,\"direction\");C(this,\"anchor\");C(this,\"focus\");this.anchor=t,this.focus=e,this.direction=r}getLatest(){let t=this.anchor.getLatest(),e=this.focus.getLatest();return t===this.anchor&&e===this.focus?this:new n(t,e,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let t=o=>{let i=this[o].getLatest();return St(i)?(function(s,a){let{direction:l,origin:c}=s,u=Ue(c,a===\"focus\"?Kt(l):l);return _s(s,u-s.offset)})(i,o):null},e=t(\"anchor\"),r=t(\"focus\");if(e&&r){let{caret:o}=e,{caret:i}=r;if(o.isSameNodeCaret(i))return[_s(o,i.offset-o.offset),null]}return[e,r]}iterNodeCarets(t=\"root\"){let e=St(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),o=St(r),i=s=>s.isSameNodeCaret(r)?null:wn(s)||s.getParentCaret(t);return Xs({hasNext:s=>s!==null&&!(o&&r.isSameNodeCaret(s)),initial:e.isSameNodeCaret(r)?null:i(e),map:s=>s,step:i})}[Symbol.iterator](){return this.iterNodeCarets(\"root\")}},So=class{constructor(t,e){C(this,\"type\",\"slice\");C(this,\"caret\");C(this,\"distance\");this.caret=t,this.distance=e}getSliceIndices(){let{distance:t,caret:{offset:e}}=this,r=e+t;return r<e?[r,e]:[e,r]}getTextContent(){let[t,e]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,e)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:t,direction:e}}=this,[r,o]=this.getSliceIndices(),i=t.getTextContent();return Lt(t.setTextContent(i.slice(0,r)+i.slice(o)),e,r)}};function r_(n){return n instanceof So}function Vs(n){return wt(n,he(ke(),n.direction))}function zu(n){return wt(n,n)}function wt(n,t){return n.direction!==t.direction&&A(265),new ms(n,t,n.direction)}function Xs(n){let{initial:t,hasNext:e,step:r,map:o}=n,i=t;return{[Symbol.iterator](){return this},next(){if(!e(i))return{done:!0,value:void 0};let s={done:!1,value:o(i)};return i=r(i),s}}}function qs(n,t){let e=dr(n.origin,t.origin);switch(e===null&&A(275,n.origin.getKey(),t.origin.getKey()),e.type){case\"same\":{let r=n.type===\"text\",o=t.type===\"text\";return r&&o?(function(i,s){return Math.sign(i-s)})(n.offset,t.offset):n.type===t.type?0:r?-1:o?1:n.type===\"child\"?-1:1}case\"ancestor\":return n.type===\"child\"?-1:1;case\"descendant\":return t.type===\"child\"?1:-1;case\"branch\":return Zs(e)}}function Zs(n){let{a:t,b:e}=n,r=t.__key,o=e.__key,i=t,s=e;for(;i&&s;i=i.getNextSibling(),s=s.getNextSibling()){if(i.__key===o)return-1;if(s.__key===r)return 1}return i===null?1:-1}function eo(n,t){return t.is(n)}function uc(n){return v(n)?[n.getLatest(),null]:[n.getParent(),n.getLatest()]}function dr(n,t){if(n.is(t))return{commonAncestor:n,type:\"same\"};let e=new Map;for(let[r,o]=uc(n);r;o=r,r=r.getParent())e.set(r,o);for(let[r,o]=uc(t);r;o=r,r=r.getParent()){let i=e.get(r);if(i!==void 0)return i===null?(eo(n,r)||A(276),{commonAncestor:r,type:\"ancestor\"}):o===null?(eo(t,r)||A(277),{commonAncestor:r,type:\"descendant\"}):((v(i)||eo(n,i))&&(v(o)||eo(t,o))&&r.is(i.getParent())&&r.is(o.getParent())||A(278),{a:i,b:o,commonAncestor:r,type:\"branch\"})}return null}function Pt(n,t){let{type:e,key:r,offset:o}=n,i=Lu(n.key);return e===\"text\"?($(i)||A(266,i.getType(),r),Lt(i,t,o)):(v(i)||A(267,i.getType(),r),Gu(i,n.offset,t))}function Pn(n,t){let{origin:e,direction:r}=t,o=r===\"next\";St(t)?n.set(e.getKey(),t.offset,\"text\"):on(t)?$(e)?n.set(e.getKey(),Ue(e,r),\"text\"):n.set(e.getParentOrThrow().getKey(),e.getIndexWithinParent()+(o?1:0),\"element\"):(ze(t)&&v(e)||A(268),n.set(e.getKey(),o?0:e.getChildrenSize(),\"element\"))}function Uu(n){let t=Y(),e=w(t)?t:du();return fr(e,n),ve(e),e}function fr(n,t){Pn(n.anchor,t.anchor),Pn(n.focus,t.focus)}function ys(n){let{anchor:t,focus:e}=n,r=Pt(t,\"next\"),o=Pt(e,\"next\"),i=qs(r,o)<=0?\"next\":\"previous\";return wt(Ft(r,i),Ft(o,i))}function Bn(n){let{direction:t,origin:e}=n,r=he(e,Kt(t)).getNodeAtCaret();return r?he(r,t):Et(e.getParentOrThrow(),t)}function dc(n,t=\"root\"){let e=[n];for(let r=ze(n)?n.getParentCaret(t):n.getSiblingCaret();r!==null;r=r.getParentCaret(t))e.push(Bn(r));return e}function Hi(n){return!!n&&n.origin.isAttached()}function Hu(n,t=\"removeEmptySlices\"){if(n.isCollapsed())return n;let e=\"root\",r=\"next\",o=t,i=Qs(n,r),s=dc(i.anchor,e),a=dc(i.focus.getFlipped(),e),l=new Set,c=[];for(let g of i.iterNodeCarets(e))if(ze(g))l.add(g.origin.getKey());else if(on(g)){let{origin:p}=g;v(p)&&!l.has(p.getKey())||c.push(p)}for(let g of c)g.remove();for(let g of i.getTextSlices()){if(!g)continue;let{origin:p}=g.caret,_=p.getTextContentSize(),x=Bn(he(p,r)),y=p.getMode();if(Math.abs(g.distance)===_&&o===\"removeEmptySlices\"||y===\"token\"&&g.distance!==0)x.remove();else if(g.distance!==0){o=\"removeEmptySlices\";let N=g.removeTextSlice(),S=g.caret.origin;if(y===\"segmented\"){let M=N.origin,E=le(M.getTextContent()).setStyle(M.getStyle()).setFormat(M.getFormat());x.replaceOrInsert(E),N=Lt(E,r,N.offset)}S.is(s[0].origin)&&(s[0]=N),S.is(a[0].origin)&&(a[0]=N.getFlipped())}}let u,d;for(let g of s)if(Hi(g)){u=Be(g);break}for(let g of a)if(Hi(g)){d=Be(g);break}let f=(function(g,p,_){if(!g||!p)return null;let x=g.getParentAtCaret(),y=p.getParentAtCaret();if(!x||!y)return null;let N=x.getParents().reverse();N.push(x);let S=y.getParents().reverse();S.push(y);let M=Math.min(N.length,S.length),E;for(E=0;E<M&&N[E]===S[E];E++);let T=(R,P)=>{let q;for(let H=E;H<R.length;H++){let G=R[H];if(Ye(G))return;!q&&P(G)&&(q=G)}return q},D=T(N,xt),O=D&&T(S,R=>_.has(R.getKey())&&xt(R));return D&&O?[D,O]:null})(u,d,l);if(f){let[g,p]=f;Et(g,\"previous\").splice(0,p.getChildren()),p.remove()}let h=[u,d,...s,...a].find(Hi);if(h)return zu(Ft(Be(h),n.direction));A(269,JSON.stringify(s.map(g=>g.origin.__key)))}function Be(n){let t=(function(o){let i=o;for(;ze(i);){let s=wn(i);if(!ze(s))break;i=s}return i})(n.getLatest()),{direction:e}=t;if($(t.origin))return St(t)?t:Lt(t.origin,e,e);let r=t.getAdjacentCaret();return on(r)&&$(r.origin)?Lt(r.origin,e,Kt(e)):t}function Yu(n){return St(n)&&n.offset!==Ue(n.origin,n.direction)}function Ft(n,t){return n.direction===t?n:n.getFlipped()}function Qs(n,t){return n.direction===t?n:wt(Ft(n.focus,t),Ft(n.anchor,t))}function Gu(n,t,e){let r=Et(n,\"next\");for(let o=0;o<t;o++){let i=r.getAdjacentCaret();if(i===null)break;r=i}return Ft(r,e)}function o_(n,t=\"root\"){let e=0,r=n,o=wn(r);for(;o===null;){if(e--,o=r.getParentCaret(t),!o)return null;r=o,o=wn(r)}return o&&[o,e]}function i_(n){let{origin:t,offset:e,direction:r}=n;if(e===Ue(t,r))return n.getSiblingCaret();if(e===Ue(t,Kt(r)))return Bn(n.getSiblingCaret());let[o]=t.splitText(e);return $(o)||A(281),Ft(he(o,\"next\"),r)}function s_(n,t){return!0}function a_(n,{$copyElementNode:t=Ys,$splitTextPointCaretNext:e=i_,rootMode:r=\"shadowRoot\",$shouldSplit:o=s_}={}){if(St(n))return e(n);let i=n.getParentCaret(r);if(i){let{origin:s}=i;if(ze(n)&&(!s.canBeEmpty()||!o(s,\"first\")))return Bn(i);let a=(function(l){let c=[];for(let u=l.getAdjacentCaret();u;u=u.getAdjacentCaret())c.push(u.origin);return c})(n);(a.length>0||s.canBeEmpty()&&o(s,\"last\"))&&i.insert(t(s).splice(0,0,a))}return i}function l_(n){return n}function c_(...n){return n}function u_(n,t){return[n,t]}function d_(n){return n}function f_(n,t){if(!t||n===t)return n;for(let e in t)if(n[e]!==t[e])return{...n,...t};return n}var m=ea,ky=m.$addUpdateTag,Ot=m.$applyNodeReplacement,Wn=m.$caretFromPoint,Ju=m.$caretRangeFromSelection,Io=m.$cloneWithProperties,ju=m.$cloneWithPropertiesEphemeral,Iy=m.$comparePointCaretNext,$y=m.$copyNode,Vu=m.$create,ta=m.$createLineBreakNode,Xu=m.$createNodeSelection,re=m.$createParagraphNode,Ly=m.$createPoint,zn=m.$createRangeSelection,wy=m.$createRangeSelectionFromDom,$o=m.$createTabNode,Bt=m.$createTextNode,qu=m.$extendCaretToRange,Wt=m.$findMatchingParent,na=m.$getAdjacentChildCaret,ra=m.$getAdjacentNode,an=m.$getAdjacentSiblingOrParentSiblingCaret,oa=m.$getCaretInDirection,Zu=m.$getCaretRange,Py=m.$getCaretRangeInDirection,Qu=m.$getCharacterOffsets,Je=m.$getChildCaret,Fy=m.$getChildCaretAtIndex,ia=m.$getChildCaretOrSelf,ed=m.$getCollapsedCaretRange,Ky=m.$getCommonAncestor,By=m.$getCommonAncestorResultBranchOrder,Lo=m.$getEditor,nt=m.$getNearestNodeFromDOMNode,Wy=m.$getNearestRootOrShadowRoot,zt=m.$getNodeByKey,zy=m.$getNodeByKeyOrThrow,td=m.$getNodeFromDOMNode,Dr=m.$getPreviousSelection,Se=m.$getRoot,I=m.$getSelection,Mt=m.$getSiblingCaret,nd=m.$getState,Uy=m.$getStateChange,Hy=m.$getTextContent,Yy=m.$getTextNodeOffset,Gy=m.$getTextPointCaret,Jy=m.$getTextPointCaretSlice,jy=m.$getWritableNodeState,rd=m.$hasAncestor,Vy=m.$hasUpdateTag,Ar=m.$insertNodes,Un=m.$isBlockElementNode,br=m.$isChildCaret,ln=m.$isDecoratorNode,od=m.$isEditorState,L=m.$isElementNode,id=m.$isExtendableTextPointCaret,Xy=m.$isInlineElementOrDecoratorNode,Rr=m.$isLeafNode,sa=m.$isLineBreakNode,qy=m.$isNodeCaret,_e=m.$isNodeSelection,sd=m.$isParagraphNode,b=m.$isRangeSelection,cn=m.$isRootNode,Le=m.$isRootOrShadowRoot,ad=m.$isSiblingCaret,Zy=m.$isTabNode,z=m.$isTextNode,wo=m.$isTextPointCaret,Qy=m.$isTextPointCaretSlice,aa=m.$isTokenOrSegmented,ex=m.$isTokenOrTab,tx=m.$nodesOfType,kr=m.$normalizeCaret,un=m.$normalizeSelection__EXPERIMENTAL,nx=m.$onUpdate,ld=m.$parseSerializedNode,rx=m.$removeTextFromCaretRange,cd=m.$rewindSiblingCaret,Po=m.$selectAll,ox=m.$setCompositionKey,la=m.$setPointFromCaret,je=m.$setSelection,ud=m.$setSelectionFromCaretRange,dd=m.$setState,fd=m.$splitAtPointCaretNext,gd=m.$splitNode,ix=m.$updateRangeSelectionFromCaretRange,ca=m.ArtificialNode__DO_NOT_USE,sx=m.BLUR_COMMAND,dn=m.CAN_REDO_COMMAND,fn=m.CAN_UNDO_COMMAND,Fo=m.CLEAR_EDITOR_COMMAND,hd=m.CLEAR_HISTORY_COMMAND,Ko=m.CLICK_COMMAND,ax=m.COLLABORATION_TAG,Bo=m.COMMAND_PRIORITY_CRITICAL,B=m.COMMAND_PRIORITY_EDITOR,lx=m.COMMAND_PRIORITY_HIGH,pe=m.COMMAND_PRIORITY_LOW,pd=m.COMMAND_PRIORITY_NORMAL,_d=m.CONTROLLED_TEXT_INSERTION_COMMAND,Wo=m.COPY_COMMAND,md=m.CUT_COMMAND,zo=m.DELETE_CHARACTER_COMMAND,yd=m.DELETE_LINE_COMMAND,xd=m.DELETE_WORD_COMMAND,cx=m.DRAGEND_COMMAND,Nd=m.DRAGOVER_COMMAND,Cd=m.DRAGSTART_COMMAND,Sd=m.DROP_COMMAND,Ir=m.DecoratorNode,rt=m.ElementNode,ux=m.FOCUS_COMMAND,Uo=m.FORMAT_ELEMENT_COMMAND,Ho=m.FORMAT_TEXT_COMMAND,Yo=m.HISTORIC_TAG,Go=m.HISTORY_MERGE_TAG,Ed=m.HISTORY_PUSH_TAG,$r=m.INDENT_CONTENT_COMMAND,ua=m.INSERT_LINE_BREAK_COMMAND,Lr=m.INSERT_PARAGRAPH_COMMAND,Jo=m.INSERT_TAB_COMMAND,wr=m.INTERNAL_$isBlock,dx=m.IS_ALL_FORMATTING,fx=m.IS_BOLD,gx=m.IS_CODE,hx=m.IS_HIGHLIGHT,px=m.IS_ITALIC,_x=m.IS_STRIKETHROUGH,mx=m.IS_SUBSCRIPT,yx=m.IS_SUPERSCRIPT,xx=m.IS_UNDERLINE,jo=m.KEY_ARROW_DOWN_COMMAND,Vo=m.KEY_ARROW_LEFT_COMMAND,Td=m.KEY_ARROW_RIGHT_COMMAND,Xo=m.KEY_ARROW_UP_COMMAND,Od=m.KEY_BACKSPACE_COMMAND,Md=m.KEY_DELETE_COMMAND,Nx=m.KEY_DOWN_COMMAND,qo=m.KEY_ENTER_COMMAND,Zo=m.KEY_ESCAPE_COMMAND,Cx=m.KEY_MODIFIER_COMMAND,Qo=m.KEY_SPACE_COMMAND,ei=m.KEY_TAB_COMMAND,vd=m.LineBreakNode,Sx=m.MOVE_TO_END,Ex=m.MOVE_TO_START,Tx=m.NODE_STATE_KEY,Pr=m.OUTDENT_CONTENT_COMMAND,ti=m.PASTE_COMMAND,Dd=m.PASTE_TAG,Ad=m.ParagraphNode,ni=m.REDO_COMMAND,bd=m.REMOVE_TEXT_COMMAND,Rd=m.RootNode,Ox=m.SELECTION_CHANGE_COMMAND,kd=m.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,Id=m.SELECT_ALL_COMMAND,Mx=m.SKIP_COLLAB_TAG,vx=m.SKIP_DOM_SELECTION_TAG,Dx=m.SKIP_SCROLL_INTO_VIEW_TAG,Ax=m.SKIP_SELECTION_FOCUS_TAG,bx=m.TEXT_TYPE_TO_FORMAT,$d=m.TabNode,Hn=m.TextNode,ri=m.UNDO_COMMAND,da=m.buildImportMap,oi=m.configExtension,Ee=m.createCommand,ii=m.createEditor,Rx=m.createSharedNodeState,kx=m.createState,Ld=m.declarePeerDependency,ne=m.defineExtension,Ix=m.flipDirection,$x=m.getDOMOwnerDocument,fa=m.getDOMSelection,Lx=m.getDOMSelectionFromTarget,wd=m.getDOMTextNode,wx=m.getEditorPropertyFromDOMNode,si=m.getNearestEditorFromDOMNode,Pd=m.getRegisteredNode,Px=m.getRegisteredNodeOrThrow,Fx=m.getStaticNodeConfig,Kx=m.getTextDirection,Bx=m.getTransformSetFromKlass,Fd=m.isBlockDomNode,Wx=m.isCurrentlyReadOnlyMode,Kd=m.isDOMDocumentNode,Yn=m.isDOMNode,zx=m.isDOMTextNode,Ux=m.isDOMUnmanaged,ga=m.isDocumentFragment,Hx=m.isExactShortcutMatch,Bd=m.isHTMLAnchorElement,ai=m.isHTMLElement,Fr=m.isInlineDomNode,Yx=m.isLexicalEditor,Gx=m.isModifierMatch,Wd=m.isSelectionCapturedInDecoratorInput,zd=m.isSelectionWithinEditor,ha=m.makeStepwiseIterator,Jx=m.removeFromParent,jx=m.resetRandomKey,Te=m.safeCast,Vx=m.setDOMUnmanaged,pa=m.setNodeIndentFromDOM,Ut=m.shallowMergeConfig;var Sa={};Fe(Sa,{$addNodeStyle:()=>y_,$cloneWithProperties:()=>Io,$copyBlockFormatIndent:()=>qd,$ensureForwardRangeSelection:()=>Xd,$forEachSelectedTextNode:()=>Vd,$getComputedStyleForElement:()=>xa,$getComputedStyleForParent:()=>Na,$getSelectionStyleValueForProperty:()=>M_,$isAtNodeEnd:()=>m_,$isParentElementRTL:()=>Ca,$isParentRTL:()=>p_,$moveCaretSelection:()=>ef,$moveCharacter:()=>T_,$patchStyleText:()=>x_,$selectAll:()=>Po,$setBlocksType:()=>N_,$shouldOverrideDefaultCharacterSelection:()=>E_,$sliceSelectedTextNodeContent:()=>__,$trimTextContentFromAnchor:()=>jd,$wrapNodes:()=>S_,createDOMRange:()=>g_,createRectsFromDOMRange:()=>h_,getCSSFromStyleObject:()=>Jd,getStyleObjectFromCSS:()=>ci,trimTextContentFromAnchor:()=>v_});function ya(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),r=new URLSearchParams;r.append(\"code\",n);for(let o of t)r.append(\"v\",o);throw e.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var li=new Map;function Ud(n){let t=n;for(;t!=null;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function Hd(n){let t=n.parentNode;if(t==null)throw new Error(\"Should never happen\");return[t,Array.from(t.childNodes).indexOf(n)]}function g_(n,t,e,r,o){let i=t.getKey(),s=r.getKey(),a=document.createRange(),l=n.getElementByKey(i),c=n.getElementByKey(s),u=e,d=o;if(z(t)&&(l=Ud(l)),z(r)&&(c=Ud(c)),t===void 0||r===void 0||l===null||c===null)return null;l.nodeName===\"BR\"&&([l,u]=Hd(l)),c.nodeName===\"BR\"&&([c,d]=Hd(c));let f=l.firstChild;l===c&&f!=null&&f.nodeName===\"BR\"&&u===0&&d===0&&(d=1);try{a.setStart(l,u),a.setEnd(c,d)}catch{return null}return!a.collapsed||u===d&&i===s||(a.setStart(c,d),a.setEnd(l,u)),a}function h_(n,t){let e=n.getRootElement();if(e===null)return[];let r=e.getBoundingClientRect(),o=getComputedStyle(e),i=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),s=Array.from(t.getClientRects()),a,l=s.length;s.sort((c,u)=>{let d=c.top-u.top;return Math.abs(d)<=3?c.left-u.left:d});for(let c=0;c<l;c++){let u=s[c],d=a&&a.top<=u.top&&a.top+a.height>u.top&&a.left+a.width>u.left,f=u.width+i===r.width;d||f?(s.splice(c--,1),l--):a=u}return s}function Gd(n){let t={};if(!n)return t;let e=n.split(\";\");for(let r of e)if(r!==\"\"){let[o,i]=r.split(/:([^]+)/);o&&i&&(t[o.trim()]=i.trim())}return t}function ci(n){let t=li.get(n);return t===void 0&&(t=Gd(n),li.set(n,t)),t}function Jd(n){let t=\"\";for(let e in n)e&&(t+=`${e}: ${n[e]};`);return t}function xa(n){let t=Lo().getElementByKey(n.getKey());if(t===null)return null;let e=t.ownerDocument.defaultView;return e===null?null:e.getComputedStyle(t)}function Na(n){return xa(cn(n)?n:n.getParentOrThrow())}function p_(n){let t=Na(n);return t!==null&&t.direction===\"rtl\"}function __(n,t,e=\"self\"){let r=n.getStartEndPoints();if(t.isSelected(n)&&!aa(t)&&r!==null){let[o,i]=r,s=n.isBackward(),a=o.getNode(),l=i.getNode(),c=t.is(a),u=t.is(l);if(c||u){let[d,f]=Qu(n),h=a.is(l),g=t.is(s?l:a),p=t.is(s?a:l),_,x=0;h?(x=d>f?f:d,_=d>f?d:f):g?(x=s?f:d,_=void 0):p&&(x=0,_=s?d:f);let y=t.__text.slice(x,_);y!==t.__text&&(e===\"clone\"&&(t=ju(t)),t.__text=y)}}return t}function m_(n){if(n.type===\"text\")return n.offset===n.getNode().getTextContentSize();let t=n.getNode();return L(t)||ya(177),n.offset===t.getChildrenSize()}function jd(n,t,e){let r=t.getNode(),o=e;if(L(r)){let i=r.getDescendantByIndex(t.offset);i!==null&&(r=i)}for(;o>0&&r!==null;){if(L(r)){let c=r.getLastDescendant();c!==null&&(r=c)}let i=r.getPreviousSibling(),s=0;if(i===null){let c=r.getParentOrThrow(),u=c.getPreviousSibling();for(;u===null;){if(c=c.getParent(),c===null){i=null;break}u=c.getPreviousSibling()}c!==null&&(s=c.isInline()?0:2,i=u)}let a=r.getTextContent();a===\"\"&&L(r)&&!r.isInline()&&(a=`\n\n`);let l=a.length;if(!z(r)||o>=l){let c=r.getParent();r.remove(),c==null||c.getChildrenSize()!==0||cn(c)||c.remove(),o-=l+s,r=i}else{let c=r.getKey(),u=n.getEditorState().read(()=>{let h=zt(c);return z(h)&&h.isSimpleText()?h.getTextContent():null}),d=l-o,f=a.slice(0,d);if(u!==null&&u!==a){let h=Dr(),g=r;if(r.isSimpleText())r.setTextContent(u);else{let p=Bt(u);r.replace(p),g=p}if(b(h)&&h.isCollapsed()){let p=h.anchor.offset;g.select(p,p)}}else if(r.isSimpleText()){let h=t.key===c,g=t.offset;g<o&&(g=l);let p=h?g-o:0,_=h?g:d;if(h&&p===0){let[x]=r.splitText(p,_);x.remove()}else{let[,x]=r.splitText(p,_);x.remove()}}else{let h=Bt(f);r.replace(h)}o=0}}}function y_(n){let t=n.getStyle(),e=Gd(t);li.set(t,e)}function _a(n,t){(b(n)?n.isCollapsed():z(n)||L(n))||ya(280);let e=ci(b(n)?n.style:z(n)?n.getStyle():n.getTextStyle()),r=Object.entries(t).reduce((i,[s,a])=>(typeof a==\"function\"?i[s]=a(e[s],n):a===null?delete i[s]:i[s]=a,i),{...e}),o=Jd(r);b(n)||z(n)?n.setStyle(o):n.setTextStyle(o),li.set(o,r)}function x_(n,t){if(b(n)&&n.isCollapsed()){_a(n,t);let e=n.anchor.getNode();L(e)&&e.isEmpty()&&_a(e,t)}Vd(e=>{_a(e,t)})}function Vd(n){let t=I();if(!t)return;let e=new Map,r=i=>e.get(i.getKey())||[0,i.getTextContentSize()];if(b(t))for(let i of Ju(t).getTextSlices())i&&e.set(i.caret.origin.getKey(),i.getSliceIndices());let o=t.getNodes();for(let i of o){if(!z(i)||!i.canHaveFormat())continue;let[s,a]=r(i);a!==s&&(aa(i)||s===0&&a===i.getTextContentSize()?n(i):n(i.splitText(s,a)[s===0?0:1]))}b(t)&&t.anchor.type===\"text\"&&t.focus.type===\"text\"&&t.anchor.key===t.focus.key&&Xd(t)}function Xd(n){if(n.isBackward()){let{anchor:t,focus:e}=n,{key:r,offset:o,type:i}=t;t.set(e.key,e.offset,e.type),e.set(r,o,i)}}function qd(n,t){let e=n.getFormatType(),r=n.getIndent();e!==t.getFormatType()&&t.setFormat(e),r!==t.getIndent()&&t.setIndent(r)}function N_(n,t,e=qd){if(n===null)return;let r=n.getStartEndPoints(),o=new Map,i=null;if(r){let[s,a]=r;i=zn(),i.anchor.set(s.key,s.offset,s.type),i.focus.set(a.key,a.offset,a.type);let l=Wt(s.getNode(),wr),c=Wt(a.getNode(),wr);L(l)&&o.set(l.getKey(),l),L(c)&&o.set(c.getKey(),c)}for(let s of n.getNodes())if(L(s)&&wr(s))o.set(s.getKey(),s);else if(r===null){let a=Wt(s,wr);L(a)&&o.set(a.getKey(),a)}for(let[s,a]of o){let l=t();e(a,l),a.replace(l,!0),i&&(s===i.anchor.key&&i.anchor.set(l.getKey(),i.anchor.offset,i.anchor.type),s===i.focus.key&&i.focus.set(l.getKey(),i.focus.offset,i.focus.type))}i&&n.is(I())&&je(i)}function Yd(n){return n.getNode().isAttached()}function C_(n){let t=n;for(;t!==null&&!Le(t);){let e=t.getLatest(),r=t.getParent();e.getChildrenSize()===0&&t.remove(!0),t=r}}function S_(n,t,e=null){let r=n.getStartEndPoints(),o=r?r[0]:null,i=n.getNodes(),s=i.length;if(o!==null&&(s===0||s===1&&o.type===\"element\"&&o.getNode().getChildrenSize()===0)){let c=o.type===\"text\"?o.getNode().getParentOrThrow():o.getNode(),u=c.getChildren(),d=t();return d.setFormat(c.getFormatType()),d.setIndent(c.getIndent()),u.forEach(f=>d.append(f)),e&&(d=e.append(d)),void c.replace(d)}let a=null,l=[];for(let c=0;c<s;c++){let u=i[c];Le(u)?(ma(n,l,l.length,t,e),l=[],a=u):a===null||a!==null&&rd(u,a)?l.push(u):(ma(n,l,l.length,t,e),l=[u])}ma(n,l,l.length,t,e)}function ma(n,t,e,r,o=null){if(t.length===0)return;let i=t[0],s=new Map,a=[],l=L(i)?i:i.getParentOrThrow();l.isInline()&&(l=l.getParentOrThrow());let c=!1;for(;l!==null;){let g=l.getPreviousSibling();if(g!==null){l=g,c=!0;break}if(l=l.getParentOrThrow(),Le(l))break}let u=new Set;for(let g=0;g<e;g++){let p=t[g];L(p)&&p.getChildrenSize()===0&&u.add(p.getKey())}let d=new Set;for(let g=0;g<e;g++){let p=t[g],_=p.getParent();if(_!==null&&_.isInline()&&(_=_.getParent()),_!==null&&Rr(p)&&!d.has(p.getKey())){let x=_.getKey();if(s.get(x)===void 0){let y=r();y.setFormat(_.getFormatType()),y.setIndent(_.getIndent()),a.push(y),s.set(x,y),_.getChildren().forEach(N=>{y.append(N),d.add(N.getKey()),L(N)&&N.getChildrenKeys().forEach(S=>d.add(S))}),C_(_)}}else if(u.has(p.getKey())){L(p)||ya(179);let x=r();x.setFormat(p.getFormatType()),x.setIndent(p.getIndent()),a.push(x),p.remove(!0)}}if(o!==null)for(let g=0;g<a.length;g++){let p=a[g];o.append(p)}let f=null;if(Le(l))if(c)if(o!==null)l.insertAfter(o);else for(let g=a.length-1;g>=0;g--){let p=a[g];l.insertAfter(p)}else{let g=l.getFirstChild();if(L(g)&&(l=g),g===null)if(o)l.append(o);else for(let p=0;p<a.length;p++){let _=a[p];l.append(_),f=_}else if(o!==null)g.insertBefore(o);else for(let p=0;p<a.length;p++){let _=a[p];g.insertBefore(_),f=_}}else if(o)l.insertAfter(o);else for(let g=a.length-1;g>=0;g--){let p=a[g];l.insertAfter(p),f=p}let h=Dr();b(h)&&Yd(h.anchor)&&Yd(h.focus)?je(h.clone()):f!==null?f.selectEnd():n.dirty=!0}function Zd(n){let t=Qd(n);return t!==null&&t.writingMode===\"vertical-rl\"}function Qd(n){let t=n.anchor.getNode();return L(t)?xa(t):Na(t)}function E_(n,t){let e=Zd(n)?!t:t;Ca(n)&&(e=!e);let r=Wn(n.focus,e?\"previous\":\"next\");if(id(r))return!1;for(let o of qu(r)){if(br(o))return!o.origin.isInline();if(!L(o.origin)){if(ln(o.origin))return!0;break}}return!1}function ef(n,t,e,r){n.modify(t?\"extend\":\"move\",e,r)}function Ca(n){let t=Qd(n);return t!==null&&t.direction===\"rtl\"}function T_(n,t,e){let r=Ca(n),o;o=Zd(n)||r?!e:e,ef(n,t,o,\"character\")}function O_(n,t,e){let r=ci(n.getStyle());return r!==null&&r[t]||e}function M_(n,t,e=\"\"){let r=null,o=n.getNodes(),i=n.anchor,s=n.focus,a=n.isBackward(),l=a?s.offset:i.offset,c=a?s.getNode():i.getNode();if(b(n)&&n.isCollapsed()&&n.style!==\"\"){let u=ci(n.style);if(u!==null&&t in u)return u[t]}for(let u=0;u<o.length;u++){let d=o[u];if((u===0||l!==0||!d.is(c))&&z(d)){let f=O_(d,t,e);if(r===null)r=f;else if(r!==f){r=\"\";break}}}return r===null?e:r}var v_=jd;var Q=Sa,tf=Q.$addNodeStyle,Qx=Q.$cloneWithProperties,eN=Q.$copyBlockFormatIndent,tN=Q.$ensureForwardRangeSelection,nN=Q.$forEachSelectedTextNode,rN=Q.$getComputedStyleForElement,oN=Q.$getComputedStyleForParent,Ea=Q.$getSelectionStyleValueForProperty,iN=Q.$isAtNodeEnd,sN=Q.$isParentElementRTL,Ta=Q.$isParentRTL,aN=Q.$moveCaretSelection,Oa=Q.$moveCharacter,nf=Q.$patchStyleText,lN=Q.$selectAll,Ma=Q.$setBlocksType,va=Q.$shouldOverrideDefaultCharacterSelection,ui=Q.$sliceSelectedTextNodeContent,cN=Q.$trimTextContentFromAnchor,uN=Q.$wrapNodes,dN=Q.createDOMRange,rf=Q.createRectsFromDOMRange,fN=Q.getCSSFromStyleObject,Da=Q.getStyleObjectFromCSS,gN=Q.trimTextContentFromAnchor;var ka={};Fe(ka,{$descendantsMatching:()=>dm,$dfs:()=>j_,$dfsIterator:()=>pf,$filter:()=>sm,$findMatchingParent:()=>Wt,$firstToLastIterator:()=>fm,$getAdjacentCaret:()=>V_,$getAdjacentSiblingOrParentSiblingCaret:()=>an,$getDepth:()=>mf,$getNearestBlockElementAncestorOrThrow:()=>em,$getNearestNodeOfType:()=>Q_,$getNextRightPreorderNode:()=>Z_,$getNextSiblingOrParentSibling:()=>q_,$insertFirst:()=>am,$insertNodeToNearestRoot:()=>rm,$insertNodeToNearestRootAtCaret:()=>xf,$isEditorIsNestedEditor:()=>cm,$lastToFirstIterator:()=>Ra,$restoreEditorState:()=>nm,$reverseDfs:()=>X_,$reverseDfsIterator:()=>yf,$splitNode:()=>gd,$unwrapAndFilterDescendants:()=>um,$unwrapNode:()=>gm,$wrapNodeInElement:()=>om,CAN_USE_BEFORE_INPUT:()=>P_,CAN_USE_DOM:()=>ff,IS_ANDROID:()=>F_,IS_ANDROID_CHROME:()=>K_,IS_APPLE:()=>B_,IS_APPLE_WEBKIT:()=>W_,IS_CHROME:()=>z_,IS_FIREFOX:()=>gf,IS_IOS:()=>U_,IS_SAFARI:()=>H_,addClassNamesToElement:()=>Y_,calculateZoomLevel:()=>lm,isBlockDomNode:()=>Fd,isHTMLAnchorElement:()=>Bd,isHTMLElement:()=>ai,isInlineDomNode:()=>Fr,isMimeType:()=>hf,makeStateWrapper:()=>hm,markSelection:()=>df,mediaFileReader:()=>J_,mergeRegister:()=>cf,objectKlassEquals:()=>im,positionNodeOnRange:()=>uf,registerNestedElementResolver:()=>tm,removeClassNamesFromElement:()=>G_,selectionAlwaysOnDisplay:()=>w_});function di(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),r=new URLSearchParams;r.append(\"code\",n);for(let o of t)r.append(\"v\",o);throw e.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var Ve=typeof window<\"u\"&&window.document!==void 0&&window.document.createElement!==void 0,D_=Ve&&\"documentMode\"in document?document.documentMode:null,sf=Ve&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),A_=Ve&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),b_=!(!Ve||!(\"InputEvent\"in window)||D_)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),R_=Ve&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),k_=Ve&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,af=Ve&&/Android/.test(navigator.userAgent),ba=Ve&&/^(?=.*Chrome).*/i.test(navigator.userAgent),I_=Ve&&af&&ba,$_=Ve&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&sf&&!ba;function lf(...n){let t=[];for(let e of n)if(e&&typeof e==\"string\")for(let[r]of e.matchAll(/\\S+/g))t.push(r);return t}function cf(...n){return()=>{for(let t=n.length-1;t>=0;t--)n[t]();n.length=0}}function ot(n){return`${n}px`}var L_={attributes:!0,characterData:!0,childList:!0,subtree:!0};function uf(n,t,e){let r=null,o=null,i=null,s=[],a=document.createElement(\"div\");function l(){r===null&&di(182),o===null&&di(183);let{left:d,top:f}=o.getBoundingClientRect(),h=rf(n,t);var g,p;a.isConnected||(p=a,(g=o).insertBefore(p,g.firstChild));let _=!1;for(let x=0;x<h.length;x++){let y=h[x],N=s[x]||document.createElement(\"div\"),S=N.style;S.position!==\"absolute\"&&(S.position=\"absolute\",_=!0);let M=ot(y.left-d);S.left!==M&&(S.left=M,_=!0);let E=ot(y.top-f);S.top!==E&&(N.style.top=E,_=!0);let T=ot(y.width);S.width!==T&&(N.style.width=T,_=!0);let D=ot(y.height);S.height!==D&&(N.style.height=D,_=!0),N.parentNode!==a&&(a.append(N),_=!0),s[x]=N}for(;s.length>h.length;)s.pop();_&&e(s)}function c(){o=null,r=null,i!==null&&i.disconnect(),i=null,a.remove();for(let d of s)d.remove();s=[]}a.style.position=\"relative\";let u=n.registerRootListener(function d(){let f=n.getRootElement();if(f===null)return c();let h=f.parentElement;if(!ai(h))return c();c(),r=f,o=h,i=new MutationObserver(g=>{let p=n.getRootElement(),_=p&&p.parentElement;if(p!==r||_!==o)return d();for(let x of g)if(!a.contains(x.target))return l()}),i.observe(h,L_),l()});return()=>{u(),c()}}function of(n,t,e){if(n.type!==\"text\"&&L(t)){let r=t.getDOMSlot(e);return[r.element,r.getFirstChildOffset()+n.offset]}return[wd(e)||e,n.offset]}function df(n,t){let e=null,r=null,o=null,i=null,s=null,a=null,l=()=>{};function c(u){u.read(()=>{let d=I();if(!b(d))return e=null,o=null,i=null,a=null,l(),void(l=()=>{});let[f,h]=(function(D){let O=D.getStartEndPoints();return D.isBackward()?[O[1],O[0]]:O})(d),g=f.getNode(),p=g.getKey(),_=f.offset,x=h.getNode(),y=x.getKey(),N=h.offset,S=n.getElementByKey(p),M=n.getElementByKey(y),E=e===null||S!==r||_!==o||p!==e.getKey(),T=i===null||M!==s||N!==a||y!==i.getKey();if((E||T)&&S!==null&&M!==null){let D=(function(O,R,P,q,H,G,ee){let ie=(O._window?O._window.document:document).createRange();return ie.setStart(...of(R,P,q)),ie.setEnd(...of(H,G,ee)),ie})(n,f,g,S,h,x,M);l(),l=uf(n,D,O=>{if(t===void 0)for(let R of O){let P=R.style;P.background!==\"Highlight\"&&(P.background=\"Highlight\"),P.color!==\"HighlightText\"&&(P.color=\"HighlightText\"),P.marginTop!==ot(-1.5)&&(P.marginTop=ot(-1.5)),P.paddingTop!==ot(4)&&(P.paddingTop=ot(4)),P.paddingBottom!==ot(0)&&(P.paddingBottom=ot(0))}else t(O)})}e=g,r=S,o=_,i=x,s=M,a=N})}return c(n.getEditorState()),cf(n.registerUpdateListener(({editorState:u})=>c(u)),()=>{l()})}function w_(n){let t=null,e=()=>{let r=getSelection(),o=r&&r.anchorNode,i=n.getRootElement();o!==null&&i!==null&&i.contains(o)?t!==null&&(t(),t=null):t===null&&(t=df(n))};return document.addEventListener(\"selectionchange\",e),()=>{t!==null&&t(),document.removeEventListener(\"selectionchange\",e)}}var P_=b_,ff=Ve,F_=af,K_=I_,B_=sf,W_=$_,z_=ba,gf=A_,U_=k_,H_=R_;function Y_(n,...t){let e=lf(...t);e.length>0&&n.classList.add(...e)}function G_(n,...t){let e=lf(...t);e.length>0&&n.classList.remove(...e)}function hf(n,t){for(let e of t)if(n.type.startsWith(e))return!0;return!1}function J_(n,t){let e=n[Symbol.iterator]();return new Promise((r,o)=>{let i=[],s=()=>{let{done:a,value:l}=e.next();if(a)return r(i);let c=new FileReader;c.addEventListener(\"error\",o),c.addEventListener(\"load\",()=>{let u=c.result;typeof u==\"string\"&&i.push({file:l,result:u}),s()}),hf(l,t)?c.readAsDataURL(l):s()};s()})}function j_(n,t){return Array.from(pf(n,t))}function V_(n){return n?n.getAdjacentCaret():null}function X_(n,t){return Array.from(yf(n,t))}function pf(n,t){return _f(\"next\",n,t)}function _f(n,t,e){let r=Se(),o=t||r,i=L(o)?Je(o,n):Mt(o,n),s=mf(o),a=e?na(ia(Mt(e,n))):(function(c,u){let d=an(Mt(c,u));return d&&d[0]})(o,n),l=s;return ha({hasNext:c=>c!==null,initial:i,map:c=>({depth:l,node:c.origin}),step:c=>{if(c.isSameNodeCaret(a))return null;br(c)&&l++;let u=an(c);return!u||u[0].isSameNodeCaret(a)?null:(l+=u[1],u[0])}})}function q_(n){let t=an(Mt(n,\"next\"));return t&&[t[0].origin,t[1]]}function mf(n){let t=-1;for(let e=n;e!==null;e=e.getParent())t++;return t}function Z_(n){let t=ia(Mt(n,\"previous\")),e=an(t,\"root\");return e&&e[0].origin}function yf(n,t){return _f(\"previous\",n,t)}function Q_(n,t){let e=n;for(;e!=null;){if(e instanceof t)return e;e=e.getParent()}return null}function em(n){let t=Wt(n,e=>L(e)&&!e.isInline());return L(t)||di(4,n.__key),t}function tm(n,t,e,r){let o=i=>i instanceof t;return n.registerNodeTransform(t,i=>{let s=(a=>{let l=a.getChildren();for(let d=0;d<l.length;d++){let f=l[d];if(o(f))return null}let c=a,u=a;for(;c!==null;)if(u=c,c=c.getParent(),o(c))return{child:u,parent:c};return null})(i);if(s!==null){let{child:a,parent:l}=s;if(a.is(i)){r(l,i);let c=a.getNextSiblings(),u=c.length;if(l.insertAfter(a),u!==0){let d=e(l);a.insertAfter(d);for(let f=0;f<u;f++)d.append(c[f])}l.canBeEmpty()||l.getChildrenSize()!==0||l.remove()}}})}function nm(n,t){let e=new Map,r=n._pendingEditorState;for(let[i,s]of t._nodeMap)e.set(i,Io(s));r&&(r._nodeMap=e),n._dirtyType=2;let o=t._selection;je(o===null?null:o.clone())}function rm(n){let t=I()||Dr(),e;if(b(t))e=Wn(t.focus,\"next\");else{if(t!=null){let s=t.getNodes(),a=s[s.length-1];a&&(e=Mt(a,\"next\"))}e=e||Je(Se(),\"previous\").getFlipped().insert(re())}let r=xf(n,e),o=na(r),i=br(o)?kr(o):r;return ud(ed(i)),n.getLatest()}function xf(n,t,e){let r=oa(t,\"next\");for(let o=r;o;o=fd(o,e))r=o;return wo(r)&&di(283),r.insert(n.isInline()?re().append(n):n),oa(Mt(n.getLatest(),\"next\"),t.direction)}function om(n,t){let e=t();return n.replace(e),e.append(n),e}function im(n,t){return n!==null&&Object.getPrototypeOf(n).constructor.name===t.name}function sm(n,t){let e=[];for(let r=0;r<n.length;r++){let o=t(n[r]);o!==null&&e.push(o)}return e}function am(n,t){Je(n,\"next\").insert(t)}var Aa=!(gf||!ff)&&void 0;function lm(n){let t=1;if((function(){if(Aa===void 0){let e=document.createElement(\"div\");e.style.cssText=\"position: absolute; opacity: 0; width: 100px; left: -1000px;\",document.body.appendChild(e);let r=e.getBoundingClientRect();e.style.setProperty(\"zoom\",\"2\"),Aa=e.getBoundingClientRect().width===r.width,document.body.removeChild(e)}return Aa})())for(;n;)t*=Number(window.getComputedStyle(n).getPropertyValue(\"zoom\")),n=n.parentElement;return t}function cm(n){return n._parentEditor!==null}function um(n,t){return Nf(n,t,null)}function Nf(n,t,e){let r=!1;for(let o of Ra(n))t(o)?e!==null&&e(o):(r=!0,L(o)&&Nf(o,t,e||(i=>o.insertAfter(i))),o.remove());return r}function dm(n,t){let e=[],r=Array.from(n).reverse();for(let o=r.pop();o!==void 0;o=r.pop())if(t(o))e.push(o);else if(L(o))for(let i of Ra(o))r.push(i);return e}function fm(n){return Cf(Je(n,\"next\"))}function Ra(n){return Cf(Je(n,\"previous\"))}function Cf(n){return ha({hasNext:ad,initial:n.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function gm(n){cd(Mt(n,\"next\")).splice(1,n.getChildren())}function hm(n){let t=r=>nd(r,n),e=(r,o)=>dd(r,n,o);return{$get:t,$set:e,accessors:[t,e],makeGetterMethod:()=>function(){return t(this)},makeSetterMethod:()=>function(r){return e(this,r)},stateConfig:n}}var F=ka,yN=F.$descendantsMatching,xN=F.$dfs,NN=F.$dfsIterator,Sf=F.$filter,we=F.$findMatchingParent,CN=F.$firstToLastIterator,SN=F.$getAdjacentCaret,EN=F.$getAdjacentSiblingOrParentSiblingCaret,TN=F.$getDepth,Kr=F.$getNearestBlockElementAncestorOrThrow,Ef=F.$getNearestNodeOfType,ON=F.$getNextRightPreorderNode,MN=F.$getNextSiblingOrParentSibling,vN=F.$insertFirst,DN=F.$insertNodeToNearestRoot,AN=F.$insertNodeToNearestRootAtCaret,bN=F.$isEditorIsNestedEditor,RN=F.$lastToFirstIterator,kN=F.$restoreEditorState,IN=F.$reverseDfs,$N=F.$reverseDfsIterator,LN=F.$splitNode,wN=F.$unwrapAndFilterDescendants,PN=F.$unwrapNode,FN=F.$wrapNodeInElement,KN=F.CAN_USE_BEFORE_INPUT,BN=F.CAN_USE_DOM,WN=F.IS_ANDROID,zN=F.IS_ANDROID_CHROME,UN=F.IS_APPLE,HN=F.IS_APPLE_WEBKIT,YN=F.IS_CHROME,GN=F.IS_FIREFOX,JN=F.IS_IOS,jN=F.IS_SAFARI,Xe=F.addClassNamesToElement,Tf=F.calculateZoomLevel,Ia=F.isBlockDomNode,fi=F.isHTMLAnchorElement,Pe=F.isHTMLElement,VN=F.isInlineDomNode,XN=F.isMimeType,qN=F.makeStateWrapper,ZN=F.markSelection,QN=F.mediaFileReader,me=F.mergeRegister,qe=F.objectKlassEquals,eC=F.positionNodeOnRange,tC=F.registerNestedElementResolver,Br=F.removeClassNamesFromElement,nC=F.selectionAlwaysOnDisplay;var Ja={};Fe(Ja,{$createHorizontalRuleNode:()=>Ga,$isHorizontalRuleNode:()=>Uf,AutoFocusExtension:()=>mm,ClearEditorExtension:()=>ym,EditorStateExtension:()=>_i,HorizontalRuleExtension:()=>bm,HorizontalRuleNode:()=>hn,INSERT_HORIZONTAL_RULE_COMMAND:()=>Dm,InitialStateExtension:()=>Wf,LexicalBuilder:()=>Vn,NodeSelectionExtension:()=>za,TabIndentationExtension:()=>Rm,batch:()=>bf,buildEditorFromExtensions:()=>Em,computed:()=>If,configExtension:()=>oi,declarePeerDependency:()=>Ld,defineExtension:()=>ne,effect:()=>Yt,getExtensionDependencyFromEditor:()=>Om,getKnownTypesAndNodes:()=>xm,getPeerDependencyFromEditor:()=>zf,getPeerDependencyFromEditorOrThrow:()=>Mm,namedSignals:()=>yi,registerClearEditor:()=>wf,registerTabIndentation:()=>Hf,safeCast:()=>Te,shallowMergeConfig:()=>Ut,signal:()=>jn,untracked:()=>Fa,watchedSignal:()=>Ha});var pm=Symbol.for(\"preact-signals\");function mi(){if(Ht>1)return void Ht--;let n,t=!1;for(;zr!==void 0;){let e=zr;for(zr=void 0,Ka++;e!==void 0;){let r=e.o;if(e.o=void 0,e.f&=-3,!(8&e.f)&&Rf(e))try{e.c()}catch(o){t||(n=o,t=!0)}e=r}}if(Ka=0,Ht--,t)throw n}function bf(n){if(Ht>0)return n();Ht++;try{return n()}finally{mi()}}var V,zr;function Fa(n){let t=V;V=void 0;try{return n()}finally{V=t}}var Ht=0,Ka=0,pi=0;function Of(n){if(V===void 0)return;let t=n.n;return t===void 0||t.t!==V?(t={i:0,S:n,p:V.s,n:void 0,t:V,e:void 0,x:void 0,r:t},V.s!==void 0&&(V.s.n=t),V.s=t,n.n=t,32&V.f&&n.S(t),t):t.i===-1?(t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=V.s,t.n=void 0,V.s.n=t,V.s=t),t):void 0}function Oe(n,t){this.v=n,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function jn(n,t){return new Oe(n,t)}function Rf(n){for(let t=n.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Mf(n){for(let t=n.s;t!==void 0;t=t.n){let e=t.S.n;if(e!==void 0&&(t.r=e),t.S.n=t,t.i=-1,t.n===void 0){n.s=t;break}}}function kf(n){let t,e=n.s;for(;e!==void 0;){let r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):t=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}n.s=t}function gn(n,t){Oe.call(this,void 0),this.x=n,this.s=void 0,this.g=pi-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function If(n,t){return new gn(n,t)}function $f(n){let t=n.u;if(n.u=void 0,typeof t==\"function\"){Ht++;let e=V;V=void 0;try{t()}catch(r){throw n.f&=-2,n.f|=8,Ua(n),r}finally{V=e,mi()}}}function Ua(n){for(let t=n.s;t!==void 0;t=t.n)t.S.U(t);n.x=void 0,n.s=void 0,$f(n)}function _m(n){if(V!==this)throw new Error(\"Out-of-order effect\");kf(this),V=n,this.f&=-2,8&this.f&&Ua(this),mi()}function Jn(n,t){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}function Yt(n,t){let e=new Jn(n,t);try{e.c()}catch(o){throw e.d(),o}let r=e.d.bind(e);return r[Symbol.dispose]=r,r}function yi(n,t={}){let e={};for(let r in n){let o=t[r],i=jn(o===void 0?n[r]:o);e[r]=i}return e}Oe.prototype.brand=pm,Oe.prototype.h=function(){return!0},Oe.prototype.S=function(n){let t=this.t;t!==n&&n.e===void 0&&(n.x=t,this.t=n,t!==void 0?t.e=n:Fa(()=>{var e;(e=this.W)==null||e.call(this)}))},Oe.prototype.U=function(n){if(this.t!==void 0){let t=n.e,e=n.x;t!==void 0&&(t.x=e,n.e=void 0),e!==void 0&&(e.e=t,n.x=void 0),n===this.t&&(this.t=e,e===void 0&&Fa(()=>{var r;(r=this.Z)==null||r.call(this)}))}},Oe.prototype.subscribe=function(n){return Yt(()=>{let t=this.value,e=V;V=void 0;try{n(t)}finally{V=e}},{name:\"sub\"})},Oe.prototype.valueOf=function(){return this.value},Oe.prototype.toString=function(){return this.value+\"\"},Oe.prototype.toJSON=function(){return this.value},Oe.prototype.peek=function(){let n=V;V=void 0;try{return this.value}finally{V=n}},Object.defineProperty(Oe.prototype,\"value\",{get(){let n=Of(this);return n!==void 0&&(n.i=this.i),this.v},set(n){if(n!==this.v){if(Ka>100)throw new Error(\"Cycle detected\");this.v=n,this.i++,pi++,Ht++;try{for(let t=this.t;t!==void 0;t=t.x)t.t.N()}finally{mi()}}}}),gn.prototype=new Oe,gn.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===pi))return!0;if(this.g=pi,this.f|=1,this.i>0&&!Rf(this))return this.f&=-2,!0;let n=V;try{Mf(this),V=this;let t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return V=n,kf(this),this.f&=-2,!0},gn.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(let t=this.s;t!==void 0;t=t.n)t.S.S(t)}Oe.prototype.S.call(this,n)},gn.prototype.U=function(n){if(this.t!==void 0&&(Oe.prototype.U.call(this,n),this.t===void 0)){this.f&=-33;for(let t=this.s;t!==void 0;t=t.n)t.S.U(t)}},gn.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let n=this.t;n!==void 0;n=n.x)n.t.N()}},Object.defineProperty(gn.prototype,\"value\",{get(){if(1&this.f)throw new Error(\"Cycle detected\");let n=Of(this);if(this.h(),n!==void 0&&(n.i=this.i),16&this.f)throw this.v;return this.v}}),Jn.prototype.c=function(){let n=this.S();try{if(8&this.f||this.x===void 0)return;let t=this.x();typeof t==\"function\"&&(this.u=t)}finally{n()}},Jn.prototype.S=function(){if(1&this.f)throw new Error(\"Cycle detected\");this.f|=1,this.f&=-9,$f(this),Mf(this),Ht++;let n=V;return V=this,_m.bind(this,n)},Jn.prototype.N=function(){2&this.f||(this.f|=2,this.o=zr,zr=this)},Jn.prototype.d=function(){this.f|=8,1&this.f||Ua(this)},Jn.prototype.dispose=function(){this.d()};var mm=ne({build:(n,t,e)=>yi(t),config:Te({defaultSelection:\"rootEnd\",disabled:!1}),name:\"@lexical/extension/AutoFocus\",register(n,t,e){let r=e.getOutput();return Yt(()=>r.disabled.value?void 0:n.registerRootListener(o=>{n.focus(()=>{let i=document.activeElement;o===null||i!==null&&o.contains(i)||o.focus({preventScroll:!0})},{defaultSelection:r.defaultSelection.peek()})}))}});function Lf(){let n=Se(),t=I(),e=re();n.clear(),n.append(e),t!==null&&e.select(),b(t)&&(t.format=0)}function wf(n,t=Lf){return n.registerCommand(Fo,e=>(n.update(t),!0),B)}var ym=ne({build:(n,t,e)=>yi(t),config:Te({$onClear:Lf}),name:\"@lexical/extension/ClearEditor\",register(n,t,e){let{$onClear:r}=e.getOutput();return Yt(()=>wf(n,r.value))}});function xm(n){let t=new Set,e=new Set;for(let r of Pf(n)){let o=typeof r==\"function\"?r:r.replace;t.add(o.getType()),e.add(o)}return{nodes:e,types:t}}function Pf(n){return(typeof n.nodes==\"function\"?n.nodes():n.nodes)||[]}function Ha(n,t){let e;return jn(n(),{unwatched(){e&&(e(),e=void 0)},watched(){this.value=n(),e=t(this)}})}var _i=ne({build:n=>Ha(()=>n.getEditorState(),t=>n.registerUpdateListener(e=>{t.value=e.editorState})),name:\"@lexical/extension/EditorState\"});function X(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),r=new URLSearchParams;r.append(\"code\",n);for(let o of t)r.append(\"v\",o);throw e.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Ff(n,t){if(n&&t&&!Array.isArray(t)&&typeof n==\"object\"&&typeof t==\"object\"){let e=n,r=t;for(let o in r)e[o]=Ff(e[o],r[o]);return n}return t}var Ya=0,Ba=1,Kf=2,$a=3,gi=4,Gn=5,La=6,Wr=7;function wa(n){return n.id===Ya}function Bf(n){return n.id===Kf}function Nm(n){return(function(t){return t.id===Ba})(n)||X(305,String(n.id),String(Ba)),Object.assign(n,{id:Kf})}var Cm=new Set,Wa=class{constructor(t,e){C(this,\"builder\");C(this,\"configs\");C(this,\"_dependency\");C(this,\"_peerNameSet\");C(this,\"extension\");C(this,\"state\");C(this,\"_signal\");this.builder=t,this.extension=e,this.configs=new Set,this.state={id:Ya}}mergeConfigs(){let t=this.extension.config||{},e=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):Ut;for(let r of this.configs)t=e(t,r);return t}init(t){let e=this.state;Bf(e)||X(306,String(e.id));let r={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},o={...r,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},i=(function(a,l,c){return Object.assign(a,{config:l,id:$a,registerState:c})})(e,this.mergeConfigs(),r),s;this.state=i,this.extension.init&&(s=this.extension.init(t,i.config,r)),this.state=(function(a,l,c){return Object.assign(a,{id:gi,initResult:l,registerState:c})})(i,s,o)}build(t){let e=this.state,r;e.id!==gi&&X(307,String(e.id),String(Gn)),this.extension.build&&(r=this.extension.build(t,e.config,e.registerState));let o={...e.registerState,getOutput:()=>r,getSignal:this.getSignal.bind(this)};this.state=(function(i,s,a){return Object.assign(i,{id:Gn,output:s,registerState:a})})(e,r,o)}register(t,e){this._signal=e;let r=this.state;r.id!==Gn&&X(308,String(r.id),String(Gn));let o=this.extension.register&&this.extension.register(t,r.config,r.registerState);return this.state=(function(i){return Object.assign(i,{id:La})})(r),()=>{let i=this.state;i.id!==Wr&&X(309,String(r.id),String(Wr)),this.state=(function(s){return Object.assign(s,{id:Gn})})(i),o&&o()}}afterRegistration(t){let e=this.state,r;return e.id!==La&&X(310,String(e.id),String(La)),this.extension.afterRegistration&&(r=this.extension.afterRegistration(t,e.config,e.registerState)),this.state=(function(o){return Object.assign(o,{id:Wr})})(e),r}getSignal(){return this._signal===void 0&&X(311),this._signal}getInitResult(){this.extension.init===void 0&&X(312,this.extension.name);let t=this.state;return(function(e){return e.id>=gi})(t)||X(313,String(t.id),String(gi)),t.initResult}getInitPeer(t){let e=this.builder.extensionNameMap.get(t);return e?e.getExtensionInitDependency():void 0}getExtensionInitDependency(){let t=this.state;return(function(e){return e.id>=$a})(t)||X(314,String(t.id),String($a)),{config:t.config}}getPeer(t){let e=this.builder.extensionNameMap.get(t);return e?e.getExtensionDependency():void 0}getInitDependency(t){let e=this.builder.getExtensionRep(t);return e===void 0&&X(315,this.extension.name,t.name),e.getExtensionInitDependency()}getDependency(t){let e=this.builder.getExtensionRep(t);return e===void 0&&X(315,this.extension.name,t.name),e.getExtensionDependency()}getState(){let t=this.state;return(function(e){return e.id>=Wr})(t)||X(316,String(t.id),String(Wr)),t}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||Cm}getPeerNameSet(){let t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(([e])=>e)),this._peerNameSet=t),t}getExtensionDependency(){if(!this._dependency){let t=this.state;(function(e){return e.id>=Gn})(t)||X(317,this.extension.name),this._dependency={config:t.config,init:t.initResult,output:t.output}}return this._dependency}},vf={tag:Go};function Sm(){let n=Se();n.isEmpty()&&n.append(re())}var Wf=ne({config:Te({setOptions:vf,updateOptions:vf}),init:({$initialEditorState:n=Sm})=>({$initialEditorState:n,initialized:!1}),afterRegistration(n,{updateOptions:t,setOptions:e},r){let o=r.getInitResult();if(!o.initialized){o.initialized=!0;let{$initialEditorState:i}=o;if(od(i))n.setEditorState(i,e);else if(typeof i==\"function\")n.update(()=>{i(n)},t);else if(i&&(typeof i==\"string\"||typeof i==\"object\")){let s=n.parseEditorState(i);n.setEditorState(s,e)}}return()=>{}},name:\"@lexical/extension/InitialState\",nodes:[Rd,Hn,vd,$d,Ad]}),Df=Symbol.for(\"@lexical/extension/LexicalBuilder\");function Em(...n){return Vn.fromExtensions(n).buildEditor()}function Af(){}function Tm(n){throw n}function hi(n){return Array.isArray(n)?n:[n]}var Pa=\"0.38.2+prod.esm\",Vn=class n{constructor(t){C(this,\"roots\");C(this,\"extensionNameMap\");C(this,\"outgoingConfigEdges\");C(this,\"incomingEdges\");C(this,\"conflicts\");C(this,\"_sortedExtensionReps\");C(this,\"PACKAGE_VERSION\");this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=Pa,this.roots=t;for(let e of t)this.addExtension(e)}static fromExtensions(t){let e=[hi(Wf)];for(let r of t)e.push(hi(r));return new n(e)}static maybeFromEditor(t){let e=t[Df];return e&&(e.PACKAGE_VERSION!==Pa&&X(292,e.PACKAGE_VERSION,Pa),e instanceof n||X(293)),e}static fromEditor(t){let e=n.maybeFromEditor(t);return e===void 0&&X(294),e}constructEditor(){let{$initialEditorState:t,onError:e,...r}=this.buildCreateEditorArgs(),o=Object.assign(ii({...r,...e?{onError:i=>{e(i,o)}}:{}}),{[Df]:this});for(let i of this.sortedExtensionReps())i.build(o);return o}buildEditor(){let t=Af;function e(){try{t()}finally{t=Af}}let r=Object.assign(this.constructEditor(),{dispose:e,[Symbol.dispose]:e});return t=me(this.registerEditor(r),()=>r.setRootElement(null)),r}hasExtensionByName(t){return this.extensionNameMap.has(t)}getExtensionRep(t){let e=this.extensionNameMap.get(t.name);if(e)return e.extension!==t&&X(295,t.name),e}addEdge(t,e,r){let o=this.outgoingConfigEdges.get(t);o?o.set(e,r):this.outgoingConfigEdges.set(t,new Map([[e,r]]));let i=this.incomingEdges.get(e);i?i.add(t):this.incomingEdges.set(e,new Set([t]))}addExtension(t){this._sortedExtensionReps!==void 0&&X(296);let e=hi(t),[r]=e;typeof r.name!=\"string\"&&X(297,typeof r.name);let o=this.extensionNameMap.get(r.name);if(o!==void 0&&o.extension!==r&&X(298,r.name),!o){o=new Wa(this,r),this.extensionNameMap.set(r.name,o);let i=this.conflicts.get(r.name);typeof i==\"string\"&&X(299,r.name,i);for(let s of r.conflictsWith||[])this.extensionNameMap.has(s)&&X(299,r.name,s),this.conflicts.set(s,r.name);for(let s of r.dependencies||[]){let a=hi(s);this.addEdge(r.name,a[0].name,a.slice(1)),this.addExtension(a)}for(let[s,a]of r.peerDependencies||[])this.addEdge(r.name,s,a?[a]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let t=[],e=(r,o)=>{let i=r.state;if(Bf(i))return;let s=r.extension.name;var a;wa(i)||X(300,s,o||\"[unknown]\"),wa(a=i)||X(304,String(a.id),String(Ya)),i=Object.assign(a,{id:Ba}),r.state=i;let l=this.outgoingConfigEdges.get(s);if(l)for(let c of l.keys()){let u=this.extensionNameMap.get(c);u&&e(u,s)}i=Nm(i),r.state=i,t.push(r)};for(let r of this.extensionNameMap.values())wa(r.state)&&e(r);for(let r of t)for(let[o,i]of this.outgoingConfigEdges.get(r.extension.name)||[])if(i.length>0){let s=this.extensionNameMap.get(o);if(s)for(let a of i)s.configs.add(a)}for(let[r,...o]of this.roots)if(o.length>0){let i=this.extensionNameMap.get(r.name);i===void 0&&X(301,r.name);for(let s of o)i.configs.add(s)}return this._sortedExtensionReps=t,this._sortedExtensionReps}registerEditor(t){let e=this.sortedExtensionReps(),r=new AbortController,o=[()=>r.abort()],i=r.signal;for(let s of e){let a=s.register(t,i);a&&o.push(a)}for(let s of e){let a=s.afterRegistration(t);a&&o.push(a)}return me(...o)}buildCreateEditorArgs(){let t={},e=new Set,r=new Map,o=new Map,i={},s={},a=this.sortedExtensionReps();for(let u of a){let{extension:d}=u;if(d.onError!==void 0&&(t.onError=d.onError),d.disableEvents!==void 0&&(t.disableEvents=d.disableEvents),d.parentEditor!==void 0&&(t.parentEditor=d.parentEditor),d.editable!==void 0&&(t.editable=d.editable),d.namespace!==void 0&&(t.namespace=d.namespace),d.$initialEditorState!==void 0&&(t.$initialEditorState=d.$initialEditorState),d.nodes)for(let f of Pf(d)){if(typeof f!=\"function\"){let h=r.get(f.replace);h&&X(302,d.name,f.replace.name,h.extension.name),r.set(f.replace,u)}e.add(f)}if(d.html){if(d.html.export)for(let[f,h]of d.html.export.entries())o.set(f,h);d.html.import&&Object.assign(i,d.html.import)}d.theme&&Ff(s,d.theme)}Object.keys(s).length>0&&(t.theme=s),e.size&&(t.nodes=[...e]);let l=Object.keys(i).length>0,c=o.size>0;(l||c)&&(t.html={},l&&(t.html.import=i),c&&(t.html.export=o));for(let u of a)u.init(t);return t.onError||(t.onError=Tm),t}};function Om(n,t){let e=Vn.fromEditor(n).getExtensionRep(t);return e===void 0&&X(303,t.name),e.getExtensionDependency()}function zf(n,t){let e=Vn.fromEditor(n).extensionNameMap.get(t);return e?e.getExtensionDependency():void 0}function Mm(n,t){let e=zf(n,t);return e===void 0&&X(291,t),e}var vm=new Set,za=ne({build(n,t,e){let r=e.getDependency(_i).output,o=jn({watchedNodeKeys:new Map}),i=Ha(()=>{},()=>Yt(()=>{let s=i.peek(),{watchedNodeKeys:a}=o.value,l,c=!1;r.value.read(()=>{if(I())for(let[u,d]of a.entries()){if(d.size===0){a.delete(u);continue}let f=zt(u),h=f&&f.isSelected()||!1;c=c||h!==(!!s&&s.has(u)),h&&(l=l||new Set,l.add(u))}}),!c&&l&&s&&l.size===s.size||(i.value=l)}));return{watchNodeKey:function(s){let a=If(()=>(i.value||vm).has(s)),{watchedNodeKeys:l}=o.peek(),c=l.get(s),u=c!==void 0;return c=c||new Set,c.add(a),u||(l.set(s,c),o.value={watchedNodeKeys:l}),a}}},dependencies:[_i],name:\"@lexical/extension/NodeSelection\"}),Dm=Ee(\"INSERT_HORIZONTAL_RULE_COMMAND\"),hn=class n extends Ir{static getType(){return\"horizontalrule\"}static clone(t){return new n(t.__key)}static importJSON(t){return Ga().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:Am,priority:0})}}exportDOM(){return{element:document.createElement(\"hr\")}}createDOM(t){let e=document.createElement(\"hr\");return Xe(e,t.theme.hr),e}getTextContent(){return`\n`}isInline(){return!1}updateDOM(){return!1}};function Am(){return{node:Ga()}}function Ga(){return Vu(hn)}function Uf(n){return n instanceof hn}var bm=ne({dependencies:[_i,za],name:\"@lexical/extension/HorizontalRule\",nodes:[hn],register(n,t,e){let{watchNodeKey:r}=e.getDependency(za).output,o=jn({nodeSelections:new Map}),i=n._config.theme.hrSelected??\"selected\";return me(n.registerCommand(Ko,s=>{if(Yn(s.target)){let a=td(s.target);if(Uf(a))return(function(l,c=!1){let u=I(),d=l.isSelected(),f=l.getKey(),h;c&&_e(u)?h=u:(h=Xu(),je(h)),d?h.delete(f):h.add(f)})(a,s.shiftKey),!0}return!1},pe),n.registerMutationListener(hn,(s,a)=>{bf(()=>{let l=!1,{nodeSelections:c}=o.peek();for(let[u,d]of s.entries())if(d===\"destroyed\")c.delete(u),l=!0;else{let f=c.get(u),h=n.getElementByKey(u);f?f.domNode.value=h:(l=!0,c.set(u,{domNode:jn(h),selectedSignal:r(u)}))}l&&(o.value={nodeSelections:c})})}),Yt(()=>{let s=[];for(let{domNode:a,selectedSignal:l}of o.value.nodeSelections.values())s.push(Yt(()=>{let c=a.value;c&&(l.value?Xe(c,i):Br(c,i))}));return me(...s)}))}});function Hf(n,t){return me(n.registerCommand(ei,e=>{let r=I();if(!b(r))return!1;e.preventDefault();let o=(function(i){let s=i.getNodes();if(Sf(s,f=>Un(f)&&f.canIndent()?f:null).length>0)return!0;let a=i.anchor,l=i.focus,c=l.isBefore(a)?l:a,u=c.getNode(),d=Kr(u);if(d.canIndent()){let f=d.getKey(),h=zn();if(h.anchor.set(f,0,\"element\"),h.focus.set(f,0,\"element\"),h=un(h),h.anchor.is(c))return!0}return!1})(r)?e.shiftKey?Pr:$r:Jo;return n.dispatchCommand(o,void 0)},B),n.registerCommand($r,()=>{let e=typeof t==\"number\"?t:t?t.peek():null;if(e==null)return!1;let r=I();if(!b(r))return!1;let o=r.getNodes().map(i=>Kr(i).getIndent());return Math.max(...o)+1>=e},Bo))}var Rm=ne({build:(n,t,e)=>yi(t),config:Te({disabled:!1,maxIndent:null}),name:\"@lexical/extension/TabIndentation\",register(n,t,e){let{disabled:r,maxIndent:o}=e.getOutput();return Yt(()=>{if(!r.value)return Hf(n,o)})}});var J=Ja,lC=J.$createHorizontalRuleNode,cC=J.$isHorizontalRuleNode,uC=J.AutoFocusExtension,dC=J.ClearEditorExtension,fC=J.EditorStateExtension,gC=J.HorizontalRuleExtension,hC=J.HorizontalRuleNode,pC=J.INSERT_HORIZONTAL_RULE_COMMAND,_C=J.InitialStateExtension,mC=J.LexicalBuilder,yC=J.NodeSelectionExtension,xC=J.TabIndentationExtension,Yf=J.batch,NC=J.buildEditorFromExtensions,CC=J.computed,SC=J.configExtension,EC=J.declarePeerDependency,TC=J.defineExtension,it=J.effect,OC=J.getExtensionDependencyFromEditor,MC=J.getKnownTypesAndNodes,Gf=J.getPeerDependencyFromEditor,vC=J.getPeerDependencyFromEditorOrThrow,vt=J.namedSignals,DC=J.registerClearEditor,AC=J.registerTabIndentation,bC=J.safeCast,RC=J.shallowMergeConfig,kC=J.signal,IC=J.untracked,$C=J.watchedSignal;var ja={};Fe(ja,{HistoryExtension:()=>xi,SharedHistoryExtension:()=>$m,createEmptyHistoryState:()=>Vf,registerHistory:()=>jf});function km(n,t,e,r,o){if(n===null||e.size===0&&r.size===0&&!o)return 0;let i=t._selection,s=n._selection;if(o)return 1;if(!(b(i)&&b(s)&&s.isCollapsed()&&i.isCollapsed()))return 0;let a=(function(x,y,N){let S=x._nodeMap,M=[];for(let E of y){let T=S.get(E);T!==void 0&&M.push(T)}for(let[E,T]of N){if(!T)continue;let D=S.get(E);D===void 0||cn(D)||M.push(D)}return M})(t,e,r);if(a.length===0)return 0;if(a.length>1){let x=t._nodeMap,y=x.get(i.anchor.key),N=x.get(s.anchor.key);return y&&N&&!n._nodeMap.has(y.__key)&&z(y)&&y.__text.length===1&&i.anchor.offset===1?2:0}let l=a[0],c=n._nodeMap.get(l.__key);if(!z(c)||!z(l)||c.__mode!==l.__mode)return 0;let u=c.__text,d=l.__text;if(u===d)return 0;let f=i.anchor,h=s.anchor;if(f.key!==h.key||f.type!==\"text\")return 0;let g=f.offset,p=h.offset,_=d.length-u.length;return _===1&&p===g-1?2:_===-1&&p===g+1?3:_===-1&&p===g?4:0}function Im(n,t){let e=Date.now(),r=0;return(o,i,s,a,l,c)=>{let u=Date.now();if(c.has(Yo))return r=0,e=u,2;let d=km(o,i,a,l,n.isComposing()),f=(()=>{let h=s===null||s.editor===n,g=c.has(Ed);if(!g&&h&&c.has(Go))return 0;if(o===null)return 1;let p=i._selection;if(!(a.size>0||l.size>0))return p!==null?0:2;let _=typeof t==\"number\"?t:t.peek();return g===!1&&d!==0&&d===r&&u<e+_&&h||a.size===1&&(function(x,y,N){let S=y._nodeMap.get(x),M=N._nodeMap.get(x),E=y._selection,T=N._selection;return!(b(E)&&b(T)&&E.anchor.type===\"element\"&&E.focus.type===\"element\"&&T.anchor.type===\"text\"&&T.focus.type===\"text\"||!z(S)||!z(M)||S.__parent!==M.__parent)&&JSON.stringify(y.read(()=>S.exportJSON()))===JSON.stringify(N.read(()=>M.exportJSON()))})(Array.from(a)[0],o,i)?0:1})();return e=u,r=d,f}}function Jf(n){n.undoStack=[],n.redoStack=[],n.current=null}function jf(n,t,e){let r=Im(n,e);return me(n.registerCommand(ri,()=>((function(i,s){let a=s.redoStack,l=s.undoStack;if(l.length!==0){let c=s.current,u=l.pop();c!==null&&(a.push(c),i.dispatchCommand(dn,!0)),l.length===0&&i.dispatchCommand(fn,!1),s.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:Yo})}})(n,t),!0),B),n.registerCommand(ni,()=>((function(i,s){let a=s.redoStack,l=s.undoStack;if(a.length!==0){let c=s.current;c!==null&&(l.push(c),i.dispatchCommand(fn,!0));let u=a.pop();a.length===0&&i.dispatchCommand(dn,!1),s.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:Yo})}})(n,t),!0),B),n.registerCommand(Fo,()=>(Jf(t),!1),B),n.registerCommand(hd,()=>(Jf(t),n.dispatchCommand(dn,!1),n.dispatchCommand(fn,!1),!0),B),n.registerUpdateListener(({editorState:i,prevEditorState:s,dirtyLeaves:a,dirtyElements:l,tags:c})=>{let u=t.current,d=t.redoStack,f=t.undoStack,h=u===null?null:u.editorState;if(u!==null&&i===h)return;let g=r(s,i,u,a,l,c);if(g===1)d.length!==0&&(t.redoStack=[],n.dispatchCommand(dn,!1)),u!==null&&(f.push({...u}),n.dispatchCommand(fn,!0));else if(g===2)return;t.current={editor:n,editorState:i}}))}function Vf(){return{current:null,redoStack:[],undoStack:[]}}var xi=ne({build:(n,{delay:t,createInitialHistoryState:e,disabled:r})=>vt({delay:t,disabled:r,historyState:e(n)}),config:Te({createInitialHistoryState:Vf,delay:300,disabled:typeof window>\"u\"}),name:\"@lexical/history/History\",register:(n,t,e)=>{let r=e.getOutput();return it(()=>r.disabled.value?void 0:jf(n,r.historyState.value,r.delay))}}),$m=ne({dependencies:[oi(xi,{createInitialHistoryState:()=>{throw new Error(\"SharedHistory did not inherit parent history\")},disabled:!0})],name:\"@lexical/history/SharedHistory\",register(n,t,e){let{output:r}=e.getDependency(xi),o=(function(s){return s?Gf(s,xi.name):null})(n._parentEditor);if(!o)return()=>{};let i=o.output;return it(()=>Yf(()=>{r.delay.value=i.delay.value,r.historyState.value=i.historyState.value,r.disabled.value=i.disabled.value}))}});var Ni=ja,KC=Ni.HistoryExtension,BC=Ni.SharedHistoryExtension,Xf=Ni.createEmptyHistoryState,qf=Ni.registerHistory;var Va={};Fe(Va,{$generateHtmlFromNodes:()=>wm,$generateNodesFromDOM:()=>Lm});function Lm(n,t){let e=Kd(t)?t.body.childNodes:t.childNodes,r=[],o=[];for(let i of e)if(!Qf.has(i.nodeName)){let s=eg(i,n,o,!1);s!==null&&(r=r.concat(s))}return(function(i){for(let s of i)s.getNextSibling()instanceof ca&&s.insertAfter(ta());for(let s of i){let a=s.getChildren();for(let l of a)s.insertBefore(l);s.remove()}})(o),r}function wm(n,t){if(typeof document>\"u\"||typeof window>\"u\"&&global.window===void 0)throw new Error(\"To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.\");let e=document.createElement(\"div\"),r=Se().getChildren();for(let o=0;o<r.length;o++)Zf(n,r[o],e,t);return e.innerHTML}function Zf(n,t,e,r=null){let o=r===null||t.isSelected(r),i=L(t)&&t.excludeFromCopy(\"html\"),s=t;r!==null&&z(t)&&(s=ui(r,t,\"clone\"));let a=L(s)?s.getChildren():[],l=Pd(n,s.getType()),c;c=l&&l.exportDOM!==void 0?l.exportDOM(n,s):s.exportDOM(n);let{element:u,after:d}=c;if(!u)return!1;let f=document.createDocumentFragment();for(let h=0;h<a.length;h++){let g=a[h],p=Zf(n,g,f,r);!o&&L(t)&&p&&t.extractWithChild(g,r,\"html\")&&(o=!0)}if(o&&!i){if((Pe(u)||ga(u))&&u.append(f),e.append(u),d){let h=d.call(s,u);h&&(ga(u)?u.replaceChildren(h):u.replaceWith(h))}}else e.append(f);return o}var Qf=new Set([\"STYLE\",\"SCRIPT\"]);function eg(n,t,e,r,o=new Map,i){let s=[];if(Qf.has(n.nodeName))return s;let a=null,l=(function(g,p){let{nodeName:_}=g,x=p._htmlConversions.get(_.toLowerCase()),y=null;if(x!==void 0)for(let N of x){let S=N(g);S!==null&&(y===null||(y.priority||0)<=(S.priority||0))&&(y=S)}return y!==null?y.conversion:null})(n,t),c=l?l(n):null,u=null;if(c!==null){u=c.after;let g=c.node;if(a=Array.isArray(g)?g[g.length-1]:g,a!==null){for(let[,p]of o)if(a=p(a,i),!a)break;a&&s.push(...Array.isArray(g)?g:[a])}c.forChild!=null&&o.set(n.nodeName,c.forChild)}let d=n.childNodes,f=[],h=(a==null||!Le(a))&&(a!=null&&Un(a)||r);for(let g=0;g<d.length;g++)f.push(...eg(d[g],t,e,h,new Map(o),a));return u!=null&&(f=u(f)),Ia(n)&&(f=Pm(n,f,h?()=>{let g=new ca;return e.push(g),g}:re)),a==null?f.length>0?s=s.concat(f):Ia(n)&&(function(g){return g.nextSibling==null||g.previousSibling==null?!1:Fr(g.nextSibling)&&Fr(g.previousSibling)})(n)&&(s=s.concat(ta())):L(a)&&a.append(...f),s}function Pm(n,t,e){let r=n.style.textAlign,o=[],i=[];for(let s=0;s<t.length;s++){let a=t[s];if(Un(a))r&&!a.getFormat()&&a.setFormat(r),o.push(a);else if(i.push(a),s===t.length-1||s<t.length-1&&Un(t[s+1])){let l=e();l.setFormat(r),l.append(...i),o.push(l),i=[]}}return o}var tg=Va,ng=tg.$generateHtmlFromNodes,rg=tg.$generateNodesFromDOM;var qa={};Fe(qa,{$generateJSONFromSelectedNodes:()=>lg,$generateNodesFromSerializedNodes:()=>cg,$getClipboardDataFromSelection:()=>dg,$getHtmlContent:()=>ig,$getLexicalContent:()=>sg,$insertDataTransferForPlainText:()=>Fm,$insertDataTransferForRichText:()=>Km,$insertGeneratedNodes:()=>Xa,copyToClipboard:()=>Bm,setLexicalClipboardDataTransfer:()=>fg});function Ci(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),r=new URLSearchParams;r.append(\"code\",n);for(let o of t)r.append(\"v\",o);throw e.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ig(n,t=I()){return t==null&&Ci(166),b(t)&&t.isCollapsed()||t.getNodes().length===0?\"\":ng(n,t)}function sg(n,t=I()){return t==null&&Ci(166),b(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(lg(n,t))}function Fm(n,t){let e=n.getData(\"text/plain\")||n.getData(\"text/uri-list\");e!=null&&t.insertRawText(e)}function Km(n,t,e){let r=n.getData(\"application/x-lexical-editor\");if(r)try{let a=JSON.parse(r);if(a.namespace===e._config.namespace&&Array.isArray(a.nodes))return Xa(e,cg(a.nodes),t)}catch(a){console.error(a)}let o=n.getData(\"text/html\"),i=n.getData(\"text/plain\");if(o&&i!==o)try{let a=new DOMParser().parseFromString((function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy(\"lexical\",{createHTML:c=>c}).createHTML(l):l})(o),\"text/html\");return Xa(e,rg(e,a),t)}catch(a){console.error(a)}let s=i||n.getData(\"text/uri-list\");if(s!=null)if(b(t)){let a=s.split(/(\\r?\\n|\\t)/);a[a.length-1]===\"\"&&a.pop();for(let l=0;l<a.length;l++){let c=I();if(b(c)){let u=a[l];u===`\n`||u===`\\r\n`?c.insertParagraph():u===\"\t\"?c.insertNodes([$o()]):c.insertText(u)}}}else t.insertRawText(s)}function Xa(n,t,e){n.dispatchCommand(kd,{nodes:t,selection:e})||(e.insertNodes(t),(function(r){if(b(r)&&r.isCollapsed()){let o=r.anchor,i=null,s=Wn(o,\"previous\");if(s)if(wo(s))i=s.origin;else{let a=Zu(s,Je(Se(),\"next\").getFlipped());for(let l of a){if(z(l.origin)){i=l.origin;break}if(L(l.origin)&&!l.origin.isInline())break}}if(i&&z(i)){let a=i.getFormat(),l=i.getStyle();r.format===a&&r.style===l||(r.format=a,r.style=l,r.dirty=!0)}}})(e))}function ag(n,t,e,r=[]){let o=t===null||e.isSelected(t),i=L(e)&&e.excludeFromCopy(\"html\"),s=e;t!==null&&z(s)&&(s=ui(t,s,\"clone\"));let a=L(s)?s.getChildren():[],l=(function(c){let u=c.exportJSON(),d=c.constructor;if(u.type!==d.getType()&&Ci(58,d.name),L(c)){let f=u.children;Array.isArray(f)||Ci(59,d.name)}return u})(s);z(s)&&s.getTextContentSize()===0&&(o=!1);for(let c=0;c<a.length;c++){let u=a[c],d=ag(n,t,u,l.children);!o&&L(e)&&d&&e.extractWithChild(u,t,\"clone\")&&(o=!0)}if(o&&!i)r.push(l);else if(Array.isArray(l.children))for(let c=0;c<l.children.length;c++){let u=l.children[c];r.push(u)}return o}function lg(n,t){let e=[],r=Se().getChildren();for(let o=0;o<r.length;o++)ag(n,t,r[o],e);return{namespace:n._config.namespace,nodes:e}}function cg(n){let t=[];for(let e=0;e<n.length;e++){let r=n[e],o=ld(r);z(o)&&tf(o),t.push(o)}return t}var Xn=null;async function Bm(n,t,e){if(Xn!==null)return!1;if(t!==null)return new Promise((c,u)=>{n.update(()=>{c(og(n,t,e))})});let r=n.getRootElement(),o=n._window||window,i=o.document,s=fa(o);if(r===null||s===null)return!1;let a=i.createElement(\"span\");a.style.cssText=\"position: fixed; top: -1000px;\",a.append(i.createTextNode(\"#\")),r.append(a);let l=new Range;return l.setStart(a,0),l.setEnd(a,1),s.removeAllRanges(),s.addRange(l),new Promise((c,u)=>{let d=n.registerCommand(Wo,f=>(qe(f,ClipboardEvent)&&(d(),Xn!==null&&(o.clearTimeout(Xn),Xn=null),c(og(n,f,e))),!0),Bo);Xn=o.setTimeout(()=>{d(),Xn=null,c(!1)},50),i.execCommand(\"copy\"),a.remove()})}function og(n,t,e){if(e===void 0){let o=fa(n._window),i=I();if(!i||i.isCollapsed()||!o)return!1;let s=o.anchorNode,a=o.focusNode;if(s!==null&&a!==null&&!zd(n,s,a))return!1;e=dg(i)}t.preventDefault();let r=t.clipboardData;return r!==null&&(fg(r,e),!0)}var ug=[[\"text/html\",ig],[\"application/x-lexical-editor\",sg]];function dg(n=I()){let t={\"text/plain\":n?n.getTextContent():\"\"};if(n){let e=Lo();for(let[r,o]of ug){let i=o(e,n);i!==null&&(t[r]=i)}}return t}function fg(n,t){for(let[e]of ug)t[e]===void 0&&n.setData(e,\"\");for(let e in t){let r=t[e];r!==void 0&&n.setData(e,r)}}var st=qa,XC=st.$generateJSONFromSelectedNodes,qC=st.$generateNodesFromSerializedNodes,ZC=st.$getClipboardDataFromSelection,QC=st.$getHtmlContent,eS=st.$getLexicalContent,tS=st.$insertDataTransferForPlainText,Za=st.$insertDataTransferForRichText,nS=st.$insertGeneratedNodes,Qa=st.copyToClipboard,rS=st.setLexicalClipboardDataTransfer;var el={};Fe(el,{DragonExtension:()=>Wm,registerDragonSupport:()=>gg});function gg(n){let t=window.location.origin,e=r=>{if(r.origin!==t)return;let o=n.getRootElement();if(document.activeElement!==o)return;let i=r.data;if(typeof i==\"string\"){let s;try{s=JSON.parse(i)}catch{return}if(s&&s.protocol===\"nuanria_messaging\"&&s.type===\"request\"){let a=s.payload;if(a&&a.functionId===\"makeChanges\"){let l=a.args;if(l){let[c,u,d,f,h]=l;n.update(()=>{let g=I();if(b(g)){let p=g.anchor,_=p.getNode(),x=0,y=0;if(z(_)&&c>=0&&u>=0&&(x=c,y=c+u,g.setTextNodeRange(_,x,_,y)),x===y&&d===\"\"||(g.insertRawText(d),_=p.getNode()),z(_)){x=f,y=f+h;let N=_.getTextContentSize();x=x>N?N:x,y=y>N?N:y,g.setTextNodeRange(_,x,_,y)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener(\"message\",e,!0),()=>{window.removeEventListener(\"message\",e,!0)}}var Wm=ne({build:(n,t,e)=>vt(t),config:Te({disabled:typeof window>\"u\"}),name:\"@lexical/dragon\",register:(n,t,e)=>it(()=>e.getOutput().disabled.value?void 0:gg(n))});var hg=el,pg=hg.DragonExtension,aS=hg.registerDragonSupport;var ol={};Fe(ol,{$createHeadingNode:()=>Zn,$createQuoteNode:()=>rl,$isHeadingNode:()=>Xm,$isQuoteNode:()=>jm,DRAG_DROP_PASTE:()=>nl,HeadingNode:()=>er,QuoteNode:()=>Qn,RichTextExtension:()=>qm,eventFiles:()=>Ur,registerRichText:()=>Cg});function _g(n,t){if(document.caretRangeFromPoint!==void 0){let e=document.caretRangeFromPoint(n,t);return e===null?null:{node:e.startContainer,offset:e.startOffset}}if(document.caretPositionFromPoint!==\"undefined\"){let e=document.caretPositionFromPoint(n,t);return e===null?null:{node:e.offsetNode,offset:e.offset}}return null}var pn=typeof window<\"u\"&&window.document!==void 0&&window.document.createElement!==void 0,zm=pn&&\"documentMode\"in document?document.documentMode:null,Um=pn&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Hm=!(!pn||!(\"InputEvent\"in window)||zm)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),Ym=pn&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),mg=pn&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Gm=pn&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Jm=pn&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&Um&&!Gm,nl=Ee(\"DRAG_DROP_PASTE_FILE\"),Qn=class n extends rt{static getType(){return\"quote\"}static clone(t){return new n(t.__key)}createDOM(t){let e=document.createElement(\"blockquote\");return Xe(e,t.theme.quote),e}updateDOM(t,e){return!1}static importDOM(){return{blockquote:t=>({conversion:Vm,priority:0})}}exportDOM(t){let{element:e}=super.exportDOM(t);if(Pe(e)){this.isEmpty()&&e.append(document.createElement(\"br\"));let r=this.getFormatType();r&&(e.style.textAlign=r);let o=this.getDirection();o&&(e.dir=o)}return{element:e}}static importJSON(t){return rl().updateFromJSON(t)}insertNewAfter(t,e){let r=re(),o=this.getDirection();return r.setDirection(o),this.insertAfter(r,e),r}collapseAtStart(){let t=re();return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function rl(){return Ot(new Qn)}function jm(n){return n instanceof Qn}var er=class n extends rt{constructor(e,r){super(r);C(this,\"__tag\");this.__tag=e}static getType(){return\"heading\"}static clone(e){return new n(e.__tag,e.__key)}getTag(){return this.__tag}setTag(e){let r=this.getWritable();return this.__tag=e,r}createDOM(e){let r=this.__tag,o=document.createElement(r),i=e.theme.heading;if(i!==void 0){let s=i[r];Xe(o,s)}return o}updateDOM(e,r,o){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:qn,priority:0}),h2:e=>({conversion:qn,priority:0}),h3:e=>({conversion:qn,priority:0}),h4:e=>({conversion:qn,priority:0}),h5:e=>({conversion:qn,priority:0}),h6:e=>({conversion:qn,priority:0}),p:e=>{let r=e.firstChild;return r!==null&&yg(r)?{conversion:()=>({node:null}),priority:3}:null},span:e=>yg(e)?{conversion:r=>({node:Zn(\"h1\")}),priority:3}:null}}exportDOM(e){let{element:r}=super.exportDOM(e);if(Pe(r)){this.isEmpty()&&r.append(document.createElement(\"br\"));let o=this.getFormatType();o&&(r.style.textAlign=o);let i=this.getDirection();i&&(r.dir=i)}return{element:r}}static importJSON(e){return Zn(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,r=!0){let o=e?e.anchor.offset:0,i=this.getLastDescendant(),s=!i||e&&e.anchor.key===i.getKey()&&o===i.getTextContentSize()||!e?re():Zn(this.getTag()),a=this.getDirection();if(s.setDirection(a),this.insertAfter(s,r),o===0&&!this.isEmpty()&&e){let l=re();l.select(),this.replace(l,!0)}return s}collapseAtStart(){let e=this.isEmpty()?re():Zn(this.getTag());return this.getChildren().forEach(r=>e.append(r)),this.replace(e),!0}extractWithChild(){return!0}};function yg(n){return n.nodeName.toLowerCase()===\"span\"&&n.style.fontSize===\"26pt\"}function qn(n){let t=n.nodeName.toLowerCase(),e=null;return t!==\"h1\"&&t!==\"h2\"&&t!==\"h3\"&&t!==\"h4\"&&t!==\"h5\"&&t!==\"h6\"||(e=Zn(t),n.style!==null&&(pa(n,e),e.setFormat(n.style.textAlign))),{node:e}}function Vm(n){let t=rl();return n.style!==null&&(t.setFormat(n.style.textAlign),pa(n,t)),{node:t}}function Zn(n=\"h1\"){return Ot(new er(n))}function Xm(n){return n instanceof er}function Ur(n){let t=null;if(qe(n,DragEvent)?t=n.dataTransfer:qe(n,ClipboardEvent)&&(t=n.clipboardData),t===null)return[!1,[],!1];let e=t.types,r=e.includes(\"Files\"),o=e.includes(\"text/html\")||e.includes(\"text/plain\");return[r,Array.from(t.files),o]}function xg(n){let t=I();if(!b(t))return!1;let e=new Set,r=t.getNodes();for(let o=0;o<r.length;o++){let i=r[o],s=i.getKey();if(e.has(s))continue;let a=we(i,c=>L(c)&&!c.isInline());if(a===null)continue;let l=a.getKey();a.canIndent()&&!e.has(l)&&(e.add(l),n(a))}return e.size>0}function Ng(n){let t=nt(n);return ln(t)}function tl(n){for(let t of[\"lowercase\",\"uppercase\",\"capitalize\"])n.hasFormat(t)&&n.toggleFormat(t)}function Cg(n){return me(n.registerCommand(Ko,t=>{let e=I();return!!_e(e)&&(e.clear(),!0)},B),n.registerCommand(zo,t=>{let e=I();return b(e)?(e.deleteCharacter(t),!0):!!_e(e)&&(e.deleteNodes(),!0)},B),n.registerCommand(xd,t=>{let e=I();return!!b(e)&&(e.deleteWord(t),!0)},B),n.registerCommand(yd,t=>{let e=I();return!!b(e)&&(e.deleteLine(t),!0)},B),n.registerCommand(_d,t=>{let e=I();if(typeof t==\"string\")e!==null&&e.insertText(t);else{if(e===null)return!1;let r=t.dataTransfer;if(r!=null)Za(r,e,n);else if(b(e)){let o=t.data;return o&&e.insertText(o),!0}}return!0},B),n.registerCommand(bd,()=>{let t=I();return!!b(t)&&(t.removeText(),!0)},B),n.registerCommand(Ho,t=>{let e=I();return!!b(e)&&(e.formatText(t),!0)},B),n.registerCommand(Uo,t=>{let e=I();if(!b(e)&&!_e(e))return!1;let r=e.getNodes();for(let o of r){let i=we(o,s=>L(s)&&!s.isInline());i!==null&&i.setFormat(t)}return!0},B),n.registerCommand(ua,t=>{let e=I();return!!b(e)&&(e.insertLineBreak(t),!0)},B),n.registerCommand(Lr,()=>{let t=I();return!!b(t)&&(t.insertParagraph(),!0)},B),n.registerCommand(Jo,()=>(Ar([$o()]),!0),B),n.registerCommand($r,()=>xg(t=>{let e=t.getIndent();t.setIndent(e+1)}),B),n.registerCommand(Pr,()=>xg(t=>{let e=t.getIndent();e>0&&t.setIndent(Math.max(0,e-1))}),B),n.registerCommand(Xo,t=>{let e=I();if(_e(e)){let r=e.getNodes();if(r.length>0)return t.preventDefault(),r[0].selectPrevious(),!0}else if(b(e)){let r=ra(e.focus,!0);if(!t.shiftKey&&ln(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),t.preventDefault(),!0}return!1},B),n.registerCommand(jo,t=>{let e=I();if(_e(e)){let r=e.getNodes();if(r.length>0)return t.preventDefault(),r[0].selectNext(0,0),!0}else if(b(e)){if((function(o){let i=o.focus;return i.key===\"root\"&&i.offset===Se().getChildrenSize()})(e))return t.preventDefault(),!0;let r=ra(e.focus,!1);if(!t.shiftKey&&ln(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),t.preventDefault(),!0}return!1},B),n.registerCommand(Vo,t=>{let e=I();if(_e(e)){let r=e.getNodes();if(r.length>0)return t.preventDefault(),Ta(r[0])?r[0].selectNext(0,0):r[0].selectPrevious(),!0}if(!b(e))return!1;if(va(e,!0)){let r=t.shiftKey;return t.preventDefault(),Oa(e,r,!0),!0}return!1},B),n.registerCommand(Td,t=>{let e=I();if(_e(e)){let o=e.getNodes();if(o.length>0)return t.preventDefault(),Ta(o[0])?o[0].selectPrevious():o[0].selectNext(0,0),!0}if(!b(e))return!1;let r=t.shiftKey;return!!va(e,!1)&&(t.preventDefault(),Oa(e,r,!1),!0)},B),n.registerCommand(Od,t=>{if(Ng(t.target))return!1;let e=I();if(b(e)){if((function(r){if(!r.isCollapsed())return!1;let{anchor:o}=r;if(o.offset!==0)return!1;let i=o.getNode();if(cn(i))return!1;let s=Kr(i);return s.getIndent()>0&&(s.is(i)||i.is(s.getFirstDescendant()))})(e))return t.preventDefault(),n.dispatchCommand(Pr,void 0);if(mg&&navigator.language===\"ko-KR\")return!1}else if(!_e(e))return!1;return t.preventDefault(),n.dispatchCommand(zo,!0)},B),n.registerCommand(Md,t=>{if(Ng(t.target))return!1;let e=I();return!(!b(e)&&!_e(e))&&(t.preventDefault(),n.dispatchCommand(zo,!1))},B),n.registerCommand(qo,t=>{let e=I();if(!b(e))return!1;if(tl(e),t!==null){if((mg||Ym||Jm)&&Hm)return!1;if(t.preventDefault(),t.shiftKey)return n.dispatchCommand(ua,!1)}return n.dispatchCommand(Lr,void 0)},B),n.registerCommand(Zo,()=>{let t=I();return!!b(t)&&(n.blur(),!0)},B),n.registerCommand(Sd,t=>{let[,e]=Ur(t);if(e.length>0){let o=_g(t.clientX,t.clientY);if(o!==null){let{offset:i,node:s}=o,a=nt(s);if(a!==null){let l=zn();if(z(a))l.anchor.set(a.getKey(),i,\"text\"),l.focus.set(a.getKey(),i,\"text\");else{let u=a.getParentOrThrow().getKey(),d=a.getIndexWithinParent()+1;l.anchor.set(u,d,\"element\"),l.focus.set(u,d,\"element\")}let c=un(l);je(c)}n.dispatchCommand(nl,e)}return t.preventDefault(),!0}let r=I();return!!b(r)},B),n.registerCommand(Cd,t=>{let[e]=Ur(t),r=I();return!(e&&!b(r))},B),n.registerCommand(Nd,t=>{let[e]=Ur(t),r=I();if(e&&!b(r))return!1;let o=_g(t.clientX,t.clientY);if(o!==null){let i=nt(o.node);ln(i)&&t.preventDefault()}return!0},B),n.registerCommand(Id,()=>(Po(),!0),B),n.registerCommand(Wo,t=>(Qa(n,qe(t,ClipboardEvent)?t:null),!0),B),n.registerCommand(md,t=>((async function(e,r){await Qa(r,qe(e,ClipboardEvent)?e:null),r.update(()=>{let o=I();b(o)?o.removeText():_e(o)&&o.getNodes().forEach(i=>i.remove())})})(t,n),!0),B),n.registerCommand(ti,t=>{let[,e,r]=Ur(t);return e.length>0&&!r?(n.dispatchCommand(nl,e),!0):Yn(t.target)&&Wd(t.target)?!1:I()!==null&&((function(o,i){o.preventDefault(),i.update(()=>{let s=I(),a=qe(o,InputEvent)||qe(o,KeyboardEvent)?null:o.clipboardData;a!=null&&s!==null&&Za(a,s,i)},{tag:Dd})})(t,n),!0)},B),n.registerCommand(Qo,t=>{let e=I();return b(e)&&tl(e),!1},B),n.registerCommand(ei,t=>{let e=I();return b(e)&&tl(e),!1},B))}var qm=ne({conflictsWith:[\"@lexical/plain-text\"],dependencies:[pg],name:\"@lexical/rich-text\",nodes:[er,Qn],register:Cg});var at=ol,Sg=at.$createHeadingNode,pS=at.$createQuoteNode,Eg=at.$isHeadingNode,_S=at.$isQuoteNode,mS=at.DRAG_DROP_PASTE,Tg=at.HeadingNode,yS=at.QuoteNode,xS=at.RichTextExtension,NS=at.eventFiles,Og=at.registerRichText;var cl={};Fe(cl,{$createListItemNode:()=>Ie,$createListNode:()=>De,$getListDepth:()=>Si,$handleListInsertParagraph:()=>Pg,$insertList:()=>Hr,$isListItemNode:()=>U,$isListNode:()=>W,$removeList:()=>ll,CheckListExtension:()=>iy,INSERT_CHECK_LIST_COMMAND:()=>Fg,INSERT_ORDERED_LIST_COMMAND:()=>Ug,INSERT_UNORDERED_LIST_COMMAND:()=>zg,ListExtension:()=>Jg,ListItemNode:()=>Jt,ListNode:()=>mn,REMOVE_LIST_COMMAND:()=>Hg,UPDATE_LIST_START_COMMAND:()=>Wg,insertList:()=>ry,registerCheckList:()=>Kg,registerList:()=>Yg,registerListStrictIndentTransform:()=>Gg,removeList:()=>oy});function Gt(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),r=new URLSearchParams;r.append(\"code\",n);for(let o of t)r.append(\"v\",o);throw e.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Si(n){let t=1,e=n.getParent();for(;e!=null;){if(U(e)){let r=e.getParent();if(W(r)){t++,e=r.getParent();continue}Gt(40)}return t}return t}function il(n){let t=n.getParent();W(t)||Gt(40);let e=t;for(;e!==null;)e=e.getParent(),W(e)&&(t=e);return t}function $g(n){let t=[],e=n.getChildren().filter(U);for(let r=0;r<e.length;r++){let o=e[r],i=o.getFirstChild();W(i)?t=t.concat($g(i)):t.push(o)}return t}function lt(n){return U(n)&&W(n.getFirstChild())}function Mg(n){return Ie().append(n)}function Lg(n,t){return U(n)&&(t.length===0||t.length===1&&n.is(t[0])&&n.getChildrenSize()===0)}function Hr(n){let t=I();if(t!==null){let e=t.getNodes();if(b(t)){let o=t.getStartEndPoints();o===null&&Gt(143);let[i]=o,s=i.getNode(),a=s.getParent();if(Le(s)){let l=s.getFirstChild();if(l)e=l.selectStart().getNodes();else{let c=re();s.append(c),e=c.select().getNodes()}}else if(Lg(s,e)){let l=De(n);if(Le(a)){s.replace(l);let c=Ie();L(s)&&(c.setFormat(s.getFormatType()),c.setIndent(s.getIndent())),l.append(c)}else if(U(s)){let c=s.getParentOrThrow();_n(l,c.getChildren()),c.replace(l)}return}}let r=new Set;for(let o=0;o<e.length;o++){let i=e[o];if(L(i)&&i.isEmpty()&&!U(i)&&!r.has(i.getKey())){vg(i,n);continue}let s=Rr(i)?i.getParent():U(i)&&i.isEmpty()?i:null;for(;s!=null;){let a=s.getKey();if(W(s)){if(!r.has(a)){let l=De(n);_n(l,s.getChildren()),s.replace(l),r.add(a)}break}{let l=s.getParent();if(Le(l)&&!r.has(a)){r.add(a),vg(s,n);break}s=l}}}}}function _n(n,t){n.splice(n.getChildrenSize(),0,t)}function vg(n,t){if(W(n))return n;let e=n.getPreviousSibling(),r=n.getNextSibling(),o=Ie(),i;if(_n(o,n.getChildren()),W(e)&&t===e.getListType())e.append(o),W(r)&&t===r.getListType()&&(_n(e,r.getChildren()),r.remove()),i=e;else if(W(r)&&t===r.getListType())r.getFirstChildOrThrow().insertBefore(o),i=r;else{let s=De(t);s.append(o),n.replace(s),i=s}return o.setFormat(n.getFormatType()),o.setIndent(n.getIndent()),n.remove(),i}function al(n,t){let e=n.getLastChild(),r=t.getFirstChild();e&&r&&lt(e)&&lt(r)&&(al(e.getFirstChild(),r.getFirstChild()),r.remove());let o=t.getChildren();o.length>0&&n.append(...o),t.remove()}function ll(){let n=I();if(b(n)){let t=new Set,e=n.getNodes(),r=n.anchor.getNode();if(Lg(r,e))t.add(il(r));else for(let o=0;o<e.length;o++){let i=e[o];if(Rr(i)){let s=Ef(i,Jt);s!=null&&t.add(il(s))}}for(let o of t){let i=o,s=$g(o);for(let a of s){let l=re().setTextStyle(n.style).setTextFormat(n.format);_n(l,a.getChildren()),i.insertAfter(l),i=l,a.__key===n.anchor.key&&la(n.anchor,kr(Je(l,\"next\"))),a.__key===n.focus.key&&la(n.focus,kr(Je(l,\"next\"))),a.remove()}o.remove()}}}function wg(n){let t=n.getListType()!==\"check\",e=n.getStart();for(let r of n.getChildren())U(r)&&(r.getValue()!==e&&r.setValue(e),t&&r.getLatest().__checked!=null&&r.setChecked(void 0),W(r.getFirstChild())||e++)}function Zm(n){let t=new Set;if(lt(n)||t.has(n.getKey()))return;let e=n.getParent(),r=n.getNextSibling(),o=n.getPreviousSibling();if(lt(r)&&lt(o)){let i=o.getFirstChild();if(W(i)){i.append(n);let s=r.getFirstChild();W(s)&&(_n(i,s.getChildren()),r.remove(),t.add(r.getKey()))}}else if(lt(r)){let i=r.getFirstChild();if(W(i)){let s=i.getFirstChild();s!==null&&s.insertBefore(n)}}else if(lt(o)){let i=o.getFirstChild();W(i)&&i.append(n)}else if(W(e)){let i=Ie().setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle()),s=De(e.getListType()).setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle());i.append(s),s.append(n),o?o.insertAfter(i):r?r.insertBefore(i):e.append(i)}}function Qm(n){if(lt(n))return;let t=n.getParent(),e=t?t.getParent():void 0;if(W(e?e.getParent():void 0)&&U(e)&&W(t)){let r=t?t.getFirstChild():void 0,o=t?t.getLastChild():void 0;if(n.is(r))e.insertBefore(n),t.isEmpty()&&e.remove();else if(n.is(o))e.insertAfter(n),t.isEmpty()&&e.remove();else{let i=t.getListType(),s=Ie(),a=De(i);s.append(a),n.getPreviousSiblings().forEach(u=>a.append(u));let l=Ie(),c=De(i);l.append(c),_n(c,n.getNextSiblings()),e.insertBefore(s),e.insertAfter(l),e.replace(n)}}}function Pg(){let n=I();if(!b(n)||!n.isCollapsed())return!1;let t=n.anchor.getNode();if(!U(t)||t.getChildrenSize()!==0)return!1;let e=il(t),r=t.getParent();W(r)||Gt(40);let o=r.getParent(),i;if(Le(o))i=re(),e.insertAfter(i);else{if(!U(o))return!1;i=Ie(),o.insertAfter(i)}i.setTextStyle(n.style).setTextFormat(n.format).select();let s=t.getNextSiblings();if(s.length>0){let a=De(r.getListType());if(U(i)){let l=Ie();l.append(a),i.insertAfter(l)}else i.insertAfter(a);a.append(...s)}return(function(a){let l=a;for(;l.getNextSibling()==null&&l.getPreviousSibling()==null;){let c=l.getParent();if(c==null||!U(c)&&!W(c))break;l=c}l.remove()})(t),!0}function Ei(...n){let t=[];for(let e of n)if(e&&typeof e==\"string\")for(let[r]of e.matchAll(/\\S+/g))t.push(r);return t}var Jt=class extends rt{constructor(e=1,r=void 0,o){super(o);C(this,\"__value\");C(this,\"__checked\");this.__value=e===void 0?1:e,this.__checked=r}$config(){return this.config(\"listitem\",{$transform:e=>{if(e.__checked==null)return;let r=e.getParent();W(r)&&r.getListType()!==\"check\"&&e.getChecked()!=null&&e.setChecked(void 0)},extends:rt,importDOM:da({li:()=>({conversion:ey,priority:0})})})}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){let r=document.createElement(\"li\");return this.updateListItemDOM(null,r,e),r}updateListItemDOM(e,r,o){(function(a,l,c){let u=l.getParent();!W(u)||u.getListType()!==\"check\"||W(l.getFirstChild())?(a.removeAttribute(\"role\"),a.removeAttribute(\"tabIndex\"),a.removeAttribute(\"aria-checked\")):(a.setAttribute(\"role\",\"checkbox\"),a.setAttribute(\"tabIndex\",\"-1\"),c&&l.__checked===c.__checked||a.setAttribute(\"aria-checked\",l.getChecked()?\"true\":\"false\"))})(r,this,e),r.value=this.__value,(function(a,l,c){let u=[],d=[],f=l.list,h=f?f.listitem:void 0,g;if(f&&f.nested&&(g=f.nested.listitem),h!==void 0&&u.push(...Ei(h)),f){let p=c.getParent(),_=W(p)&&p.getListType()===\"check\",x=c.getChecked();_&&!x||d.push(f.listitemUnchecked),_&&x||d.push(f.listitemChecked),_&&u.push(x?f.listitemChecked:f.listitemUnchecked)}if(g!==void 0){let p=Ei(g);c.getChildren().some(_=>W(_))?u.push(...p):d.push(...p)}d.length>0&&Br(a,...d),u.length>0&&Xe(a,...u)})(r,o.theme,this);let i=e?e.__style:\"\",s=this.__style;i!==s&&(s===\"\"?r.removeAttribute(\"style\"):r.style.cssText=s),(function(a,l,c){let u=Da(l.__textStyle);for(let d in u)a.style.setProperty(`--listitem-marker-${d}`,u[d]);if(c)for(let d in Da(c.__textStyle))d in u||a.style.removeProperty(`--listitem-marker-${d}`)})(r,this,e)}updateDOM(e,r,o){let i=r;return this.updateListItemDOM(e,i,o),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){let r=this.createDOM(e._config),o=this.getFormatType();o&&(r.style.textAlign=o);let i=this.getDirection();return i&&(r.dir=i),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let r=0;r<e.length;r++){let o=e[r];if(L(o)&&this.canMergeWith(o)){let i=o.getChildren();this.append(...i),o.remove()}else super.append(o)}return this}replace(e,r){if(U(e))return super.replace(e);this.setIndent(0);let o=this.getParentOrThrow();if(!W(o))return e;if(o.__first===this.getKey())o.insertBefore(e);else if(o.__last===this.getKey())o.insertAfter(e);else{let i=De(o.getListType()),s=this.getNextSibling();for(;s;){let a=s;s=s.getNextSibling(),i.append(a)}o.insertAfter(e),e.insertAfter(i)}return r&&(L(e)||Gt(139),this.getChildren().forEach(i=>{e.append(i)})),this.remove(),o.getChildrenSize()===0&&o.remove(),e}insertAfter(e,r=!0){let o=this.getParentOrThrow();if(W(o)||Gt(39),U(e))return super.insertAfter(e,r);let i=this.getNextSiblings();if(o.insertAfter(e,r),i.length!==0){let s=De(o.getListType());i.forEach(a=>s.append(a)),e.insertAfter(s,r)}return e}remove(e){let r=this.getPreviousSibling(),o=this.getNextSibling();super.remove(e),r&&o&&lt(r)&&lt(o)&&(al(r.getFirstChild(),o.getFirstChild()),o.remove())}insertNewAfter(e,r=!0){let o=Ie().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(o,r),o}collapseAtStart(e){let r=re();this.getChildren().forEach(a=>r.append(a));let o=this.getParentOrThrow(),i=o.getParentOrThrow(),s=U(i);if(o.getChildrenSize()===1)if(s)o.remove(),i.select();else{o.insertBefore(r),o.remove();let a=e.anchor,l=e.focus,c=r.getKey();a.type===\"element\"&&a.getNode().is(this)&&a.set(c,a.offset,\"element\"),l.type===\"element\"&&l.getNode().is(this)&&l.set(c,l.offset,\"element\")}else o.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){let r=this.getWritable();return r.__value=e,r}getChecked(){let e=this.getLatest(),r,o=this.getParent();return W(o)&&(r=o.getListType()),r===\"check\"?!!e.__checked:void 0}setChecked(e){let r=this.getWritable();return r.__checked=e,r}toggleChecked(){let e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){let e=this.getParent();if(e===null||!this.isAttached())return this.getLatest().__indent;let r=e.getParentOrThrow(),o=0;for(;U(r);)r=r.getParentOrThrow().getParentOrThrow(),o++;return o}setIndent(e){typeof e!=\"number\"&&Gt(117),(e=Math.floor(e))>=0||Gt(199);let r=this.getIndent();for(;r!==e;)r<e?(Zm(this),r++):(Qm(this),r--);return this}canInsertAfter(e){return U(e)}canReplaceWith(e){return U(e)}canMergeWith(e){return U(e)||sd(e)}extractWithChild(e,r){if(!b(r))return!1;let o=r.anchor.getNode(),i=r.focus.getNode();return this.isParentOf(o)&&this.isParentOf(i)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return De(\"bullet\")}canMergeWhenEmpty(){return!0}};function ey(n){if(n.classList.contains(\"task-list-item\")){for(let e of n.children)if(e.tagName===\"INPUT\")return Dg(e)}if(n.classList.contains(\"joplin-checkbox\")){for(let e of n.children)if(e.classList.contains(\"checkbox-wrapper\")&&e.children.length>0&&e.children[0].tagName===\"INPUT\")return Dg(e.children[0])}let t=n.getAttribute(\"aria-checked\");return{node:Ie(t===\"true\"||t!==\"false\"&&void 0)}}function Dg(n){return n.getAttribute(\"type\")!==\"checkbox\"?{node:null}:{node:Ie(n.hasAttribute(\"checked\"))}}function Ie(n){return Ot(new Jt(void 0,n))}function U(n){return n instanceof Jt}var mn=class extends rt{constructor(e=\"number\",r=1,o){super(o);C(this,\"__tag\");C(this,\"__start\");C(this,\"__listType\");let i=ny[e]||e;this.__listType=i,this.__tag=i===\"number\"?\"ol\":\"ul\",this.__start=r}$config(){return this.config(\"list\",{$transform:e=>{(function(r){let o=r.getNextSibling();W(o)&&r.getListType()===o.getListType()&&al(r,o)})(e),wg(e)},extends:rt,importDOM:da({ol:()=>({conversion:bg,priority:0}),ul:()=>({conversion:bg,priority:0})})})}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){let r=this.getWritable();return r.__listType=e,r.__tag=e===\"number\"?\"ol\":\"ul\",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){let r=this.getWritable();return r.__start=e,r}createDOM(e,r){let o=this.__tag,i=document.createElement(o);return this.__start!==1&&i.setAttribute(\"start\",String(this.__start)),i.__lexicalListType=this.__listType,Ag(i,e.theme,this),i}updateDOM(e,r,o){return e.__tag!==this.__tag||e.__listType!==this.__listType||(Ag(r,o.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){let r=this.createDOM(e._config,e);return Pe(r)&&(this.__start!==1&&r.setAttribute(\"start\",String(this.__start)),this.__listType===\"check\"&&r.setAttribute(\"__lexicalListType\",\"check\")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,r,o){let i=o;for(let s=0;s<o.length;s++){let a=o[s];U(a)||(i===o&&(i=[...o]),i[s]=Ie().append(!L(a)||W(a)||a.isInline()?a:Bt(a.getTextContent())))}return super.splice(e,r,i)}extractWithChild(e){return U(e)}};function Ag(n,t,e){let r=[],o=[],i=t.list;if(i!==void 0){let s=i[`${e.__tag}Depth`]||[],a=Si(e)-1,l=a%s.length,c=s[l],u=i[e.__tag],d,f=i.nested,h=i.checklist;if(f!==void 0&&f.list&&(d=f.list),u!==void 0&&r.push(u),h!==void 0&&e.__listType===\"check\"&&r.push(h),c!==void 0){r.push(...Ei(c));for(let g=0;g<s.length;g++)g!==l&&o.push(e.__tag+g)}if(d!==void 0){let g=Ei(d);a>1?r.push(...g):o.push(...g)}}o.length>0&&Br(n,...o),r.length>0&&Xe(n,...r)}function ty(n){let t=[];for(let e=0;e<n.length;e++){let r=n[e];if(U(r)){t.push(r);let o=r.getChildren();o.length>1&&o.forEach(i=>{W(i)&&t.push(Mg(i))})}else t.push(Mg(r))}return t}function bg(n){let t=n.nodeName.toLowerCase(),e=null;return t===\"ol\"?e=De(\"number\",n.start):t===\"ul\"&&(e=(function(r){if(r.getAttribute(\"__lexicallisttype\")===\"check\"||r.classList.contains(\"contains-task-list\")||r.getAttribute(\"data-is-checklist\")===\"1\")return!0;for(let o of r.childNodes)if(Pe(o)&&o.hasAttribute(\"aria-checked\"))return!0;return!1})(n)?De(\"check\"):De(\"bullet\")),{after:ty,node:e}}var ny={ol:\"number\",ul:\"bullet\"};function De(n=\"number\",t=1){return Ot(new mn(n,t))}function W(n){return n instanceof mn}var Fg=Ee(\"INSERT_CHECK_LIST_COMMAND\");function Kg(n){return me(n.registerCommand(Fg,()=>(Hr(\"check\"),!0),pe),n.registerCommand(jo,t=>Ig(t,n,!1),pe),n.registerCommand(Xo,t=>Ig(t,n,!0),pe),n.registerCommand(Zo,()=>{if(sl()!=null){let t=n.getRootElement();return t?.focus(),!0}return!1},pe),n.registerCommand(Qo,t=>{let e=sl();return!(e==null||!n.isEditable())&&(n.update(()=>{let r=nt(e);U(r)&&(t.preventDefault(),r.toggleChecked())}),!0)},pe),n.registerCommand(Vo,t=>n.getEditorState().read(()=>{let e=I();if(b(e)&&e.isCollapsed()){let{anchor:r}=e,o=r.type===\"element\";if(o||r.offset===0){let i=r.getNode(),s=we(i,a=>L(a)&&!a.isInline());if(U(s)){let a=s.getParent();if(W(a)&&a.getListType()===\"check\"&&(o||s.getFirstDescendant()===i)){let l=n.getElementByKey(s.__key);if(l!=null&&document.activeElement!==l)return l.focus(),t.preventDefault(),!0}}}}return!1}),pe),n.registerRootListener((t,e)=>{t!==null&&(t.addEventListener(\"click\",Rg),t.addEventListener(\"pointerdown\",kg)),e!==null&&(e.removeEventListener(\"click\",Rg),e.removeEventListener(\"pointerdown\",kg))}))}function Bg(n,t){let e=n.target;if(!Pe(e))return;let r=e.firstChild;if(Pe(r)&&(r.tagName===\"UL\"||r.tagName===\"OL\"))return;let o=e.parentNode;if(!o||o.__lexicalListType!==\"check\")return;let i=e.getBoundingClientRect(),s=Tf(e),a=n.clientX/s,l=window.getComputedStyle?window.getComputedStyle(e,\"::before\"):{width:\"0px\"},c=parseFloat(l.width),u=n.pointerType===\"touch\"?32:0;(e.dir===\"rtl\"?a<i.right+u&&a>i.right-c-u:a>i.left-u&&a<i.left+c+u)&&t()}function Rg(n){Bg(n,()=>{if(Pe(n.target)){let t=n.target,e=si(t);e!=null&&e.isEditable()&&e.update(()=>{let r=nt(t);U(r)&&(t.focus(),r.toggleChecked())})}})}function kg(n){Bg(n,()=>{n.preventDefault()})}function sl(){let n=document.activeElement;return Pe(n)&&n.tagName===\"LI\"&&n.parentNode!=null&&n.parentNode.__lexicalListType===\"check\"?n:null}function Ig(n,t,e){let r=sl();return r!=null&&t.update(()=>{let o=nt(r);if(!U(o))return;let i=(function(s,a){let l=a?s.getPreviousSibling():s.getNextSibling(),c=s;for(;l==null&&U(c);)c=c.getParentOrThrow().getParent(),c!=null&&(l=a?c.getPreviousSibling():c.getNextSibling());for(;U(l);){let u=a?l.getLastChild():l.getFirstChild();if(!W(u))return l;l=a?u.getLastChild():u.getFirstChild()}return null})(o,e);if(i!=null){i.selectStart();let s=t.getElementByKey(i.__key);s!=null&&(n.preventDefault(),setTimeout(()=>{s.focus()},0))}}),!1}var Wg=Ee(\"UPDATE_LIST_START_COMMAND\"),zg=Ee(\"INSERT_UNORDERED_LIST_COMMAND\"),Ug=Ee(\"INSERT_ORDERED_LIST_COMMAND\"),Hg=Ee(\"REMOVE_LIST_COMMAND\");function Yg(n){return me(n.registerCommand(Ug,()=>(Hr(\"number\"),!0),pe),n.registerCommand(Wg,t=>{let{listNodeKey:e,newStart:r}=t,o=zt(e);return!!W(o)&&(o.getListType()===\"number\"&&(o.setStart(r),wg(o)),!0)},pe),n.registerCommand(zg,()=>(Hr(\"bullet\"),!0),pe),n.registerCommand(Hg,()=>(ll(),!0),pe),n.registerCommand(Lr,()=>Pg(),pe),n.registerNodeTransform(Jt,t=>{let e=t.getFirstChild();if(e){if(z(e)){let r=e.getStyle(),o=e.getFormat();t.getTextStyle()!==r&&t.setTextStyle(r),t.getTextFormat()!==o&&t.setTextFormat(o)}}else{let r=I();b(r)&&(r.style!==t.getTextStyle()||r.format!==t.getTextFormat())&&r.isCollapsed()&&t.is(r.anchor.getNode())&&t.setTextStyle(r.style).setTextFormat(r.format)}}),n.registerNodeTransform(Hn,t=>{let e=t.getParent();if(U(e)&&t.is(e.getFirstChild())){let r=t.getStyle(),o=t.getFormat();r===e.getTextStyle()&&o===e.getTextFormat()||e.setTextStyle(r).setTextFormat(o)}}))}function Gg(n){let t=e=>{let r=e.getParent();if(W(e.getFirstChild())||!W(r))return;let o=we(e,i=>U(i)&&W(i.getParent())&&U(i.getPreviousSibling()));if(o===null&&e.getIndent()>0)e.setIndent(0);else if(U(o)){let i=o.getPreviousSibling();if(U(i)){let s=(function(l){let c=l,u=c.getFirstChild();for(;W(u);){let d=u.getLastChild();if(!U(d))break;c=d,u=c.getFirstChild()}return c})(i),a=s.getParent();if(W(a)){let l=Si(a);l+1<Si(r)&&e.setIndent(l)}}}};return n.registerNodeTransform(mn,e=>{let r=[e];for(;r.length>0;){let o=r.shift();if(W(o)){for(let i of o.getChildren())if(U(i)){t(i);let s=i.getFirstChild();W(s)&&r.push(s)}}}})}function ry(n,t){n.update(()=>Hr(t))}function oy(n){n.update(()=>ll())}var Jg=ne({build:(n,t,e)=>vt(t),config:Te({hasStrictIndent:!1}),name:\"@lexical/list/List\",nodes:[mn,Jt],register(n,t,e){let r=e.getOutput();return me(Yg(n),it(()=>r.hasStrictIndent.value?Gg(n):void 0))}}),iy=ne({dependencies:[Jg],name:\"@lexical/list/CheckList\",register:Kg});var oe=cl,vS=oe.$createListItemNode,DS=oe.$createListNode,AS=oe.$getListDepth,bS=oe.$handleListInsertParagraph,RS=oe.$insertList,kS=oe.$isListItemNode,ul=oe.$isListNode,IS=oe.$removeList,$S=oe.CheckListExtension,LS=oe.INSERT_CHECK_LIST_COMMAND,jg=oe.INSERT_ORDERED_LIST_COMMAND,Vg=oe.INSERT_UNORDERED_LIST_COMMAND,wS=oe.ListExtension,Xg=oe.ListItemNode,qg=oe.ListNode,Zg=oe.REMOVE_LIST_COMMAND,PS=oe.UPDATE_LIST_START_COMMAND,FS=oe.insertList,KS=oe.registerCheckList,Qg=oe.registerList,BS=oe.registerListStrictIndentTransform,WS=oe.removeList;var pl={};Fe(pl,{$createAutoLinkNode:()=>Oi,$createLinkNode:()=>yn,$isAutoLinkNode:()=>ut,$isLinkNode:()=>ct,$toggleLink:()=>Yr,AutoLinkExtension:()=>py,AutoLinkNode:()=>Gr,ClickableLinkExtension:()=>cy,LinkExtension:()=>hl,LinkNode:()=>xn,TOGGLE_LINK_COMMAND:()=>Mi,createLinkMatcherWithRegExp:()=>uy,formatUrl:()=>fl,registerAutoLink:()=>lh,registerClickableLink:()=>nh,registerLink:()=>th,toggleLink:()=>_y});var sy=new Set([\"http:\",\"https:\",\"mailto:\",\"sms:\",\"tel:\"]),xn=class n extends rt{constructor(e=\"\",r={},o){super(o);C(this,\"__url\");C(this,\"__target\");C(this,\"__rel\");C(this,\"__title\");let{target:i=null,rel:s=null,title:a=null}=r;this.__url=e,this.__target=i,this.__rel=s,this.__title=a}static getType(){return\"link\"}static clone(e){return new n(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}createDOM(e){let r=document.createElement(\"a\");return this.updateLinkDOM(null,r,e),Xe(r,e.theme.link),r}updateLinkDOM(e,r,o){if(fi(r)){e&&e.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(let i of[\"target\",\"rel\",\"title\"]){let s=`__${i}`,a=this[s];e&&e[s]===a||(a?r[i]=a:r.removeAttribute(i))}}}updateDOM(e,r,o){return this.updateLinkDOM(e,r,o),!1}static importDOM(){return{a:e=>({conversion:ay,priority:1})}}static importJSON(e){return yn().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=fl(e);try{let r=new URL(fl(e));if(!sy.has(r.protocol))return\"about:blank\"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){let r=this.getWritable();return r.__url=e,r}getTarget(){return this.getLatest().__target}setTarget(e){let r=this.getWritable();return r.__target=e,r}getRel(){return this.getLatest().__rel}setRel(e){let r=this.getWritable();return r.__rel=e,r}getTitle(){return this.getLatest().__title}setTitle(e){let r=this.getWritable();return r.__title=e,r}insertNewAfter(e,r=!0){let o=yn(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(o,r),o}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,r,o){if(!b(r))return!1;let i=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(i)&&this.isParentOf(s)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith(\"mailto:\")}isWebSiteURI(){return this.__url.startsWith(\"https://\")||this.__url.startsWith(\"http://\")}};function ay(n){let t=null;if(fi(n)){let e=n.textContent;(e!==null&&e!==\"\"||n.children.length>0)&&(t=yn(n.getAttribute(\"href\")||\"\",{rel:n.getAttribute(\"rel\"),target:n.getAttribute(\"target\"),title:n.getAttribute(\"title\")}))}return{node:t}}function yn(n=\"\",t){return Ot(new xn(n,t))}function ct(n){return n instanceof xn}var Gr=class n extends xn{constructor(e=\"\",r={},o){super(e,r,o);C(this,\"__isUnlinked\");this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return\"autolink\"}static clone(e){return new n(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){let r=this.getWritable();return r.__isUnlinked=e,r}createDOM(e){return this.__isUnlinked?document.createElement(\"span\"):super.createDOM(e)}updateDOM(e,r,o){return super.updateDOM(e,r,o)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return Oi().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,r=!0){let o=this.getParentOrThrow().insertNewAfter(e,r);if(L(o)){let i=Oi(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return o.append(i),i}return null}};function Oi(n=\"\",t){return Ot(new Gr(n,t))}function ut(n){return n instanceof Gr}var Mi=Ee(\"TOGGLE_LINK_COMMAND\");function eh(n,t){if(n.type===\"element\"){let e=n.getNode();return L(e)||(function(r,...o){let i=new URL(\"https://lexical.dev/docs/error\"),s=new URLSearchParams;s.append(\"code\",r);for(let a of o)s.append(\"v\",a);throw i.search=s.toString(),Error(`Minified Lexical error #${r}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(252),e.getChildren()[n.offset+t]||null}return null}function Yr(n,t={}){let e;if(n&&typeof n==\"object\"){let{url:u,...d}=n;e=u,t={...d,...t}}else e=n;let{target:r,title:o}=t,i=t.rel===void 0?\"noreferrer\":t.rel,s=I();if(s===null||!b(s)&&!_e(s))return;if(_e(s)){let u=s.getNodes();return u.length===0?void 0:void u.forEach(d=>{if(e===null){let f=we(d,h=>!ut(h)&&ct(h));f&&(f.insertBefore(d),f.getChildren().length===0&&f.remove())}else{let f=we(d,h=>!ut(h)&&ct(h));if(f)f.setURL(e),r!==void 0&&f.setTarget(r),i!==void 0&&f.setRel(i);else{let h=yn(e,{rel:i,target:r});d.insertBefore(h),h.append(d)}}})}let a=s.extract();if(e===null){let u=new Set;return void a.forEach(d=>{let f=d.getParent();if(ct(f)&&!ut(f)){let h=f.getKey();if(u.has(h))return;(function(g,p){let _=new Set(p.filter(T=>g.isParentOf(T)).map(T=>T.getKey())),x=g.getChildren(),y=x.filter(T=>_.has(T.getKey()));if(y.length===x.length)return x.forEach(T=>g.insertBefore(T)),void g.remove();let N=x.findIndex(T=>_.has(T.getKey())),S=x.findLastIndex(T=>_.has(T.getKey())),M=N===0,E=S===x.length-1;if(M)y.forEach(T=>g.insertBefore(T));else if(E)for(let T=y.length-1;T>=0;T--)g.insertAfter(y[T]);else{for(let D=y.length-1;D>=0;D--)g.insertAfter(y[D]);let T=x.slice(S+1);if(T.length>0){let D=yn(g.getURL(),{rel:g.getRel(),target:g.getTarget(),title:g.getTitle()});y[y.length-1].insertAfter(D),T.forEach(O=>D.append(O))}}})(f,a),u.add(h)}})}let l=new Set,c=u=>{l.has(u.getKey())||(l.add(u.getKey()),u.setURL(e),r!==void 0&&u.setTarget(r),i!==void 0&&u.setRel(i),o!==void 0&&u.setTitle(o))};if(a.length===1){let u=a[0],d=we(u,ct);if(d!==null)return c(d)}(function(u){let d=I();if(!b(d))return u();let f=un(d),h=f.isBackward(),g=eh(f.anchor,h?-1:0),p=eh(f.focus,h?0:-1),_=u();if(g||p){let x=I();if(b(x)){let y=x.clone();if(g){let N=g.getParent();N&&y.anchor.set(N.getKey(),g.getIndexWithinParent()+(h?1:0),\"element\")}if(p){let N=p.getParent();N&&y.focus.set(N.getKey(),p.getIndexWithinParent()+(h?0:1),\"element\")}je(un(y))}}})(()=>{let u=null;for(let d of a){if(!d.isAttached())continue;let f=we(d,ct);if(f){c(f);continue}if(L(d)){if(!d.isInline())continue;if(ct(d)){if(!(ut(d)||u!==null&&u.getParentOrThrow().isParentOf(d))){c(d),u=d;continue}for(let g of d.getChildren())d.insertBefore(g);d.remove();continue}}let h=d.getPreviousSibling();ct(h)&&h.is(u)?h.append(d):(u=yn(e,{rel:i,target:r,title:o}),d.insertAfter(u),u.append(d))}})}var ly=/^\\+?[0-9\\s()-]{5,}$/;function fl(n){return n.match(/^[a-z][a-z0-9+.-]*:/i)||n.match(/^[/#.]/)?n:n.includes(\"@\")?`mailto:${n}`:ly.test(n)?`tel:${n}`:`https://${n}`}function th(n,t){return me(it(()=>n.registerCommand(Mi,e=>{let r=t.validateUrl.peek(),o=t.attributes.peek();if(e===null)return Yr(null),!0;if(typeof e==\"string\")return!(r!==void 0&&!r(e))&&(Yr(e,o),!0);{let{url:i,target:s,rel:a,title:l}=e;return Yr(i,{...o,rel:a,target:s,title:l}),!0}},pe)),it(()=>{let e=t.validateUrl.value;if(!e)return;let r=t.attributes.value;return n.registerCommand(ti,o=>{let i=I();if(!b(i)||i.isCollapsed()||!qe(o,ClipboardEvent)||o.clipboardData===null)return!1;let s=o.clipboardData.getData(\"text\");return!!e(s)&&!i.getNodes().some(a=>L(a))&&(n.dispatchCommand(Mi,{...r,url:s}),o.preventDefault(),!0)},pe)}))}var hl=ne({build:(n,t,e)=>vt(t),config:{attributes:void 0,validateUrl:void 0},mergeConfig(n,t){let e=Ut(n,t);return n.attributes&&(e.attributes=Ut(n.attributes,e.attributes)),e},name:\"@lexical/link/Link\",nodes:[xn],register:(n,t,e)=>th(n,e.getOutput())});function nh(n,t,e={}){let r=i=>{let s=i.target;if(!Yn(s))return;let a=si(s);if(a===null)return;let l=null,c=null;if(a.update(()=>{let f=nt(s);if(f!==null){let h=we(f,L);if(!t.disabled.peek())if(ct(h))l=h.sanitizeUrl(h.getURL()),c=h.getTarget();else{let g=(function(p,_){let x=p;for(;x!=null;){if(_(x))return x;x=x.parentNode}return null})(s,fi);g!==null&&(l=g.href,c=g.target)}}}),l===null||l===\"\")return;let u=n.getEditorState().read(I);if(b(u)&&!u.isCollapsed())return void i.preventDefault();let d=i.type===\"auxclick\"&&i.button===1;window.open(l,t.newTab.peek()||d||i.metaKey||i.ctrlKey||c===\"_blank\"?\"_blank\":\"_self\"),i.preventDefault()},o=i=>{i.button===1&&r(i)};return n.registerRootListener((i,s)=>{s!==null&&(s.removeEventListener(\"click\",r),s.removeEventListener(\"mouseup\",o)),i!==null&&(i.addEventListener(\"click\",r,e),i.addEventListener(\"mouseup\",o,e))})}var cy=ne({build:(n,t,e)=>vt(t),config:Te({disabled:!1,newTab:!1}),dependencies:[hl],name:\"@lexical/link/ClickableLink\",register:(n,t,e)=>nh(n,e.getOutput())});function uy(n,t=e=>e){return e=>{let r=n.exec(e);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:t(r[0])}}}function rh(n,t){for(let e=0;e<t.length;e++){let r=t[e](n);if(r)return r}return null}var dy=/[.,;\\s]/;function vi(n){return dy.test(n)}function oh(n){return vi(n[n.length-1])}function gl(n){return vi(n[0])}function ih(n){let t=n.getPreviousSibling();return L(t)&&(t=t.getLastDescendant()),t===null||sa(t)||z(t)&&oh(t.getTextContent())}function sh(n){let t=n.getNextSibling();return L(t)&&(t=t.getFirstDescendant()),t===null||sa(t)||z(t)&&gl(t.getTextContent())}function fy(n,t,e,r){return(n>0?vi(e[n-1]):ih(r[0]))?t<e.length?vi(e[t]):sh(r[r.length-1]):!1}function gy(n,t,e){let r=[],o=[],i=[],s=0,a=0,l=[...n];for(;l.length>0;){let c=l[0],u=c.getTextContent().length,d=a;a+u<=t?(r.push(c),s+=u):d>=e?i.push(c):o.push(c),a+=u,l.shift()}return[s,r,o,i]}function hy(n,t,e,r){let o=Oi(r.url,r.attributes);if(n.length===1){let i,s=n[0];t===0?[i,s]=s.splitText(e):[,i,s]=s.splitText(t,e);let a=Bt(r.text);return a.setFormat(i.getFormat()),a.setDetail(i.getDetail()),a.setStyle(i.getStyle()),o.append(a),i.replace(o),s}if(n.length>1){let i=n[0],s,a=i.getTextContent().length;t===0?s=i:[,s]=i.splitText(t);let l=[],c;for(let h=1;h<n.length;h++){let g=n[h],p=g.getTextContent().length,_=a;if(_<e)if(a+p<=e)l.push(g);else{let[x,y]=g.splitText(e-_);l.push(x),c=y}a+=p}let u=I(),d=u?u.getNodes().find(z):void 0,f=Bt(s.getTextContent());return f.setFormat(s.getFormat()),f.setDetail(s.getDetail()),f.setStyle(s.getStyle()),o.append(f,...l),d&&d===s&&(b(u)?f.select(u.anchor.offset,u.focus.offset):_e(u)&&f.select(0,f.getTextContent().length)),s.replace(o),c}}function dl(n,t,e){let r=n.getChildren(),o=r.length;for(let l=0;l<o;l++){let c=r[l];if(!z(c)||!c.isSimpleText())return Ti(n),void e(null,n.getURL())}let i=n.getTextContent(),s=rh(i,t);if(s===null||s.text!==i||!ih(n)||!sh(n))return Ti(n),void e(null,n.getURL());let a=n.getURL();if(a!==s.url&&(n.setURL(s.url),e(s.url,a)),s.attributes){let l=n.getRel();l!==s.attributes.rel&&(n.setRel(s.attributes.rel||null),e(s.attributes.rel||null,l));let c=n.getTarget();c!==s.attributes.target&&(n.setTarget(s.attributes.target||null),e(s.attributes.target||null,c))}}function Ti(n){let t=n.getChildren();for(let e=t.length-1;e>=0;e--)n.insertAfter(t[e]);return n.remove(),t.map(e=>e.getLatest())}var ah={changeHandlers:[],matchers:[]};function lh(n,t=ah){let{matchers:e,changeHandlers:r}=t,o=(i,s)=>{for(let a of r)a(i,s)};return me(n.registerNodeTransform(Hn,i=>{let s=i.getParentOrThrow(),a=i.getPreviousSibling();if(ut(s)&&!s.getIsUnlinked())dl(s,e,o);else if(!ct(s)){if(i.isSimpleText()&&(gl(i.getTextContent())||!ut(a))){let l=(function(c){let u=[c],d=c.getNextSibling();for(;d!==null&&z(d)&&d.isSimpleText()&&(u.push(d),!/[\\s]/.test(d.getTextContent()));)d=d.getNextSibling();return u})(i);(function(c,u,d){let f=[...c],h=f.map(x=>x.getTextContent()).join(\"\"),g,p=h,_=0;for(;(g=rh(p,u))&&g!==null;){let x=g.index,y=x+g.length;if(fy(_+x,_+y,h,f)){let[N,,S,M]=gy(f,_+x,_+y),E=hy(S,_+x-N,_+y-N,g);f=E?[E,...M]:M,d(g.url,null),_=0}else _+=y;p=p.substring(y)}})(l,e,o)}(function(l,c,u){let d=l.getPreviousSibling(),f=l.getNextSibling(),h=l.getTextContent();var g;!ut(d)||d.getIsUnlinked()||gl(h)&&(g=h,!(d.isEmailURI()?/^\\.[a-zA-Z]{2,}/.test(g):/^\\.[a-zA-Z0-9]{1,}/.test(g)))||(d.append(l),dl(d,c,u),u(null,d.getURL())),!ut(f)||f.getIsUnlinked()||oh(h)||(Ti(f),dl(f,c,u),u(null,f.getURL()))})(i,e,o)}}),n.registerCommand(Mi,i=>{let s=I();return i!==null||!b(s)||s.extract().forEach(a=>{let l=a.getParent();ut(l)&&(l.setIsUnlinked(!l.getIsUnlinked()),l.markDirty())}),!1},pe))}var py=ne({config:ah,dependencies:[hl],mergeConfig(n,t){let e=Ut(n,t);for(let r of[\"matchers\",\"changeHandlers\"]){let o=t[r];Array.isArray(o)&&(e[r]=[...n[r],...o])}return e},name:\"@lexical/link/AutoLink\",register:lh}),_y=Yr;var ye=pl,JS=ye.$createAutoLinkNode,jS=ye.$createLinkNode,VS=ye.$isAutoLinkNode,XS=ye.$isLinkNode,qS=ye.$toggleLink,ZS=ye.AutoLinkExtension,QS=ye.AutoLinkNode,eE=ye.ClickableLinkExtension,tE=ye.LinkExtension,ch=ye.LinkNode,uh=ye.TOGGLE_LINK_COMMAND,nE=ye.createLinkMatcherWithRegExp,rE=ye.formatUrl,oE=ye.registerAutoLink,iE=ye.registerClickableLink,sE=ye.registerLink,aE=ye.toggleLink;var fh=Ee(\"INSERT_IMAGE_COMMAND\"),_l=null;function my(n){_l=n}var Di=class n extends Ir{constructor(e,r,o,i,s){super(s);C(this,\"__src\");C(this,\"__altText\");C(this,\"__width\");C(this,\"__height\");this.__src=e,this.__altText=r||\"\",this.__width=o,this.__height=i}static getType(){return\"image\"}static clone(e){return new n(e.__src,e.__altText,e.__width,e.__height,e.__key)}static importJSON(e){return new n(e.src,e.altText,e.width,e.height)}static importDOM(){return{img:()=>({conversion:e=>{let r=e;return{node:new n(r.src,r.alt,r.width||void 0,r.height||void 0)}},priority:0})}}exportJSON(){return{type:\"image\",version:1,src:this.__src,altText:this.__altText,width:this.__width,height:this.__height}}exportDOM(){let e=document.createElement(\"img\");return e.src=this.__src,e.alt=this.__altText,this.__width&&(e.width=this.__width),this.__height&&(e.height=this.__height),{element:e}}createDOM(e){let r=document.createElement(\"div\");r.className=\"lexical-image-wrapper\",r.style.position=\"relative\",r.style.display=\"inline-block\",r.style.maxWidth=\"100%\";let o=document.createElement(\"img\");o.src=this.__src,o.alt=this.__altText,o.className=\"lexical-image\",o.style.maxWidth=\"100%\",o.style.height=\"auto\",o.style.display=\"block\",o.style.margin=\"8px 0\",o.style.borderRadius=\"4px\",this.__width&&(o.width=this.__width),this.__height&&(o.height=this.__height);let i=document.createElement(\"button\");i.className=\"lexical-image-delete-button\",i.innerHTML=\"\\xD7\",i.style.position=\"absolute\",i.style.top=\"12px\",i.style.left=\"12px\",i.style.width=\"28px\",i.style.height=\"28px\",i.style.borderRadius=\"50%\",i.style.border=\"none\",i.style.backgroundColor=\"rgba(0, 0, 0, 0.6)\",i.style.color=\"white\",i.style.fontSize=\"18px\",i.style.fontWeight=\"bold\",i.style.cursor=\"pointer\",i.style.display=\"flex\",i.style.alignItems=\"center\",i.style.justifyContent=\"center\",i.style.opacity=\"0\",i.style.transition=\"opacity 0.2s ease\",i.style.zIndex=\"10\",i.setAttribute(\"contenteditable\",\"false\"),i.setAttribute(\"aria-label\",\"\\u753B\\u50CF\\u3092\\u524A\\u9664\");let s=this.__key;return i.addEventListener(\"click\",a=>{a.preventDefault(),a.stopPropagation(),_l&&_l.update(()=>{let l=zt(s);l&&l.remove()})}),r.addEventListener(\"mouseenter\",()=>{i.style.opacity=\"1\"}),r.addEventListener(\"mouseleave\",()=>{i.style.opacity=\"0\"}),r.addEventListener(\"touchstart\",()=>{i.style.opacity=\"1\"}),r.appendChild(o),r.appendChild(i),r}updateDOM(){return!1}getTextContent(){return`\n`}decorate(){return null}};function yy(n){return n.registerCommand(fh,t=>{let e=I();if(!b(e))return!1;let r=new Di(t.src,t.altText,t.width,t.height);Ar([r]);let o=re();return r.insertAfter(o),o.select(),!0},B)}var gh=Ee(\"INSERT_DIVIDER_COMMAND\"),Ai=class n extends Ir{static getType(){return\"divider\"}static clone(t){return new n(t.__key)}static importJSON(t){return new n}static importDOM(){return{hr:()=>({conversion:()=>({node:new n}),priority:0})}}exportJSON(){return{type:\"divider\",version:1}}exportDOM(){return{element:document.createElement(\"hr\")}}createDOM(t){let e=document.createElement(\"hr\");return e.className=\"lexical-divider\",e}getTextContent(){return`\n`}updateDOM(){return!1}decorate(){return null}};function xy(n){return n.registerCommand(gh,()=>{let t=I();if(!b(t))return!1;let e=new Ai;Ar([e]);let r=re();return e.insertAfter(r),r.select(),!0},B)}function dt(n){let t=window.ReactNativeWebView;t&&t.postMessage(JSON.stringify(n))}function Ny(n){let t=document.getElementById(\"editor\");if(!t)throw new Error(\"Editor element not found\");let e=document.createElement(\"div\");e.contentEditable=\"true\",e.className=\"editor-input show-placeholder\",e.setAttribute(\"data-placeholder\",n),e.setAttribute(\"spellcheck\",\"false\"),t.appendChild(e);let r=ii({namespace:\"PlaygroundEditor\",nodes:[Tg,qg,Xg,ch,Ai,Di],theme:{text:{bold:\"text-bold\",italic:\"text-italic\",underline:\"text-underline\",strikethrough:\"text-strikethrough\",underlineStrikethrough:\"text-underline-strikethrough\"}},onError:o=>{console.error(\"Lexical error:\",o),dt({type:\"error\",payload:{message:o.message}})}});return r.setRootElement(e),my(r),Og(r),Qg(r),xy(r),yy(r),qf(r,Xf(),1e3),r.registerCommand(fn,o=>(dt({type:\"canUndoChange\",payload:{canUndo:o}}),!1),B),r.registerCommand(dn,o=>(dt({type:\"canRedoChange\",payload:{canRedo:o}}),!1),B),r.registerUpdateListener(({editorState:o})=>{o.read(()=>{let i=o.toJSON();dt({type:\"contentChange\",payload:{state:JSON.stringify(i)}})}),Cy(r),Sy(r)}),r.registerCommand(qo,()=>!1,pd),e.addEventListener(\"focus\",()=>{dt({type:\"focus\",payload:{}})}),e.addEventListener(\"blur\",()=>{dt({type:\"blur\",payload:{}})}),r}function Cy(n){let t=n.getRootElement();t&&n.getEditorState().read(()=>{let e=Se(),r=e.getTextContent(),o=e.getChildren();r.trim()===\"\"&&(o.length===0||o.length===1&&o[0].getType()===\"paragraph\"&&o[0].getTextContent()===\"\")?t.classList.add(\"show-placeholder\"):t.classList.remove(\"show-placeholder\")})}function Sy(n){n.getEditorState().read(()=>{let t=I();if(!b(t))return;let e=Ea(t,\"color\",void 0),r=Ea(t,\"background-color\",void 0),o={isBold:t.hasFormat(\"bold\"),isItalic:t.hasFormat(\"italic\"),isUnderline:t.hasFormat(\"underline\"),isStrikethrough:t.hasFormat(\"strikethrough\"),blockType:\"paragraph\",textColor:e||null,backgroundColor:r||null,elementFormat:\"left\"},i=t.anchor.getNode(),s=i.getKey()===\"root\"?i:i.getTopLevelElementOrThrow();if(L(s)&&(o.elementFormat=s.getFormatType()||\"left\"),Eg(s)){let a=s.getTag();o.blockType=a}else if(ul(s)){let a=s.getListType();o.blockType=a===\"bullet\"?\"bullet\":\"number\"}else{let a=i.getParent();if(a){let l=a.getParent();if(l&&ul(l)){let c=l.getListType();o.blockType=c===\"bullet\"?\"bullet\":\"number\"}}}dt({type:\"selectionChange\",payload:o})})}function Ey(n,t){switch(t.type){case\"setPlaceholder\":{let e=n.getRootElement();e&&e.setAttribute(\"data-placeholder\",String(t.payload||\"\"));break}case\"focus\":n.focus();break;case\"blur\":{n.getRootElement()?.blur();break}case\"getContent\":n.getEditorState().read(()=>{let e=n.getEditorState().toJSON();dt({type:\"contentChange\",payload:{state:JSON.stringify(e)}})});break;case\"formatText\":{let e=t.payload;n.dispatchCommand(Ho,e);break}case\"formatHeading\":{let e=t.payload;n.update(()=>{let r=I();b(r)&&(e===\"paragraph\"?Ma(r,()=>re()):Ma(r,()=>Sg(e)))});break}case\"formatList\":{let e=t.payload;e===\"bullet\"?n.dispatchCommand(Vg,void 0):e===\"number\"?n.dispatchCommand(jg,void 0):n.dispatchCommand(Zg,void 0);break}case\"insertLink\":{let e=t.payload;n.dispatchCommand(uh,e||null);break}case\"setContent\":{let e=t.payload;try{let r=n.parseEditorState(e);n.setEditorState(r)}catch(r){console.error(\"Failed to set content:\",r)}break}case\"setEditable\":n.setEditable(t.payload!==!1);break;case\"insertDivider\":n.dispatchCommand(gh,void 0);break;case\"insertImage\":{let e=t.payload;n.dispatchCommand(fh,e);break}case\"applyStyle\":{let e=t.payload;n.update(()=>{let r=I();b(r)&&nf(r,e)});break}case\"formatAlign\":{let e=t.payload;n.dispatchCommand(Uo,e);break}case\"undo\":n.dispatchCommand(ri,void 0);break;case\"redo\":n.dispatchCommand(ni,void 0);break}}function dh(){let n=Ny(\"\\u30C6\\u30AD\\u30B9\\u30C8\\u3092\\u5165\\u529B...\");window.handleMessage=t=>{try{let e=typeof t==\"string\"?JSON.parse(t):t;Ey(n,e)}catch(e){console.error(\"Error handling message:\",e),dt({type:\"error\",payload:{message:e instanceof Error?e.message:String(e)}})}},dt({type:\"ready\",payload:{}})}document.readyState===\"loading\"?document.addEventListener(\"DOMContentLoaded\",dh):dh();})();\n\n    </script>\n  </body>\n</html>\n";
