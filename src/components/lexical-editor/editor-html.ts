/**
 * Auto-generated Lexical Editor HTML
 *
 * DO NOT EDIT THIS FILE DIRECTLY.
 * Edit the source files in the web/ directory and run the build script.
 *
 * Generated at: 2025-12-14T15:03:39.013Z
 */
export const EDITOR_HTML = "<!doctype html>\n<html lang=\"ja\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"\n    />\n    <title>Lexical Editor</title>\n    <style>\n      * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      html, body {\n        height: 100%;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        font-size: 16px;\n        line-height: 1.6;\n        -webkit-text-size-adjust: 100%;\n        background-color: #141414;\n        color: #fff;\n      }\n\n      #editor-container {\n        height: 100%;\n        position: relative;\n      }\n\n      #editor {\n        height: 100%;\n        padding: 16px;\n        outline: none;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      .editor-input {\n        min-height: 100%;\n        outline: none;\n        caret-color: #007AFF;\n        color: #fff;\n        white-space: pre-wrap;\n        word-wrap: break-word;\n      }\n\n      .editor-input:focus {\n        outline: none;\n      }\n\n      .editor-input.show-placeholder:before {\n        content: attr(data-placeholder);\n        color: #6B7280;\n        pointer-events: none;\n        position: absolute;\n      }\n\n      /* Text formatting - native elements */\n      .editor-input b,\n      .editor-input strong {\n        font-weight: bold;\n      }\n\n      .editor-input i,\n      .editor-input em {\n        font-style: italic;\n      }\n\n      .editor-input u {\n        text-decoration: underline;\n      }\n\n      .editor-input s,\n      .editor-input strike {\n        text-decoration: line-through;\n      }\n\n      /* Text formatting - Lexical theme classes */\n      .text-bold {\n        font-weight: bold;\n      }\n\n      .text-italic {\n        font-style: italic;\n      }\n\n      .text-underline {\n        text-decoration: underline;\n      }\n\n      .text-strikethrough {\n        text-decoration: line-through;\n      }\n\n      .text-underline-strikethrough {\n        text-decoration: underline line-through;\n      }\n\n      /* Headings */\n      .editor-input h1 {\n        font-size: 24px;\n        font-weight: bold;\n        margin: 16px 0 8px 0;\n      }\n\n      .editor-input h2 {\n        font-size: 20px;\n        font-weight: bold;\n        margin: 12px 0 6px 0;\n      }\n\n      /* Lists */\n      .editor-input ul,\n      .editor-input ol {\n        padding-left: 24px;\n        margin: 8px 0;\n      }\n\n      .editor-input li {\n        margin: 4px 0;\n      }\n\n      /* Links */\n      .editor-input a {\n        color: #007AFF;\n        text-decoration: underline;\n      }\n\n      /* Paragraphs */\n      .editor-input p {\n        margin: 0;\n        min-height: 1.6em;\n      }\n\n      /* Divider */\n      .editor-input hr,\n      .lexical-divider {\n        display: block;\n        margin: 16px 0;\n        border: none;\n        border-top: 1px solid #444;\n        cursor: pointer;\n      }\n\n      .lexical-divider:focus,\n      .lexical-divider.selected {\n        outline: 2px solid #007AFF;\n        outline-offset: 2px;\n      }\n    </style>\n  </head>\n  <body>\n    <div id=\"editor-container\">\n      <div id=\"editor\"></div>\n    </div>\n\n    <script>\n      \"use strict\";(()=>{var ml=Object.defineProperty;var dh=(n,t,e)=>t in n?ml(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Fe=(n,t)=>{for(var e in t)ml(n,e,{get:t[e],enumerable:!0})};var C=(n,t,e)=>dh(n,typeof t!=\"symbol\"?t+\"\":t,e);var Qi={};Fe(Qi,{$addUpdateTag:()=>bu,$applyNodeReplacement:()=>vo,$caretFromPoint:()=>Pt,$caretRangeFromSelection:()=>mi,$cloneWithProperties:()=>Gi,$cloneWithPropertiesEphemeral:()=>Yp,$comparePointCaretNext:()=>Xi,$copyNode:()=>Hi,$create:()=>Jp,$createLineBreakNode:()=>Dn,$createNodeSelection:()=>Ai,$createParagraphNode:()=>Nt,$createPoint:()=>He,$createRangeSelection:()=>cu,$createRangeSelectionFromDom:()=>xp,$createTabNode:()=>Er,$createTextNode:()=>le,$extendCaretToRange:()=>ji,$findMatchingParent:()=>uo,$getAdjacentChildCaret:()=>Ln,$getAdjacentNode:()=>Du,$getAdjacentSiblingOrParentSiblingCaret:()=>t_,$getCaretInDirection:()=>Ft,$getCaretRange:()=>wt,$getCaretRangeInDirection:()=>Zi,$getCharacterOffsets:()=>ci,$getChildCaret:()=>Et,$getChildCaretAtIndex:()=>Hu,$getChildCaretOrSelf:()=>Ku,$getCollapsedCaretRange:()=>Bu,$getCommonAncestor:()=>fo,$getCommonAncestorResultBranchOrder:()=>qi,$getEditor:()=>Yi,$getNearestNodeFromDOMNode:()=>Ar,$getNearestRootOrShadowRoot:()=>ku,$getNodeByKey:()=>ae,$getNodeByKeyOrThrow:()=>$u,$getNodeFromDOMNode:()=>Pi,$getPreviousSelection:()=>rn,$getRoot:()=>ke,$getSelection:()=>Y,$getSiblingCaret:()=>he,$getState:()=>rr,$getStateChange:()=>Hh,$getTextContent:()=>Sp,$getTextNodeOffset:()=>Ue,$getTextPointCaret:()=>Lt,$getTextPointCaretSlice:()=>pi,$getWritableNodeState:()=>Ni,$hasAncestor:()=>xr,$hasUpdateTag:()=>Bp,$insertNodes:()=>Cp,$isBlockElementNode:()=>yp,$isChildCaret:()=>ze,$isDecoratorNode:()=>Z,$isEditorState:()=>Mp,$isElementNode:()=>v,$isExtendableTextPointCaret:()=>Uu,$isInlineElementOrDecoratorNode:()=>Wp,$isLeafNode:()=>Pp,$isLineBreakNode:()=>Vt,$isNodeCaret:()=>Xp,$isNodeSelection:()=>Tr,$isParagraphNode:()=>_u,$isRangeSelection:()=>w,$isRootNode:()=>ge,$isRootOrShadowRoot:()=>Ye,$isSiblingCaret:()=>on,$isTabNode:()=>Di,$isTextNode:()=>I,$isTextPointCaret:()=>St,$isTextPointCaretSlice:()=>e_,$isTokenOrSegmented:()=>_t,$isTokenOrTab:()=>Rt,$nodesOfType:()=>Kp,$normalizeCaret:()=>Be,$normalizeSelection__EXPERIMENTAL:()=>sr,$onUpdate:()=>Ru,$parseSerializedNode:()=>Op,$removeTextFromCaretRange:()=>zu,$rewindSiblingCaret:()=>Kn,$selectAll:()=>Fp,$setCompositionKey:()=>ue,$setPointFromCaret:()=>wn,$setSelection:()=>Me,$setSelectionFromCaretRange:()=>Wu,$setState:()=>Yh,$splitAtPointCaretNext:()=>r_,$splitNode:()=>zp,$updateRangeSelectionFromCaretRange:()=>go,ArtificialNode__DO_NOT_USE:()=>_r,BLUR_COMMAND:()=>Uc,CAN_REDO_COMMAND:()=>op,CAN_UNDO_COMMAND:()=>rp,CLEAR_EDITOR_COMMAND:()=>tp,CLEAR_HISTORY_COMMAND:()=>np,CLICK_COMMAND:()=>Oc,COLLABORATION_TAG:()=>eu,COMMAND_PRIORITY_CRITICAL:()=>kp,COMMAND_PRIORITY_EDITOR:()=>Dp,COMMAND_PRIORITY_HIGH:()=>Rp,COMMAND_PRIORITY_LOW:()=>Ap,COMMAND_PRIORITY_NORMAL:()=>bp,CONTROLLED_TEXT_INSERTION_COMMAND:()=>En,COPY_COMMAND:()=>Oi,CUT_COMMAND:()=>Mi,DELETE_CHARACTER_COMMAND:()=>yo,DELETE_LINE_COMMAND:()=>No,DELETE_WORD_COMMAND:()=>xo,DRAGEND_COMMAND:()=>Wc,DRAGOVER_COMMAND:()=>Bc,DRAGSTART_COMMAND:()=>Kc,DROP_COMMAND:()=>Fc,DecoratorNode:()=>Co,ElementNode:()=>It,FOCUS_COMMAND:()=>zc,FORMAT_ELEMENT_COMMAND:()=>ep,FORMAT_TEXT_COMMAND:()=>At,HISTORIC_TAG:()=>ap,HISTORY_MERGE_TAG:()=>tr,HISTORY_PUSH_TAG:()=>lp,INDENT_CONTENT_COMMAND:()=>Zh,INSERT_LINE_BREAK_COMMAND:()=>io,INSERT_PARAGRAPH_COMMAND:()=>ei,INSERT_TAB_COMMAND:()=>qh,INTERNAL_$isBlock:()=>xt,IS_ALL_FORMATTING:()=>Th,IS_BOLD:()=>mh,IS_CODE:()=>Ch,IS_HIGHLIGHT:()=>yi,IS_ITALIC:()=>yh,IS_STRIKETHROUGH:()=>xh,IS_SUBSCRIPT:()=>Sh,IS_SUPERSCRIPT:()=>Eh,IS_UNDERLINE:()=>Nh,KEY_ARROW_DOWN_COMMAND:()=>kc,KEY_ARROW_LEFT_COMMAND:()=>Ac,KEY_ARROW_RIGHT_COMMAND:()=>vc,KEY_ARROW_UP_COMMAND:()=>Rc,KEY_BACKSPACE_COMMAND:()=>Ic,KEY_DELETE_COMMAND:()=>wc,KEY_DOWN_COMMAND:()=>Mc,KEY_ENTER_COMMAND:()=>ur,KEY_ESCAPE_COMMAND:()=>Lc,KEY_MODIFIER_COMMAND:()=>Hc,KEY_SPACE_COMMAND:()=>$c,KEY_TAB_COMMAND:()=>Pc,LineBreakNode:()=>vn,MOVE_TO_END:()=>Dc,MOVE_TO_START:()=>bc,NODE_STATE_KEY:()=>Fh,OUTDENT_CONTENT_COMMAND:()=>Qh,PASTE_COMMAND:()=>Si,PASTE_TAG:()=>cp,ParagraphNode:()=>Rn,REDO_COMMAND:()=>Ti,REMOVE_TEXT_COMMAND:()=>ti,RootNode:()=>bn,SELECTION_CHANGE_COMMAND:()=>Ci,SELECTION_INSERT_CLIPBOARD_NODES_COMMAND:()=>Xh,SELECT_ALL_COMMAND:()=>ni,SKIP_COLLAB_TAG:()=>up,SKIP_DOM_SELECTION_TAG:()=>nu,SKIP_SCROLL_INTO_VIEW_TAG:()=>tu,SKIP_SELECTION_FOCUS_TAG:()=>ou,TEXT_TYPE_TO_FORMAT:()=>xe,TabNode:()=>An,TextNode:()=>Qt,UNDO_COMMAND:()=>Ei,buildImportMap:()=>ip,configExtension:()=>i_,createCommand:()=>K,createEditor:()=>$p,createSharedNodeState:()=>xc,createState:()=>Uh,declarePeerDependency:()=>a_,defineExtension:()=>s_,flipDirection:()=>Kt,getDOMOwnerDocument:()=>zi,getDOMSelection:()=>et,getDOMSelectionFromTarget:()=>Iu,getDOMTextNode:()=>tn,getEditorPropertyFromDOMNode:()=>Oo,getNearestEditorFromDOMNode:()=>wi,getRegisteredNode:()=>Ii,getRegisteredNodeOrThrow:()=>$i,getStaticNodeConfig:()=>Do,getTextDirection:()=>wp,getTransformSetFromKlass:()=>yu,isBlockDomNode:()=>gi,isCurrentlyReadOnlyMode:()=>Pn,isDOMDocumentNode:()=>Nu,isDOMNode:()=>Fn,isDOMTextNode:()=>tt,isDOMUnmanaged:()=>Fu,isDocumentFragment:()=>Lu,isExactShortcutMatch:()=>j,isHTMLAnchorElement:()=>Up,isHTMLElement:()=>Ce,isInlineDomNode:()=>wu,isLexicalEditor:()=>vr,isModifierMatch:()=>vu,isSelectionCapturedInDecoratorInput:()=>Li,isSelectionWithinEditor:()=>To,makeStepwiseIterator:()=>Vi,removeFromParent:()=>kt,resetRandomKey:()=>Ip,safeCast:()=>l_,setDOMUnmanaged:()=>Gp,setNodeIndentFromDOM:()=>Pu,shallowMergeConfig:()=>c_});function A(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",n);for(let r of t)o.append(\"v\",r);throw e.search=o.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function uc(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",n);for(let r of t)o.append(\"v\",r);e.search=o.toString(),console.warn(`Minified Lexical warning #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var Ge=typeof window<\"u\"&&window.document!==void 0&&window.document.createElement!==void 0,fh=Ge&&\"documentMode\"in document?document.documentMode:null,Ke=Ge&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Xt=Ge&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),or=!(!Ge||!(\"InputEvent\"in window)||fh)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),ho=Ge&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),Mn=Ge&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,gh=Ge&&/Android/.test(navigator.userAgent),dc=Ge&&/^(?=.*Chrome).*/i.test(navigator.userAgent),yl=Ge&&gh&&dc,po=Ge&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&Ke&&!dc;function fc(...n){let t=[];for(let e of n)if(e&&typeof e==\"string\")for(let[o]of e.matchAll(/\\S+/g))t.push(o);return t}var hh=0,ph=1,_h=2,mh=1,yh=2,xh=4,Nh=8,Ch=16,Sh=32,Eh=64,yi=128,Th=2047,Oh=1,Mh=2,vh=3,Dh=4,Ah=5,bh=6,Cr=ho||Mn||po?\"\\xA0\":\"\\u200B\",$t=`\n\n`,Rh=Xt?\"\\xA0\":Cr,gc=\"\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC\",hc=\"A-Za-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C\\uFE00-\\uFE6F\\uFEFD-\\uFFFF\",kh=new RegExp(\"^[^\"+hc+\"]*[\"+gc+\"]\"),$h=new RegExp(\"^[^\"+gc+\"]*[\"+hc+\"]\"),xe={bold:1,capitalize:1024,code:16,highlight:yi,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},Ih={directionless:1,unmergeable:2},xl={center:2,end:6,justify:4,left:1,right:3,start:5},Lh={[Mh]:\"center\",[bh]:\"end\",[Dh]:\"justify\",[Oh]:\"left\",[vh]:\"right\",[Ah]:\"start\"},wh={normal:0,segmented:2,token:1},Ph={[hh]:\"normal\",[_h]:\"segmented\",[ph]:\"token\"},Fh=\"$\",Nl=\"$config\";function pc(n,t,e,o,r,s){let i=n.getFirstChild();for(;i!==null;){let a=i.__key;i.__parent===t&&(v(i)&&pc(i,a,e,o,r,s),e.has(a)||s.delete(a),r.push(a)),i=i.getNextSibling()}}var Hs=!1,xi=0;function Kh(n){xi=n.timeStamp}function ks(n,t,e){let o=n.nodeName===\"BR\",r=t.__lexicalLineBreak;return r&&(n===r||o&&n.previousSibling===r)||o&&Dr(n,e)!==void 0}function Bh(n,t,e){let o=et(Ie(e)),r=null,s=null;o!==null&&o.anchorNode===n&&(r=o.anchorOffset,s=o.focusOffset);let i=n.nodeValue;i!==null&&Bi(t,i,r,s,!1)}function Wh(n,t,e){if(w(n)){let o=n.anchor.getNode();if(o.is(e)&&n.format!==o.getFormat())return!1}return tt(t)&&e.isAttached()}function zh(n,t,e,o){for(let r=n;r&&!Fu(r);r=Mo(r)){let s=Dr(r,t);if(s!==void 0){let i=ae(s,e);if(i)return Z(i)||!Ce(r)?void 0:[r,i]}else if(r===o)return[o,Eu(e)]}}function _c(n,t,e){Hs=!0;let o=performance.now()-xi>100;try{be(n,()=>{let r=Y()||(function(f){return f.getEditorState().read(()=>{let h=Y();return h!==null?h.clone():null})})(n),s=new Map,i=n.getRootElement(),a=n._editorState,l=n._blockCursorElement,c=!1,u=\"\";for(let f=0;f<t.length;f++){let h=t[f],g=h.type,p=h.target,_=zh(p,n,a,i);if(!_)continue;let[x,y]=_;if(g===\"characterData\")o&&I(y)&&tt(p)&&Wh(r,p,y)&&Bh(p,y,n);else if(g===\"childList\"){c=!0;let N=h.addedNodes;for(let E=0;E<N.length;E++){let T=N[E],D=Pi(T),O=T.parentNode;if(O!=null&&T!==l&&D===null&&!ks(T,O,n)){if(Xt){let b=(Ce(T)?T.innerText:null)||T.nodeValue;b&&(u+=b)}O.removeChild(T)}}let S=h.removedNodes,M=S.length;if(M>0){let E=0;for(let T=0;T<M;T++){let D=S[T];(ks(D,p,n)||l===D)&&(p.appendChild(D),E++)}M!==E&&s.set(x,y)}}}if(s.size>0)for(let[f,h]of s)h.reconcileObservedMutation(f,n);let d=e.takeRecords();if(d.length>0){for(let f=0;f<d.length;f++){let h=d[f],g=h.addedNodes,p=h.target;for(let _=0;_<g.length;_++){let x=g[_],y=x.parentNode;y==null||x.nodeName!==\"BR\"||ks(x,p,n)||y.removeChild(x)}}e.takeRecords()}r!==null&&(c&&Me(r),Xt&&Au(n)&&r.insertRawText(u))})}finally{Hs=!1}}function mc(n){let t=n._observer;t!==null&&_c(n,t.takeRecords(),t)}function yc(n){(function(t){xi===0&&Ie(t).addEventListener(\"textInput\",Kh,!0)})(n),n._observer=new MutationObserver((t,e)=>{_c(n,t,e)})}var Ys=class{constructor(t,e){C(this,\"key\");C(this,\"parse\");C(this,\"unparse\");C(this,\"isEqual\");C(this,\"defaultValue\");this.key=t,this.parse=e.parse.bind(e),this.unparse=(e.unparse||Gh).bind(e),this.isEqual=(e.isEqual||Object.is).bind(e),this.defaultValue=this.parse(void 0)}};function Uh(n,t){return new Ys(n,t)}function rr(n,t,e=\"latest\"){let o=(e===\"latest\"?n.getLatest():n).__state;return o?o.getValue(t):t.defaultValue}function Hh(n,t,e){let o=rr(n,e,\"direct\"),r=rr(t,e,\"direct\");return e.isEqual(o,r)?null:[o,r]}function Yh(n,t,e){let o;if(ce(),typeof e==\"function\"){let s=n.getLatest(),i=rr(s,t);if(o=e(i),t.isEqual(i,o))return s}else o=e;let r=n.getWritable();return Ni(r).updateFromKnown(t,o),r}function xc(n){let t=new Map,e=new Set;for(let o=typeof n==\"function\"?n:n.replace;o.prototype&&o.prototype.getType!==void 0;o=Object.getPrototypeOf(o)){let{ownNodeConfig:r}=Do(o);if(r&&r.stateConfigs)for(let s of r.stateConfigs){let i;\"stateConfig\"in s?(i=s.stateConfig,s.flat&&e.add(i.key)):i=s,t.set(i.key,i)}}return{flatKeys:e,sharedConfigMap:t}}var Gs=class n{constructor(t,e,o=void 0,r=new Map,s=void 0){C(this,\"node\");C(this,\"knownState\");C(this,\"unknownState\");C(this,\"sharedNodeState\");C(this,\"size\");this.node=t,this.sharedNodeState=e,this.unknownState=o,this.knownState=r;let{sharedConfigMap:i}=this.sharedNodeState,a=s!==void 0?s:(function(l,c,u){let d=u.size;if(c)for(let f in c){let h=l.get(f);h&&u.has(h)||d++}return d})(i,o,r);this.size=a}getValue(t){let e=this.knownState.get(t);if(e!==void 0)return e;this.sharedNodeState.sharedConfigMap.set(t.key,t);let o=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){let r=this.unknownState[t.key];r!==void 0&&(o=t.parse(r)),this.updateFromKnown(t,o)}return o}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let t={...this.unknownState},e={};for(let[o,r]of this.knownState)o.isEqual(r,o.defaultValue)?delete t[o.key]:t[o.key]=o.unparse(r);for(let o of this.sharedNodeState.flatKeys)o in t&&(e[o]=t[o],delete t[o]);return Cl(t)&&(e.$=t),e}getWritable(t){if(this.node===t)return this;let{sharedNodeState:e,unknownState:o}=this,r=new Map(this.knownState);return new n(t,e,(function(s,i,a){let l;if(a)for(let[c,u]of Object.entries(a)){let d=s.get(c);d?i.has(d)||i.set(d,d.parse(u)):(l=l||{},l[c]=u)}return l})(e.sharedConfigMap,r,o),r,this.size)}updateFromKnown(t,e){let o=t.key;this.sharedNodeState.sharedConfigMap.set(o,t);let{knownState:r,unknownState:s}=this;r.has(t)||s&&o in s||(s&&(delete s[o],this.unknownState=Cl(s)),this.size++),r.set(t,e)}updateFromUnknown(t,e){let o=this.sharedNodeState.sharedConfigMap.get(t);o?this.updateFromKnown(o,o.parse(e)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=e)}updateFromJSON(t){let{knownState:e}=this;for(let o of e.keys())e.set(o,o.defaultValue);if(this.size=e.size,this.unknownState=void 0,t)for(let[o,r]of Object.entries(t))this.updateFromUnknown(o,r)}};function Ni(n){let t=n.getWritable(),e=t.__state?t.__state.getWritable(t):new Gs(t,Nc(t));return t.__state=e,e}function Nc(n){return n.__state?n.__state.sharedNodeState:$i(Yi(),n.getType()).sharedNodeState}function Cl(n){if(n)for(let t in n)return n}function Gh(n){return n}function Sl(n,t,e){for(let[o,r]of t.knownState){if(n.has(o.key))continue;n.add(o.key);let s=e?e.getValue(o):o.defaultValue;if(s!==r&&!o.isEqual(s,r))return!0}return!1}function El(n,t,e){let{unknownState:o}=t,r=e?e.unknownState:void 0;if(o){for(let[s,i]of Object.entries(o))if(!n.has(s)&&(n.add(s),i!==(r?r[s]:void 0)))return!0}return!1}function Tl(n,t){let e=n.__state;return e&&e.node===n?e.getWritable(t):e}function Ol(n,t){let e=n.__mode,o=n.__format,r=n.__style,s=t.__mode,i=t.__format,a=t.__style,l=n.__state,c=t.__state;return(e===null||e===s)&&(o===null||o===i)&&(r===null||r===a)&&(n.__state===null||l===c||(function(u,d){if(u===d)return!0;if(u&&d&&u.size!==d.size)return!1;let f=new Set;return!(u&&Sl(f,u,d)||d&&Sl(f,d,u)||u&&El(f,u,d)||d&&El(f,d,u))})(l,c))}function Ml(n,t){let e=n.mergeWithSibling(t),o=te()._normalizedNodes;return o.add(n.__key),o.add(t.__key),e}function vl(n){let t,e,o=n;if(o.__text!==\"\"||!o.isSimpleText()||o.isUnmergeable()){for(;(t=o.getPreviousSibling())!==null&&I(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==\"\"){if(Ol(t,o)){o=Ml(t,o);break}break}t.remove()}for(;(e=o.getNextSibling())!==null&&I(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==\"\"){if(Ol(o,e)){o=Ml(o,e);break}break}e.remove()}}else o.remove()}function sr(n){return Dl(n.anchor),Dl(n.focus),n}function Dl(n){for(;n.type===\"element\";){let t=n.getNode(),e=n.offset,o,r;if(e===t.getChildrenSize()?(o=t.getChildAtIndex(e-1),r=!0):(o=t.getChildAtIndex(e),r=!1),I(o)){n.set(o.__key,r?o.getTextContentSize():0,\"text\",!0);break}if(!v(o))break;n.set(o.__key,r?o.getChildrenSize():0,\"element\",!0)}}var qt,Ne,_o,Sr,Js,js,Zt,We,Vs,mo,ie=\"\",Ze=null,Qe=\"\",mt=\"\",Nn=!1,ir=!1;function ar(n,t){let e=Zt.get(n);if(t!==null){let o=Qs(n);o.parentNode===t&&t.removeChild(o)}if(We.has(n)||Ne._keyToDOMMap.delete(n),v(e)){let o=cr(e,Zt);Xs(o,0,o.length-1,null)}e!==void 0&&Wi(mo,_o,Sr,e,\"destroyed\")}function Xs(n,t,e,o){let r=t;for(;r<=e;++r){let s=n[r];s!==void 0&&ar(s,o)}}function Jt(n,t){n.setProperty(\"text-align\",t)}var Jh=\"40px\";function Cc(n,t){let e=qt.theme.indent;if(typeof e==\"string\"){let r=n.classList.contains(e);t>0&&!r?n.classList.add(e):t<1&&r&&n.classList.remove(e)}let o=getComputedStyle(n).getPropertyValue(\"--lexical-indent-base-value\")||Jh;n.style.setProperty(\"padding-inline-start\",t===0?\"\":`calc(${t} * ${o})`)}function Sc(n,t){let e=n.style;t===0?Jt(e,\"\"):t===1?Jt(e,\"left\"):t===2?Jt(e,\"center\"):t===3?Jt(e,\"right\"):t===4?Jt(e,\"justify\"):t===5?Jt(e,\"start\"):t===6&&Jt(e,\"end\")}function qs(n,t){let e=(function(o){let r=o.__dir;if(r!==null)return r;if(ge(o))return null;let s=o.getParentOrThrow();return ge(s)&&s.__dir===null?\"auto\":null})(t);e!==null?n.dir=e:n.removeAttribute(\"dir\")}function lr(n,t){let e=We.get(n);e===void 0&&A(60);let o=e.createDOM(qt,Ne);if((function(r,s,i){let a=i._keyToDOMMap;(function(l,c,u){let d=`__lexicalKey_${c._key}`;l[d]=u})(s,i,r),a.set(r,s)})(n,o,Ne),I(e)?o.setAttribute(\"data-lexical-text\",\"true\"):Z(e)&&o.setAttribute(\"data-lexical-decorator\",\"true\"),v(e)){let r=e.__indent,s=e.__size;if(qs(o,e),r!==0&&Cc(o,r),s!==0){let a=s-1;Zs(cr(e,We),e,0,a,e.getDOMSlot(o))}let i=e.__format;i!==0&&Sc(o,i),e.isInline()||Ec(null,e,o),br(e)&&(ie+=$t,mt+=$t)}else{let r=e.getTextContent();if(Z(e)){let s=e.decorate(Ne,qt);s!==null&&Tc(n,s),o.contentEditable=\"false\"}ie+=r,mt+=r}return t!==null&&t.insertChild(o),Wi(mo,_o,Sr,e,\"created\"),o}function Zs(n,t,e,o,r){let s=ie;ie=\"\";let i=e;for(;i<=o;++i){lr(n[i],r);let a=We.get(n[i]);a!==null&&I(a)&&(Ze===null&&(Ze=a.getFormat()),Qe===\"\"&&(Qe=a.getStyle()))}br(t)&&(ie+=$t),r.element.__lexicalTextContent=ie,ie=s+ie}function Al(n,t){if(n){let e=n.__last;if(e){let o=t.get(e);if(o)return Vt(o)?\"line-break\":Z(o)&&o.isInline()?\"decorator\":null}return\"empty\"}return null}function Ec(n,t,e){let o=Al(n,Zt),r=Al(t,We);o!==r&&t.getDOMSlot(e).setManagedLineBreak(r)}function jh(n,t,e){var o;Ze=null,Qe=\"\",(function(r,s,i){let a=ie,l=r.__size,c=s.__size;ie=\"\";let u=i.element;if(l===1&&c===1){let d=r.__first,f=s.__first;if(d===f)so(d,u);else{let g=Qs(d),p=lr(f,null);try{u.replaceChild(p,g)}catch(_){if(typeof _==\"object\"&&_!=null){let x=`${_.toString()} Parent: ${u.tagName}, new child: {tag: ${p.tagName} key: ${f}}, old child: {tag: ${g.tagName}, key: ${d}}.`;throw new Error(x)}throw _}ar(d,null)}let h=We.get(f);I(h)&&(Ze===null&&(Ze=h.getFormat()),Qe===\"\"&&(Qe=h.getStyle()))}else{let d=cr(r,Zt),f=cr(s,We);if(d.length!==l&&A(227),f.length!==c&&A(228),l===0)c!==0&&Zs(f,s,0,c-1,i);else if(c===0){if(l!==0){let h=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;Xs(d,0,l-1,h?null:u),h&&(u.textContent=\"\")}}else(function(h,g,p,_,x,y){let N=_-1,S=x-1,M,E,T=y.getFirstChild(),D=0,O=0;for(;D<=N&&O<=S;){let q=g[D],H=p[O];if(q===H)T=$s(so(H,y.element)),D++,O++;else{M===void 0&&(M=new Set(g)),E===void 0&&(E=new Set(p));let ee=E.has(q),se=M.has(H);if(ee)if(se){let Ae=nn(Ne,H);Ae===T?T=$s(so(H,y.element)):(y.withBefore(T).insertChild(Ae),so(H,y.element)),D++,O++}else lr(H,y.withBefore(T)),O++;else T=$s(Qs(q)),ar(q,y.element),D++}let G=We.get(H);G!==null&&I(G)&&(Ze===null&&(Ze=G.getFormat()),Qe===\"\"&&(Qe=G.getStyle()))}let b=D>N,P=O>S;if(b&&!P){let q=p[S+1],H=q===void 0?null:Ne.getElementByKey(q);Zs(p,h,O,S,y.withBefore(H))}else P&&!b&&Xs(g,D,N,y.element)})(s,d,f,l,c,i)}br(s)&&(ie+=$t),u.__lexicalTextContent=ie,ie=a+ie})(n,t,t.getDOMSlot(e)),o=t,Ze==null||Ze===o.__textFormat||ir||o.setTextFormat(Ze),(function(r){Qe===\"\"||Qe===r.__textStyle||ir||r.setTextStyle(Qe)})(t)}function cr(n,t){let e=[],o=n.__first;for(;o!==null;){let r=t.get(o);r===void 0&&A(101),e.push(o),o=r.__next}return e}function so(n,t){let e=Zt.get(n),o=We.get(n);e!==void 0&&o!==void 0||A(61);let r=Nn||js.has(n)||Js.has(n),s=nn(Ne,n);if(e===o&&!r){if(v(e)){let i=s.__lexicalTextContent;i!==void 0&&(ie+=i,mt+=i)}else{let i=e.getTextContent();mt+=i,ie+=i}return s}if(e!==o&&r&&Wi(mo,_o,Sr,o,\"updated\"),o.updateDOM(e,s,qt)){let i=lr(n,null);return t===null&&A(62),t.replaceChild(i,s),ar(n,null),i}if(v(e)&&v(o)){let i=o.__indent;(Nn||i!==e.__indent)&&Cc(s,i);let a=o.__format;if((Nn||a!==e.__format)&&Sc(s,a),r&&(jh(e,o,s),ge(o)||o.isInline()||Ec(e,o,s)),br(o)&&(ie+=$t,mt+=$t),(Nn||o.__dir!==e.__dir)&&(qs(s,o),ge(o)&&!Nn))for(let l of o.getChildren())v(l)&&qs(nn(Ne,l.getKey()),l)}else{let i=o.getTextContent();if(Z(o)){let a=o.decorate(Ne,qt);a!==null&&Tc(n,a)}ie+=i,mt+=i}if(!ir&&ge(o)&&o.__cachedText!==mt){let i=o.getWritable();i.__cachedText=mt,o=i}return s}function Tc(n,t){let e=Ne._pendingDecorators,o=Ne._decorators;if(e===null){if(o[n]===t)return;e=Su(Ne)}e[n]=t}function $s(n){let t=n.nextSibling;return t!==null&&t===Ne._blockCursorElement&&(t=t.nextSibling),t}function Vh(n,t,e,o,r,s){ie=\"\",mt=\"\",Nn=o===2,Ne=e,qt=e._config,_o=e._nodes,Sr=Ne._listeners.mutation,Js=r,js=s,Zt=n._nodeMap,We=t._nodeMap,ir=t._readOnly,Vs=new Map(e._keyToDOMMap);let i=new Map;return mo=i,so(\"root\",null),Ne=void 0,_o=void 0,Js=void 0,js=void 0,Zt=void 0,We=void 0,qt=void 0,Vs=void 0,mo=void 0,i}function Qs(n){let t=Vs.get(n);return t===void 0&&A(75,n),t}function K(n){return{type:n}}var Ci=K(\"SELECTION_CHANGE_COMMAND\"),Xh=K(\"SELECTION_INSERT_CLIPBOARD_NODES_COMMAND\"),Oc=K(\"CLICK_COMMAND\"),yo=K(\"DELETE_CHARACTER_COMMAND\"),io=K(\"INSERT_LINE_BREAK_COMMAND\"),ei=K(\"INSERT_PARAGRAPH_COMMAND\"),En=K(\"CONTROLLED_TEXT_INSERTION_COMMAND\"),Si=K(\"PASTE_COMMAND\"),ti=K(\"REMOVE_TEXT_COMMAND\"),xo=K(\"DELETE_WORD_COMMAND\"),No=K(\"DELETE_LINE_COMMAND\"),At=K(\"FORMAT_TEXT_COMMAND\"),Ei=K(\"UNDO_COMMAND\"),Ti=K(\"REDO_COMMAND\"),Mc=K(\"KEYDOWN_COMMAND\"),vc=K(\"KEY_ARROW_RIGHT_COMMAND\"),Dc=K(\"MOVE_TO_END\"),Ac=K(\"KEY_ARROW_LEFT_COMMAND\"),bc=K(\"MOVE_TO_START\"),Rc=K(\"KEY_ARROW_UP_COMMAND\"),kc=K(\"KEY_ARROW_DOWN_COMMAND\"),ur=K(\"KEY_ENTER_COMMAND\"),$c=K(\"KEY_SPACE_COMMAND\"),Ic=K(\"KEY_BACKSPACE_COMMAND\"),Lc=K(\"KEY_ESCAPE_COMMAND\"),wc=K(\"KEY_DELETE_COMMAND\"),Pc=K(\"KEY_TAB_COMMAND\"),qh=K(\"INSERT_TAB_COMMAND\"),Zh=K(\"INDENT_CONTENT_COMMAND\"),Qh=K(\"OUTDENT_CONTENT_COMMAND\"),Fc=K(\"DROP_COMMAND\"),ep=K(\"FORMAT_ELEMENT_COMMAND\"),Kc=K(\"DRAGSTART_COMMAND\"),Bc=K(\"DRAGOVER_COMMAND\"),Wc=K(\"DRAGEND_COMMAND\"),Oi=K(\"COPY_COMMAND\"),Mi=K(\"CUT_COMMAND\"),ni=K(\"SELECT_ALL_COMMAND\"),tp=K(\"CLEAR_EDITOR_COMMAND\"),np=K(\"CLEAR_HISTORY_COMMAND\"),op=K(\"CAN_REDO_COMMAND\"),rp=K(\"CAN_UNDO_COMMAND\"),zc=K(\"FOCUS_COMMAND\"),Uc=K(\"BLUR_COMMAND\"),Hc=K(\"KEY_MODIFIER_COMMAND\"),gt=Object.freeze({}),oi=[[\"keydown\",function(n,t){if(ao=n.timeStamp,Yc=n.key,!t.isComposing()&&!k(t,Mc,n)&&n.key!=null){if(Is&&rc(n))return be(t,()=>{Vo(t,Ls)}),Is=!1,void(Ls=\"\");if((function(e){return j(e,\"ArrowRight\",{shiftKey:\"any\"})})(n))k(t,vc,n);else if((function(e){return j(e,\"ArrowRight\",pt)})(n))k(t,Dc,n);else if((function(e){return j(e,\"ArrowLeft\",{shiftKey:\"any\"})})(n))k(t,Ac,n);else if((function(e){return j(e,\"ArrowLeft\",pt)})(n))k(t,bc,n);else if((function(e){return j(e,\"ArrowUp\",{altKey:\"any\",shiftKey:\"any\"})})(n))k(t,Rc,n);else if((function(e){return j(e,\"ArrowDown\",{altKey:\"any\",shiftKey:\"any\"})})(n))k(t,kc,n);else if((function(e){return j(e,\"Enter\",{altKey:\"any\",ctrlKey:\"any\",metaKey:\"any\",shiftKey:!0})})(n))lo=!0,k(t,ur,n);else if((function(e){return e.key===\" \"})(n))k(t,$c,n);else if((function(e){return Ke&&j(e,\"o\",{ctrlKey:!0})})(n))n.preventDefault(),lo=!0,k(t,io,!0);else if((function(e){return j(e,\"Enter\",{altKey:\"any\",ctrlKey:\"any\",metaKey:\"any\"})})(n))lo=!1,k(t,ur,n);else if((function(e){return j(e,\"Backspace\",{shiftKey:\"any\"})||Ke&&j(e,\"h\",{ctrlKey:!0})})(n))rc(n)?k(t,Ic,n):(n.preventDefault(),k(t,yo,!0));else if((function(e){return e.key===\"Escape\"})(n))k(t,Lc,n);else if((function(e){return j(e,\"Delete\",{})||Ke&&j(e,\"d\",{ctrlKey:!0})})(n))(function(e){return e.key===\"Delete\"})(n)?k(t,wc,n):(n.preventDefault(),k(t,yo,!1));else if((function(e){return j(e,\"Backspace\",oc)})(n))n.preventDefault(),k(t,xo,!0);else if((function(e){return j(e,\"Delete\",oc)})(n))n.preventDefault(),k(t,xo,!1);else if((function(e){return Ke&&j(e,\"Backspace\",{metaKey:!0})})(n))n.preventDefault(),k(t,No,!0);else if((function(e){return Ke&&(j(e,\"Delete\",{metaKey:!0})||j(e,\"k\",{ctrlKey:!0}))})(n))n.preventDefault(),k(t,No,!1);else if((function(e){return j(e,\"b\",pt)})(n))n.preventDefault(),k(t,At,\"bold\");else if((function(e){return j(e,\"u\",pt)})(n))n.preventDefault(),k(t,At,\"underline\");else if((function(e){return j(e,\"i\",pt)})(n))n.preventDefault(),k(t,At,\"italic\");else if((function(e){return j(e,\"Tab\",{shiftKey:\"any\"})})(n))k(t,Pc,n);else if((function(e){return j(e,\"z\",pt)})(n))n.preventDefault(),k(t,Ei,void 0);else if((function(e){return Ke?j(e,\"z\",{metaKey:!0,shiftKey:!0}):j(e,\"y\",{ctrlKey:!0})||j(e,\"z\",{ctrlKey:!0,shiftKey:!0})})(n))n.preventDefault(),k(t,Ti,void 0);else{let e=t._editorState._selection;e===null||w(e)?sc(n)&&(n.preventDefault(),k(t,ni,n)):(function(o){return j(o,\"c\",pt)})(n)?(n.preventDefault(),k(t,Oi,n)):(function(o){return j(o,\"x\",pt)})(n)?(n.preventDefault(),k(t,Mi,n)):sc(n)&&(n.preventDefault(),k(t,ni,n))}(function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey})(n)&&k(t,Hc,n)}}],[\"pointerdown\",function(n,t){let e=n.target,o=n.pointerType;Fn(e)&&o!==\"touch\"&&o!==\"pen\"&&n.button===0&&be(t,()=>{ec(e)||(ii=!0)})}],[\"compositionstart\",function(n,t){be(t,()=>{let e=Y();if(w(e)&&!t.isComposing()){let o=e.anchor,r=e.anchor.getNode();ue(o.key),(n.timeStamp<ao+30||o.type===\"element\"||!e.isCollapsed()||r.getFormat()!==e.format||I(r)&&r.getStyle()!==e.style)&&k(t,En,Rh)}})}],[\"compositionend\",function(n,t){Xt?oo=!0:Mn||!ho&&!po?be(t,()=>{Vo(t,n.data)}):(Is=!0,Ls=n.data)}],[\"input\",function(n,t){n.stopPropagation(),be(t,()=>{if(Ce(n.target)&&ec(n.target))return;let e=Y(),o=n.data,r=Xc(n);if(o!=null&&w(e)&&jc(e,r,o,n.timeStamp,!1)){oo&&(Vo(t,o),oo=!1);let s=e.anchor.getNode(),i=et(Ie(t));if(i===null)return;let a=e.isBackward(),l=a?e.anchor.offset:e.focus.offset,c=a?e.focus.offset:e.anchor.offset;or&&!e.isCollapsed()&&I(s)&&i.anchorNode!==null&&s.getTextContent().slice(0,l)+o+s.getTextContent().slice(l+c)===Mu(i.anchorNode)||k(t,En,o);let u=o.length;Xt&&u>1&&n.inputType===\"insertCompositionText\"&&!t.isComposing()&&(e.anchor.offset-=u),ho||Mn||po||!t.isComposing()||(ao=0,ue(null))}else Ki(!1,t,o!==null?o:void 0),oo&&(Vo(t,o||void 0),oo=!1);(function(){ce();let s=te();mc(s)})()},{event:n}),Cn=null}],[\"click\",function(n,t){be(t,()=>{let e=Y(),o=et(Ie(t)),r=rn();if(o){if(w(e)){let s=e.anchor,i=s.getNode();if(s.type===\"element\"&&s.offset===0&&e.isCollapsed()&&!ge(i)&&ke().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&r!==null&&e.is(r))o.removeAllRanges(),e.dirty=!0;else if(n.detail===3&&!e.isCollapsed()&&i!==e.focus.getNode()){let a=uo(i,l=>v(l)&&!l.isInline());v(a)&&a.select(0)}}else if(n.pointerType===\"touch\"||n.pointerType===\"pen\"){let s=o.anchorNode;(Ce(s)||tt(s))&&Me(Or(r,o,t,n))}}k(t,Oc,n)})}],[\"cut\",gt],[\"copy\",gt],[\"dragstart\",gt],[\"dragover\",gt],[\"dragend\",gt],[\"paste\",gt],[\"focus\",gt],[\"blur\",gt],[\"drop\",gt]];or&&oi.push([\"beforeinput\",(n,t)=>(function(e,o){let r=e.inputType,s=Xc(e);r===\"deleteCompositionText\"||Xt&&Au(o)||r!==\"insertCompositionText\"&&be(o,()=>{let i=Y();if(r===\"deleteContentBackward\"){if(i===null){let h=rn();if(!w(h))return;Me(h.clone())}if(w(i)){let h=i.anchor.key===i.focus.key;if(a=e.timeStamp,Yc===\"MediaLast\"&&a<ao+30&&o.isComposing()&&h){if(ue(null),ao=0,setTimeout(()=>{be(o,()=>{ue(null)})},30),w(i)){let g=i.anchor.getNode();g.markDirty(),I(g)||A(142),Vc(i,g)}}else{ue(null),e.preventDefault();let g=i.anchor.getNode(),p=g.getTextContent(),_=g.canInsertTextAfter(),x=i.anchor.offset===0&&i.focus.offset===p.length,y=yl&&h&&!x&&_;if(y&&i.isCollapsed()&&(y=!Z(Du(i.anchor,!0))),!y){k(o,yo,!0);let N=Y();yl&&w(N)&&N.isCollapsed()&&(jt=N,setTimeout(()=>jt=null))}}return}}var a;if(!w(i))return;let l=e.data;Cn!==null&&Ki(!1,o,Cn),i.dirty&&Cn===null||!i.isCollapsed()||ge(i.anchor.getNode())||s===null||i.applyDOMRange(s),Cn=null;let c=i.anchor,u=i.focus,d=c.getNode(),f=u.getNode();if(r!==\"insertText\"&&r!==\"insertTranspose\")switch(e.preventDefault(),r){case\"insertFromYank\":case\"insertFromDrop\":case\"insertReplacementText\":k(o,En,e);break;case\"insertFromComposition\":ue(null),k(o,En,e);break;case\"insertLineBreak\":ue(null),k(o,io,!1);break;case\"insertParagraph\":ue(null),lo&&!Mn?(lo=!1,k(o,io,!1)):k(o,ei,void 0);break;case\"insertFromPaste\":case\"insertFromPasteAsQuotation\":k(o,Si,e);break;case\"deleteByComposition\":(function(h,g){return h!==g||v(h)||v(g)||!Rt(h)||!Rt(g)})(d,f)&&k(o,ti,e);break;case\"deleteByDrag\":case\"deleteByCut\":k(o,ti,e);break;case\"deleteContent\":k(o,yo,!1);break;case\"deleteWordBackward\":k(o,xo,!0);break;case\"deleteWordForward\":k(o,xo,!1);break;case\"deleteHardLineBackward\":case\"deleteSoftLineBackward\":k(o,No,!0);break;case\"deleteContentForward\":case\"deleteHardLineForward\":case\"deleteSoftLineForward\":k(o,No,!1);break;case\"formatStrikeThrough\":k(o,At,\"strikethrough\");break;case\"formatBold\":k(o,At,\"bold\");break;case\"formatItalic\":k(o,At,\"italic\");break;case\"formatUnderline\":k(o,At,\"underline\");break;case\"historyUndo\":k(o,Ei,void 0);break;case\"historyRedo\":k(o,Ti,void 0)}else{if(l===`\n`)e.preventDefault(),k(o,io,!1);else if(l===$t)e.preventDefault(),k(o,ei,void 0);else if(l==null&&e.dataTransfer){let h=e.dataTransfer.getData(\"text/plain\");e.preventDefault(),i.insertRawText(h)}else l!=null&&jc(i,s,l,e.timeStamp,!0)?(e.preventDefault(),k(o,En,l)):Cn=l;Gc=e.timeStamp}})})(n,t)]);var ao=0,Yc=null,Gc=0,Cn=null,ri=new WeakMap,dr=new WeakMap,si=!1,ii=!1,lo=!1,oo=!1,Is=!1,Ls=\"\",jt=null,Jc=[0,\"\",0,\"root\",0];function jc(n,t,e,o,r){let s=n.anchor,i=n.focus,a=s.getNode(),l=te(),c=et(Ie(l)),u=c!==null?c.anchorNode:null,d=s.key,f=l.getElementByKey(d),h=e.length;return d!==i.key||!I(a)||(!r&&(!or||Gc<o+50)||a.isDirty()&&h<2||Tu(e))&&s.offset!==i.offset&&!a.isComposing()||_t(a)||a.isDirty()&&h>1||(r||!or)&&f!==null&&!a.isComposing()&&u!==tn(f)||c!==null&&t!==null&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||a.getFormat()!==n.format||a.getStyle()!==n.style||(function(g,p){if(p.isSegmented())return!0;if(!g.isCollapsed())return!1;let _=g.anchor.offset,x=p.getParentOrThrow(),y=Rt(p);return _===0?!p.canInsertTextBefore()||!x.canInsertTextBefore()&&!p.isComposing()||y||(function(N){let S=N.getPreviousSibling();return(I(S)||v(S)&&S.isInline())&&!S.canInsertTextAfter()})(p):_===p.getTextContentSize()&&(!p.canInsertTextAfter()||!x.canInsertTextAfter()&&!p.isComposing()||y)})(n,a)}function bl(n,t){return tt(n)&&n.nodeValue!==null&&t!==0&&t!==n.nodeValue.length}function Rl(n,t,e){let{anchorNode:o,anchorOffset:r,focusNode:s,focusOffset:i}=n;si&&(si=!1,bl(o,r)&&bl(s,i)&&!jt)||be(t,()=>{if(!e)return void Me(null);if(!To(t,o,s))return;let a=Y();if(jt&&w(a)&&a.isCollapsed()){let l=a.anchor,c=jt.anchor;(l.key===c.key&&l.offset===c.offset+1||l.offset===1&&c.getNode().is(l.getNode().getPreviousSibling()))&&(a=jt.clone(),Me(a))}if(jt=null,w(a)){let l=a.anchor,c=l.getNode();if(a.isCollapsed()){n.type===\"Range\"&&n.anchorNode===n.focusNode&&(a.dirty=!0);let u=Ie(t).event,d=u?u.timeStamp:performance.now(),[f,h,g,p,_]=Jc,x=ke(),y=t.isComposing()===!1&&x.getTextContent()===\"\";if(d<_+200&&l.offset===g&&l.key===p)er(a,f,h);else if(l.type===\"text\")I(c)||A(141),Vc(a,c);else if(l.type===\"element\"&&!y){v(c)||A(259);let N=l.getNode();N.isEmpty()?(function(S,M){let E=M.getTextFormat(),T=M.getTextStyle();er(S,E,T)})(a,N):er(a,0,\"\")}}else{let u=l.key,d=a.focus.key,f=a.getNodes(),h=f.length,g=a.isBackward(),p=g?i:r,_=g?r:i,x=g?d:u,y=g?u:d,N=2047,S=!1;for(let M=0;M<h;M++){let E=f[M],T=E.getTextContentSize();if(I(E)&&T!==0&&!(M===0&&E.__key===x&&p===T||M===h-1&&E.__key===y&&_===0)&&(S=!0,N&=E.getFormat(),N===0))break}a.format=S?N:0}}k(t,Ci,void 0)})}function er(n,t,e){n.format===t&&n.style===e||(n.format=t,n.style=e,n.dirty=!0)}function Vc(n,t){er(n,t.getFormat(),t.getStyle())}function Xc(n){if(!n.getTargetRanges)return null;let t=n.getTargetRanges();return t.length===0?null:t[0]}function Vo(n,t){let e=n._compositionKey;if(ue(null),e!==null&&t!=null){if(t===\"\"){let o=ae(e),r=tn(n.getElementByKey(e));return void(r!==null&&r.nodeValue!==null&&I(o)&&Bi(o,r.nodeValue,null,null,!0))}if(t[t.length-1]===`\n`){let o=Y();if(w(o)){let r=o.focus;return o.anchor.set(r.key,r.offset,r.type),void k(n,ur,null)}}}Ki(!0,n,t)}function qc(n){let t=n.__lexicalEventHandles;return t===void 0&&(t=[],n.__lexicalEventHandles=t),t}var Tn=new Map;function Zc(n){let t=Iu(n.target);if(t===null)return;let e=wi(t.anchorNode);if(e===null)return;ii&&(ii=!1,be(e,()=>{let l=rn(),c=t.anchorNode;(Ce(c)||tt(c))&&Me(Or(l,t,e,n))}));let o=Fi(e),r=o[o.length-1],s=r._key,i=Tn.get(s),a=i||r;a!==e&&Rl(t,a,!1),Rl(t,e,!0),e!==r?Tn.set(s,e):i&&Tn.delete(s)}function kl(n){n._lexicalHandled=!0}function $l(n){return n._lexicalHandled===!0}var Il=()=>{};function sp(n){let t=ri.get(n);if(t===void 0)return void Il();let e=dr.get(t);if(e===void 0)return void Il();let o=e-1;o>=0||A(164),ri.delete(n),dr.set(t,o),o===0&&t.removeEventListener(\"selectionchange\",Zc);let r=Oo(n);vr(r)?((function(i){if(i._parentEditor!==null){let a=Fi(i),l=a[a.length-1]._key;Tn.get(l)===i&&Tn.delete(l)}else Tn.delete(i._key)})(r),n.__lexicalEditor=null):r&&A(198);let s=qc(n);for(let i=0;i<s.length;i++)s[i]();n.__lexicalEventHandles=[]}function ai(n,t,e){ce();let o=n.__key,r=n.getParent();if(r===null)return;let s=(function(a){let l=Y();if(!w(l)||!v(a))return l;let{anchor:c,focus:u}=l,d=c.getNode(),f=u.getNode();return xr(d,a)&&c.set(a.__key,0,\"element\"),xr(f,a)&&u.set(a.__key,0,\"element\"),l})(n),i=!1;if(w(s)&&t){let a=s.anchor,l=s.focus;a.key===o&&(pr(a,n,r,n.getPreviousSibling(),n.getNextSibling()),i=!0),l.key===o&&(pr(l,n,r,n.getPreviousSibling(),n.getNextSibling()),i=!0)}else Tr(s)&&t&&n.isSelected()&&n.selectPrevious();if(w(s)&&t&&!i){let a=n.getIndexWithinParent();kt(n),hr(s,r,a,-1)}else kt(n);e||Ye(r)||r.canBeEmpty()||!r.isEmpty()||ai(r,t),t&&s&&ge(r)&&r.isEmpty()&&r.selectEnd()}function ip(n){return n}var Qc=Symbol.for(\"ephemeral\");function fr(n){return n[Qc]||!1}var Re=class{constructor(t){C(this,\"__type\");C(this,\"__key\");C(this,\"__parent\");C(this,\"__prev\");C(this,\"__next\");C(this,\"__state\");this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,\"__state\",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Cu(this,t)}static getType(){let{ownNodeType:t}=Do(this);return t===void 0&&A(64,this.name),t}static clone(t){A(65,this.name)}$config(){return{}}config(t,e){let o=e.extends||Object.getPrototypeOf(this.constructor);return Object.assign(e,{extends:o,type:t}),{[t]:e}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}getType(){return this.__type}isInline(){A(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t===\"root\")return!0;let e=ae(t);if(e===null)break;t=e.__parent}return!1}isSelected(t){let e=t||Y();if(e==null)return!1;let o=e.getNodes().some(r=>r.__key===this.__key);if(I(this))return o;if(w(e)&&e.anchor.type===\"element\"&&e.focus.type===\"element\"){if(e.isCollapsed())return!1;let r=this.getParent();if(Z(this)&&this.isInline()&&r){let s=e.isBackward()?e.focus:e.anchor;if(r.is(s.getNode())&&s.offset===r.getChildrenSize()&&this.is(r.getLastChild()))return!1}}return o}getKey(){return this.__key}getIndexWithinParent(){let t=this.getParent();if(t===null)return-1;let e=t.getFirstChild(),o=0;for(;e!==null;){if(this.is(e))return o;o++,e=e.getNextSibling()}return-1}getParent(){let t=this.getLatest().__parent;return t===null?null:ae(t)}getParentOrThrow(){let t=this.getParent();return t===null&&A(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){let e=t.getParent();if(Ye(e))return v(t)||t===this&&Z(t)||A(194),t;t=e}return null}getTopLevelElementOrThrow(){let t=this.getTopLevelElement();return t===null&&A(67,this.__key),t}getParents(){let t=[],e=this.getParent();for(;e!==null;)t.push(e),e=e.getParent();return t}getParentKeys(){let t=[],e=this.getParent();for(;e!==null;)t.push(e.__key),e=e.getParent();return t}getPreviousSibling(){let t=this.getLatest().__prev;return t===null?null:ae(t)}getPreviousSiblings(){let t=[],e=this.getParent();if(e===null)return t;let o=e.getFirstChild();for(;o!==null&&!o.is(this);)t.push(o),o=o.getNextSibling();return t}getNextSibling(){let t=this.getLatest().__next;return t===null?null:ae(t)}getNextSiblings(){let t=[],e=this.getNextSibling();for(;e!==null;)t.push(e),e=e.getNextSibling();return t}getCommonAncestor(t){let e=v(this)?this:this.getParent(),o=v(t)?t:t.getParent(),r=e&&o?fo(e,o):null;return r?r.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){let e=fo(this,t);return e!==null&&(e.type===\"descendant\"||(e.type===\"branch\"?qi(e)===-1:(e.type!==\"same\"&&e.type!==\"ancestor\"&&A(279),!1)))}isParentOf(t){let e=fo(this,t);return e!==null&&e.type===\"ancestor\"}getNodesBetween(t){let e=this.isBefore(t),o=[],r=new Set,s=this;for(;s!==null;){let i=s.__key;if(r.has(i)||(r.add(i),o.push(s)),s===t)break;let a=v(s)?e?s.getFirstChild():s.getLastChild():null;if(a!==null){s=a;continue}let l=e?s.getNextSibling():s.getPreviousSibling();if(l!==null){s=l;continue}let c=s.getParentOrThrow();if(r.has(c.__key)||o.push(c),c===t)break;let u=null,d=c;do{if(d===null&&A(68),u=e?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),d===null)break;u!==null||r.has(d.__key)||o.push(d)}while(u===null);s=u}return e||o.reverse(),o}isDirty(){let t=te()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){if(fr(this))return this;let t=ae(this.__key);return t===null&&A(113),t}getWritable(){if(fr(this))return this;ce();let t=Tt(),e=te(),o=t._nodeMap,r=this.__key,s=this.getLatest(),i=e._cloneNotNeeded,a=Y();if(a!==null&&a.setCachedNodes(null),i.has(r))return yr(s),s;let l=Gi(s);return i.add(r),yr(l),o.set(r,l),l}getTextContent(){return\"\"}getTextContentSize(){return this.getTextContent().length}createDOM(t,e){A(70)}updateDOM(t,e,o){A(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){let t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){A(18,this.name)}updateFromJSON(t){return(function(e,o){let r=e.getWritable(),s=o.$,i=s;for(let a of Nc(r).flatKeys)a in o&&(i!==void 0&&i!==s||(i={...s}),i[a]=o[a]);return(r.__state||i)&&Ni(e).updateFromJSON(i),r})(this,t)}static transform(){return null}remove(t){ai(this,!0,t)}replace(t,e){ce();let o=Y();o!==null&&(o=o.clone()),Ws(this,t);let r=this.getLatest(),s=this.__key,i=t.__key,a=t.getWritable(),l=this.getParentOrThrow().getWritable(),c=l.__size;kt(a);let u=r.getPreviousSibling(),d=r.getNextSibling(),f=r.__prev,h=r.__next,g=r.__parent;if(ai(r,!1,!0),u===null?l.__first=i:u.getWritable().__next=i,a.__prev=f,d===null?l.__last=i:d.getWritable().__prev=i,a.__next=h,a.__parent=g,l.__size=c,e&&(v(this)&&v(a)||A(139),this.getChildren().forEach(p=>{a.append(p)})),w(o)){Me(o);let p=o.anchor,_=o.focus;p.key===s&&Fl(p,a),_.key===s&&Fl(_,a)}return bt()===s&&ue(i),a}insertAfter(t,e=!0){ce(),Ws(this,t);let o=this.getWritable(),r=t.getWritable(),s=r.getParent(),i=Y(),a=!1,l=!1;if(s!==null){let h=t.getIndexWithinParent();if(kt(r),w(i)){let g=s.__key,p=i.anchor,_=i.focus;a=p.type===\"element\"&&p.key===g&&p.offset===h+1,l=_.type===\"element\"&&_.key===g&&_.offset===h+1}}let c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=r.__key,f=o.__next;if(c===null?u.__last=d:c.getWritable().__prev=d,u.__size++,o.__next=d,r.__next=f,r.__prev=o.__key,r.__parent=o.__parent,e&&w(i)){let h=this.getIndexWithinParent();hr(i,u,h+1);let g=u.__key;a&&i.anchor.set(g,h+2,\"element\"),l&&i.focus.set(g,h+2,\"element\")}return t}insertBefore(t,e=!0){ce(),Ws(this,t);let o=this.getWritable(),r=t.getWritable(),s=r.__key;kt(r);let i=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=o.__prev,c=this.getIndexWithinParent();i===null?a.__first=s:i.getWritable().__next=s,a.__size++,o.__prev=s,r.__prev=l,r.__next=o.__key,r.__parent=o.__parent;let u=Y();return e&&w(u)&&hr(u,this.getParentOrThrow(),c),t}isParentRequired(){return!1}createParentElementNode(){return Nt()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,e){ce();let o=this.getPreviousSibling(),r=this.getParentOrThrow();if(o===null)return r.select(0,0);if(v(o))return o.select();if(!I(o)){let s=o.getIndexWithinParent()+1;return r.select(s,s)}return o.select(t,e)}selectNext(t,e){ce();let o=this.getNextSibling(),r=this.getParentOrThrow();if(o===null)return r.select();if(v(o))return o.select(0,0);if(!I(o)){let s=o.getIndexWithinParent();return r.select(s,s)}return o.select(t,e)}markDirty(){this.getWritable()}reconcileObservedMutation(t,e){this.markDirty()}};C(Re,\"importDOM\");var ap=\"historic\",lp=\"history-push\",tr=\"history-merge\",cp=\"paste\",eu=\"collaboration\",up=\"skip-collab\",tu=\"skip-scroll-into-view\",nu=\"skip-dom-selection\",ou=\"skip-selection-focus\",vn=class n extends Re{static getType(){return\"linebreak\"}static clone(t){return new n(t.__key)}constructor(t){super(t)}getTextContent(){return`\n`}createDOM(){return document.createElement(\"br\")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(e){let o=e.parentElement;if(o!==null&&gi(o)){let r=o.firstChild;if(r===e||r.nextSibling===e&&Xo(r)){let s=o.lastChild;if(s===e||s.previousSibling===e&&Xo(s))return!0}}return!1})(t)||(function(e){let o=e.parentElement;if(o!==null&&gi(o)){let r=o.firstChild;if(r===e||r.nextSibling===e&&Xo(r))return!1;let s=o.lastChild;if(s===e||s.previousSibling===e&&Xo(s))return!0}return!1})(t)?null:{conversion:dp,priority:0}}}static importJSON(t){return Dn().updateFromJSON(t)}};function dp(n){return{node:Dn()}}function Dn(){return vo(new vn)}function Vt(n){return n instanceof vn}function Xo(n){return tt(n)&&/^( |\\t|\\r?\\n)+$/.test(n.textContent||\"\")}function ws(n,t){return 16&t?\"code\":t&yi?\"mark\":32&t?\"sub\":64&t?\"sup\":null}function Ps(n,t){return 1&t?\"strong\":2&t?\"em\":\"span\"}function ru(n,t,e,o,r){let s=o.classList,i=On(r,\"base\");i!==void 0&&s.add(...i),i=On(r,\"underlineStrikethrough\");let a=!1,l=8&t&&4&t;i!==void 0&&(8&e&&4&e?(a=!0,l||s.add(...i)):l&&s.remove(...i));for(let c in xe){let u=xe[c];if(i=On(r,c),i!==void 0)if(e&u){if(a&&(c===\"underline\"||c===\"strikethrough\")){t&u&&s.remove(...i);continue}((t&u)===0||l&&c===\"underline\"||c===\"strikethrough\")&&s.add(...i)}else t&u&&s.remove(...i)}}function su(n,t,e){let o=t.firstChild,r=e.isComposing(),s=n+(r?Cr:\"\");if(o==null)t.textContent=s;else{let i=o.nodeValue;if(i!==s)if(r||Xt){let[a,l,c]=(function(u,d){let f=u.length,h=d.length,g=0,p=0;for(;g<f&&g<h&&u[g]===d[g];)g++;for(;p+g<f&&p+g<h&&u[f-p-1]===d[h-p-1];)p++;return[g,f-g-p,d.slice(g,h-p)]})(i,s);l!==0&&o.deleteData(a,l),o.insertData(a,c)}else o.nodeValue=s}}function Ll(n,t,e,o,r,s){su(r,n,t);let i=s.theme.text;i!==void 0&&ru(0,0,o,n,i)}function qo(n,t){let e=document.createElement(t);return e.appendChild(n),e}var Qt=class n extends Re{constructor(e=\"\",o){super(o);C(this,\"__text\");C(this,\"__format\");C(this,\"__style\");C(this,\"__mode\");C(this,\"__detail\");this.__text=e,this.__format=0,this.__style=\"\",this.__mode=0,this.__detail=0}static getType(){return\"text\"}static clone(e){return new n(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let e=this.getLatest();return Ph[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===bt()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let o=xe[e];return(this.getFormat()&o)!==0}isSimpleText(){return this.__type===\"text\"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,o){return mr(this.getLatest().__format,e,o)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,o){let r=this.__format,s=ws(0,r),i=Ps(0,r),a=s===null?i:s,l=document.createElement(a),c=l;this.hasFormat(\"code\")&&l.setAttribute(\"spellcheck\",\"false\"),s!==null&&(c=document.createElement(i),l.appendChild(c)),Ll(c,this,0,r,this.__text,e);let u=this.__style;return u!==\"\"&&(l.style.cssText=u),l}updateDOM(e,o,r){let s=this.__text,i=e.__format,a=this.__format,l=ws(0,i),c=ws(0,a),u=Ps(0,i),d=Ps(0,a);if((l===null?u:l)!==(c===null?d:c))return!0;if(l===c&&u!==d){let _=o.firstChild;_==null&&A(48);let x=document.createElement(d);return Ll(x,this,0,a,s,r),o.replaceChild(x,_),!1}let f=o;c!==null&&l!==null&&(f=o.firstChild,f==null&&A(49)),su(s,f,this);let h=r.theme.text;h!==void 0&&i!==a&&ru(0,i,a,f,h);let g=e.__style,p=this.__style;return g!==p&&(o.style.cssText=p),!1}static importDOM(){return{\"#text\":()=>({conversion:pp,priority:0}),b:()=>({conversion:gp,priority:0}),code:()=>({conversion:ht,priority:0}),em:()=>({conversion:ht,priority:0}),i:()=>({conversion:ht,priority:0}),mark:()=>({conversion:ht,priority:0}),s:()=>({conversion:ht,priority:0}),span:()=>({conversion:fp,priority:0}),strong:()=>({conversion:ht,priority:0}),sub:()=>({conversion:ht,priority:0}),sup:()=>({conversion:ht,priority:0}),u:()=>({conversion:ht,priority:0})}}static importJSON(e){return le().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:o}=super.exportDOM(e);return Ce(o)||A(132),o.style.whiteSpace=\"pre-wrap\",this.hasFormat(\"lowercase\")?o.style.textTransform=\"lowercase\":this.hasFormat(\"uppercase\")?o.style.textTransform=\"uppercase\":this.hasFormat(\"capitalize\")&&(o.style.textTransform=\"capitalize\"),this.hasFormat(\"bold\")&&(o=qo(o,\"b\")),this.hasFormat(\"italic\")&&(o=qo(o,\"i\")),this.hasFormat(\"strikethrough\")&&(o=qo(o,\"s\")),this.hasFormat(\"underline\")&&(o=qo(o,\"u\")),{element:o}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,o){}setFormat(e){let o=this.getWritable();return o.__format=typeof e==\"string\"?xe[e]:e,o}setDetail(e){let o=this.getWritable();return o.__detail=typeof e==\"string\"?Ih[e]:e,o}setStyle(e){let o=this.getWritable();return o.__style=e,o}toggleFormat(e){let o=mr(this.getFormat(),e,null);return this.setFormat(o)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let o=wh[e];if(this.__mode===o)return this;let r=this.getWritable();return r.__mode=o,r}setTextContent(e){if(this.__text===e)return this;let o=this.getWritable();return o.__text=e,o}select(e,o){ce();let r=e,s=o,i=Y(),a=this.getTextContent(),l=this.__key;if(typeof a==\"string\"){let c=a.length;r===void 0&&(r=c),s===void 0&&(s=c)}else r=0,s=0;if(!w(i))return lu(l,r,l,s,\"text\",\"text\");{let c=bt();c!==i.anchor.key&&c!==i.focus.key||ue(l),i.setTextNodeRange(this,r,this,s)}return i}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,o,r,s){let i=this.getWritable(),a=i.__text,l=r.length,c=e;c<0&&(c=l+c,c<0&&(c=0));let u=Y();if(s&&w(u)){let f=e+l;u.setTextNodeRange(i,f,i,f)}let d=a.slice(0,c)+r+a.slice(c+o);return i.__text=d,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){ce();let o=this.getLatest(),r=o.getTextContent();if(r===\"\")return[];let s=o.__key,i=bt(),a=r.length;e.sort((O,b)=>O-b),e.push(a);let l=[],c=e.length;for(let O=0,b=0;O<a&&b<=c;b++){let P=e[b];P>O&&(l.push(r.slice(O,P)),O=P)}let u=l.length;if(u===1)return[o];let d=l[0],f=o.getParent(),h,g=o.getFormat(),p=o.getStyle(),_=o.__detail,x=!1,y=null,N=null,S=Y();if(w(S)){let[O,b]=S.isBackward()?[S.focus,S.anchor]:[S.anchor,S.focus];O.type===\"text\"&&O.key===s&&(y=O),b.type===\"text\"&&b.key===s&&(N=b)}o.isSegmented()?(h=le(d),h.__format=g,h.__style=p,h.__detail=_,h.__state=Tl(o,h),x=!0):h=o.setTextContent(d);let M=[h];for(let O=1;O<u;O++){let b=le(l[O]);b.__format=g,b.__style=p,b.__detail=_,b.__state=Tl(o,b);let P=b.__key;i===s&&ue(P),M.push(b)}let E=y?y.offset:null,T=N?N.offset:null,D=0;for(let O of M){if(!y&&!N)break;let b=D+O.getTextContentSize();if(y!==null&&E!==null&&E<=b&&E>=D&&(y.set(O.getKey(),E-D,\"text\"),E<b&&(y=null)),N!==null&&T!==null&&T<=b&&T>=D){N.set(O.getKey(),T-D,\"text\");break}D=b}if(f!==null){(function(P){let q=P.getPreviousSibling(),H=P.getNextSibling();q!==null&&yr(q),H!==null&&yr(H)})(this);let O=f.getWritable(),b=this.getIndexWithinParent();x?(O.splice(b,0,M),this.remove()):O.splice(b,1,M),w(S)&&hr(S,f,b,u-1)}return M}mergeWithSibling(e){let o=e===this.getPreviousSibling();o||e===this.getNextSibling()||A(50);let r=this.__key,s=e.__key,i=this.__text,a=i.length;bt()===s&&ue(r);let l=Y();if(w(l)){let f=l.anchor,h=l.focus;f!==null&&f.key===s&&Yl(f,o,r,e,a),h!==null&&h.key===s&&Yl(h,o,r,e,a)}let c=e.__text,u=o?c+i:i+c;this.setTextContent(u);let d=this.getWritable();return e.remove(),d}isTextEntity(){return!1}};function fp(n){return{forChild:vi(n.style),node:null}}function gp(n){let t=n,e=t.style.fontWeight===\"normal\";return{forChild:vi(t.style,e?void 0:\"bold\"),node:null}}var wl=new WeakMap;function hp(n){if(!Ce(n))return!1;if(n.nodeName===\"PRE\")return!0;let t=n.style.whiteSpace;return typeof t==\"string\"&&t.startsWith(\"pre\")}function pp(n){let t=n;n.parentElement===null&&A(129);let e=t.textContent||\"\";if((function(o){let r,s=o.parentNode,i=[o];for(;s!==null&&(r=wl.get(s))===void 0&&!hp(s);)i.push(s),s=s.parentNode;let a=r===void 0?s:r;for(let l=0;l<i.length;l++)wl.set(i[l],a);return a})(t)!==null){let o=e.split(/(\\r?\\n|\\t)/),r=[],s=o.length;for(let i=0;i<s;i++){let a=o[i];a===`\n`||a===`\\r\n`?r.push(Dn()):a===\"\t\"?r.push(Er()):a!==\"\"&&r.push(le(a))}return{node:r}}if(e=e.replace(/\\r/g,\"\").replace(/[ \\t\\n]+/g,\" \"),e===\"\")return{node:null};if(e[0]===\" \"){let o=t,r=!0;for(;o!==null&&(o=Pl(o,!1))!==null;){let s=o.textContent||\"\";if(s.length>0){/[ \\t\\n]$/.test(s)&&(e=e.slice(1)),r=!1;break}}r&&(e=e.slice(1))}if(e[e.length-1]===\" \"){let o=t,r=!0;for(;o!==null&&(o=Pl(o,!0))!==null;)if((o.textContent||\"\").replace(/^( |\\t|\\r?\\n)+/,\"\").length>0){r=!1;break}r&&(e=e.slice(0,e.length-1))}return e===\"\"?{node:null}:{node:le(e)}}function Pl(n,t){let e=n;for(;;){let o;for(;(o=t?e.nextSibling:e.previousSibling)===null;){let s=e.parentElement;if(s===null)return null;e=s}if(e=o,Ce(e)){let s=e.style.display;if(s===\"\"&&!wu(e)||s!==\"\"&&!s.startsWith(\"inline\"))return null}let r=e;for(;(r=t?e.firstChild:e.lastChild)!==null;)e=r;if(tt(e))return e;if(e.nodeName===\"BR\")return null}}var _p={code:\"code\",em:\"italic\",i:\"italic\",mark:\"highlight\",s:\"strikethrough\",strong:\"bold\",sub:\"subscript\",sup:\"superscript\",u:\"underline\"};function ht(n){let t=_p[n.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:vi(n.style,t),node:null}}function le(n=\"\"){return vo(new Qt(n))}function I(n){return n instanceof Qt}function vi(n,t){let e=n.fontWeight,o=n.textDecoration.split(\" \"),r=e===\"700\"||e===\"bold\",s=o.includes(\"line-through\"),i=n.fontStyle===\"italic\",a=o.includes(\"underline\"),l=n.verticalAlign;return c=>(I(c)&&(r&&!c.hasFormat(\"bold\")&&c.toggleFormat(\"bold\"),s&&!c.hasFormat(\"strikethrough\")&&c.toggleFormat(\"strikethrough\"),i&&!c.hasFormat(\"italic\")&&c.toggleFormat(\"italic\"),a&&!c.hasFormat(\"underline\")&&c.toggleFormat(\"underline\"),l!==\"sub\"||c.hasFormat(\"subscript\")||c.toggleFormat(\"subscript\"),l!==\"super\"||c.hasFormat(\"superscript\")||c.toggleFormat(\"superscript\"),t&&!c.hasFormat(t)&&c.toggleFormat(t)),c)}var An=class n extends Qt{static getType(){return\"tab\"}static clone(t){return new n(t.__key)}constructor(t){super(\"\t\",t),this.__detail=2}static importDOM(){return null}createDOM(t){let e=super.createDOM(t),o=On(t.theme,\"tab\");return o!==void 0&&e.classList.add(...o),e}static importJSON(t){return Er().updateFromJSON(t)}setTextContent(t){return t!==\"\t\"&&t!==\"\"&&uc(126),super.setTextContent(\"\t\")}spliceText(t,e,o,r){return o===\"\"&&e===0||o===\"\t\"&&e===1||A(286),this}setDetail(t){return t!==2&&A(127),this}setMode(t){return t!==\"normal\"&&A(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}};function Er(){return vo(new An)}function Di(n){return n instanceof An}var li=class{constructor(t,e,o){C(this,\"key\");C(this,\"offset\");C(this,\"type\");C(this,\"_selection\");this._selection=null,this.key=t,this.offset=e,this.type=o}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:Xi(Be(Pt(this,\"next\")),Be(Pt(t,\"next\")))<0}getNode(){let t=ae(this.key);return t===null&&A(20),t}set(t,e,o,r){let s=this._selection,i=this.key;r&&this.key===t&&this.offset===e&&this.type===o||(this.key=t,this.offset=e,this.type=o,Pn()||(bt()===i&&ue(t),s!==null&&(s.setCachedNodes(null),s.dirty=!0)))}};function He(n,t,e){return new li(n,t,e)}function Fs(n,t){let e=t.__key,o=n.offset,r=\"element\";if(I(t)){r=\"text\";let s=t.getTextContentSize();o>s&&(o=s)}else if(!v(t)){let s=t.getNextSibling();if(I(s))e=s.__key,o=0,r=\"text\";else{let i=t.getParent();i&&(e=i.__key,o=t.getIndexWithinParent()+1)}}n.set(e,o,r)}function Fl(n,t){if(v(t)){let e=t.getLastDescendant();v(e)||I(e)?Fs(n,e):Fs(n,t)}else Fs(n,t)}var gr=class n{constructor(t){C(this,\"_nodes\");C(this,\"_cachedNodes\");C(this,\"dirty\");this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Tr(t))return!1;let e=this._nodes,o=t._nodes;return e.size===o.size&&Array.from(e).every(r=>o.has(r))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new n(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){let e=this.getNodes(),o=e.length,r=e[o-1],s;if(I(r))s=r.select();else{let i=r.getIndexWithinParent()+1;s=r.getParentOrThrow().select(i,i)}s.insertNodes(t);for(let i=0;i<o;i++)e[i].remove()}getNodes(){let t=this._cachedNodes;if(t!==null)return t;let e=this._nodes,o=[];for(let r of e){let s=ae(r);s!==null&&o.push(s)}return Pn()||(this._cachedNodes=o),o}getTextContent(){let t=this.getNodes(),e=\"\";for(let o=0;o<t.length;o++)e+=t[o].getTextContent();return e}deleteNodes(){let t=this.getNodes();if((Y()||rn())===this&&t[0]){let e=he(t[0],\"next\");Wu(wt(e,e))}for(let e of t)e.remove()}};function w(n){return n instanceof en}var en=class n{constructor(t,e,o,r){C(this,\"format\");C(this,\"style\");C(this,\"anchor\");C(this,\"focus\");C(this,\"_cachedNodes\");C(this,\"dirty\");this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=o,this.style=r,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!w(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let t=this._cachedNodes;if(t!==null)return t;let e=(function(o){let r=[],[s,i]=o.getTextSlices();s&&r.push(s.caret.origin);let a=new Set,l=new Set;for(let c of o)if(ze(c)){let{origin:u}=c;r.length===0?a.add(u):(l.add(u),r.push(u))}else{let{origin:u}=c;v(u)&&l.has(u)||r.push(u)}if(i&&r.push(i.caret.origin),on(o.focus)&&v(o.focus.origin)&&o.focus.getNodeAtCaret()===null)for(let c=Et(o.focus.origin,\"previous\");ze(c)&&a.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(r[r.length-1]);c=Ln(c))a.delete(c.origin),r.pop();for(;r.length>1;){let c=r[r.length-1];if(!v(c)||l.has(c)||c.isEmpty()||a.has(c))break;r.pop()}if(r.length===0&&o.isCollapsed()){let c=Be(o.anchor),u=Be(o.anchor.getFlipped()),d=h=>St(h)?h.origin:h.getNodeAtCaret(),f=d(c)||d(u)||(o.anchor.getNodeAtCaret()?c.origin:u.origin);r.push(f)}return r})(Zi(mi(this),\"next\"));return Pn()||(this._cachedNodes=e),e}setTextNodeRange(t,e,o,r){this.anchor.set(t.__key,e,\"text\"),this.focus.set(o.__key,r,\"text\")}getTextContent(){let t=this.getNodes();if(t.length===0)return\"\";let e=t[0],o=t[t.length-1],r=this.anchor,s=this.focus,i=r.isBefore(s),[a,l]=ci(this),c=\"\",u=!0;for(let d=0;d<t.length;d++){let f=t[d];if(v(f)&&!f.isInline())u||(c+=`\n`),u=!f.isEmpty();else if(u=!1,I(f)){let h=f.getTextContent();f===e?f===o?r.type===\"element\"&&s.type===\"element\"&&s.offset!==r.offset||(h=a<l?h.slice(a,l):h.slice(l,a)):h=i?h.slice(a):h.slice(l):f===o&&(h=i?h.slice(0,l):h.slice(0,a)),c+=h}else!Z(f)&&!Vt(f)||f===o&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(t){let e=te(),o=e.getEditorState()._selection,r=au(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,o);if(r===null)return;let[s,i]=r;this.anchor.set(s.key,s.offset,s.type,!0),this.focus.set(i.key,i.offset,i.type,!0),sr(this)}clone(){let t=this.anchor,e=this.focus;return new n(He(t.key,t.offset,t.type),He(e.key,e.offset,e.type),this.format,this.style)}toggleFormat(t){this.format=mr(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){let e=xe[t];return(this.format&e)!==0}insertRawText(t){let e=t.split(/(\\r?\\n|\\t)/),o=[],r=e.length;for(let s=0;s<r;s++){let i=e[s];i===`\n`||i===`\\r\n`?o.push(Dn()):i===\"\t\"?o.push(Er()):o.push(le(i))}this.insertNodes(o)}insertText(t){let e=this.anchor,o=this.focus,r=this.format,s=this.style,i=e,a=o;!this.isCollapsed()&&o.isBefore(e)&&(i=o,a=e),i.type===\"element\"&&(function(_,x,y,N){let S=_.getNode(),M=S.getChildAtIndex(_.offset),E=le();if(E.setFormat(y),E.setStyle(N),_u(M))M.splice(0,0,[E]);else{let T=ge(S)?Nt().append(E):E;M===null?S.append(T):M.insertBefore(T)}_.is(x)&&x.set(E.__key,0,\"text\"),_.set(E.__key,0,\"text\")})(i,a,r,s),a.type===\"element\"&&wn(a,Be(Pt(a,\"next\")));let l=i.offset,c=a.offset,u=this.getNodes(),d=u.length,f=u[0];I(f)||A(26);let h=f.getTextContent().length,g=f.getParentOrThrow(),p=u[d-1];if(d===1&&a.type===\"element\"&&(c=h,a.set(i.key,c,\"text\")),this.isCollapsed()&&l===h&&(_t(f)||!f.canInsertTextAfter()||!g.canInsertTextAfter()&&f.getNextSibling()===null)){let _=f.getNextSibling();if(I(_)&&_.canInsertTextBefore()&&!_t(_)||(_=le(),_.setFormat(r),_.setStyle(s),g.canInsertTextAfter()?f.insertAfter(_):g.insertAfter(_)),_.select(0,0),f=_,t!==\"\")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(_t(f)||!f.canInsertTextBefore()||!g.canInsertTextBefore()&&f.getPreviousSibling()===null)){let _=f.getPreviousSibling();if(I(_)&&!_t(_)||(_=le(),_.setFormat(r),g.canInsertTextBefore()?f.insertBefore(_):g.insertBefore(_)),_.select(),f=_,t!==\"\")return void this.insertText(t)}else if(f.isSegmented()&&l!==h){let _=le(f.getTextContent());_.setFormat(r),f.replace(_),f=_}else if(!this.isCollapsed()&&t!==\"\"){let _=p.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||v(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(\"\"),iu(this.anchor,this.focus,null),void this.insertText(t)}if(d===1){if(Rt(f)){let N=le(t);return N.select(),void f.replace(N)}let _=f.getFormat(),x=f.getStyle();if(l!==c||_===r&&x===s){if(Di(f)){let N=le(t);return N.setFormat(r),N.setStyle(s),N.select(),void f.replace(N)}}else{if(f.getTextContent()!==\"\"){let N=le(t);if(N.setFormat(r),N.setStyle(s),N.select(),l===0)f.insertBefore(N,!1);else{let[S]=f.splitText(l);S.insertAfter(N,!1)}return void(N.isComposing()&&this.anchor.type===\"text\"&&(this.anchor.offset-=t.length))}f.setFormat(r),f.setStyle(s)}let y=c-l;f=f.spliceText(l,y,t,!0),f.getTextContent()===\"\"?f.remove():this.anchor.type===\"text\"&&(f.isComposing()?this.anchor.offset-=t.length:(this.format=_,this.style=x))}else{let _=new Set([...f.getParentKeys(),...p.getParentKeys()]),x=v(f)?f:f.getParentOrThrow(),y=v(p)?p:p.getParentOrThrow(),N=p;if(!x.is(y)&&y.isInline())do N=y,y=y.getParentOrThrow();while(y.isInline());if(a.type===\"text\"&&(c!==0||p.getTextContent()===\"\")||a.type===\"element\"&&p.getIndexWithinParent()<c)if(I(p)&&!Rt(p)&&c!==p.getTextContentSize()){if(p.isSegmented()){let D=le(p.getTextContent());p.replace(D),p=D}ge(a.getNode())||a.type!==\"text\"||(p=p.spliceText(0,c,\"\")),_.add(p.__key)}else{let D=p.getParentOrThrow();D.canBeEmpty()||D.getChildrenSize()!==1?p.remove():D.remove()}else _.add(p.__key);let S=y.getChildren(),M=new Set(u),E=x.is(y),T=x.isInline()&&f.getNextSibling()===null?x:f;for(let D=S.length-1;D>=0;D--){let O=S[D];if(O.is(f)||v(O)&&O.isParentOf(f))break;O.isAttached()&&(!M.has(O)||O.is(N)?E||T.insertAfter(O,!1):O.remove())}if(!E){let D=y,O=null;for(;D!==null;){let b=D.getChildren(),P=b.length;(P===0||b[P-1].is(O))&&(_.delete(D.__key),O=D),D=D.getParent()}}if(Rt(f))if(l===h)f.select();else{let D=le(t);D.select(),f.replace(D)}else f=f.spliceText(l,h-l,t,!0),f.getTextContent()===\"\"?f.remove():f.isComposing()&&this.anchor.type===\"text\"&&(this.anchor.offset-=t.length);for(let D=1;D<d;D++){let O=u[D],b=O.__key;_.has(b)||O.remove()}}}removeText(){let t=Y()===this;go(this,zu(mi(this))),t&&Y()!==this&&Me(this)}formatText(t,e=null){if(this.isCollapsed())return this.toggleFormat(t),void ue(null);let o=this.getNodes(),r=[];for(let S of o)I(S)&&r.push(S);let s=S=>{o.forEach(M=>{if(v(M)){let E=M.getFormatFlags(t,S);M.setTextFormat(E)}})},i=r.length;if(i===0)return this.toggleFormat(t),ue(null),void s(e);let a=this.anchor,l=this.focus,c=this.isBackward(),u=c?l:a,d=c?a:l,f=0,h=r[0],g=u.type===\"element\"?0:u.offset;if(u.type===\"text\"&&g===h.getTextContentSize()&&(f=1,h=r[1],g=0),h==null)return;let p=h.getFormatFlags(t,e);s(p);let _=i-1,x=r[_],y=d.type===\"text\"?d.offset:x.getTextContentSize();if(h.is(x)){if(g===y)return;if(_t(h)||g===0&&y===h.getTextContentSize())h.setFormat(p);else{let S=h.splitText(g,y),M=g===0?S[0]:S[1];M.setFormat(p),u.type===\"text\"&&u.set(M.__key,0,\"text\"),d.type===\"text\"&&d.set(M.__key,y-g,\"text\")}return void(this.format=p)}g===0||_t(h)||([,h]=h.splitText(g),g=0),h.setFormat(p);let N=x.getFormatFlags(t,p);y>0&&(y===x.getTextContentSize()||_t(x)||([x]=x.splitText(y)),x.setFormat(N));for(let S=f+1;S<_;S++){let M=r[S],E=M.getFormatFlags(t,N);M.setFormat(E)}u.type===\"text\"&&u.set(h.__key,g,\"text\"),d.type===\"text\"&&d.set(x.__key,y,\"text\"),this.format=p|N}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key===\"root\"){this.insertParagraph();let g=Y();return w(g)||A(134),g.insertNodes(t)}let e=(this.isBackward()?this.focus:this.anchor).getNode(),o=uo(e,xt),r=t[t.length-1];if(v(o)&&\"__language\"in o){if(\"__language\"in t[0])this.insertText(t[0].getTextContent());else{let g=Ks(this);o.splice(g,0,t),r.selectEnd()}return}if(!t.some(g=>(v(g)||Z(g))&&!g.isInline())){v(o)||A(211,e.constructor.name,e.getType());let g=Ks(this);return o.splice(g,0,t),void r.selectEnd()}let s=(function(g){let p=Nt(),_=null;for(let x=0;x<g.length;x++){let y=g[x],N=Vt(y);if(N||Z(y)&&y.isInline()||v(y)&&y.isInline()||I(y)||y.isParentRequired()){if(_===null&&(_=y.createParentElementNode(),p.append(_),N))continue;_!==null&&_.append(y)}else p.append(y),_=null}return p})(t),i=s.getLastDescendant(),a=s.getChildren(),l=!v(o)||!o.isEmpty()?this.insertParagraph():null,c=a[a.length-1],u=a[0];var d;v(d=u)&&xt(d)&&!d.isEmpty()&&v(o)&&(!o.isEmpty()||o.canMergeWhenEmpty())&&(v(o)||A(211,e.constructor.name,e.getType()),o.append(...u.getChildren()),u=a[1]),u&&(o===null&&A(212,e.constructor.name,e.getType()),(function(g,p){let _=p.getParentOrThrow().getLastChild(),x=p,y=[p];for(;x!==_;)x.getNextSibling()||A(140),x=x.getNextSibling(),y.push(x);let N=g;for(let S of y)N=N.insertAfter(S)})(o,u));let f=uo(i,xt);l&&v(f)&&(l.canMergeWhenEmpty()||xt(c))&&(f.append(...l.getChildren()),l.remove()),v(o)&&o.isEmpty()&&o.remove(),i.selectEnd();let h=v(o)?o.getLastChild():null;Vt(h)&&f!==o&&h.remove()}insertParagraph(){if(this.anchor.key===\"root\"){let i=Nt();return ke().splice(this.anchor.offset,0,[i]),i.select(),i}let t=Ks(this),e=uo(this.anchor.getNode(),xt);v(e)||A(213);let o=e.getChildAtIndex(t),r=o?[o,...o.getNextSiblings()]:[],s=e.insertNewAfter(this,!1);return s?(s.append(...r),s.selectStart(),s):null}insertLineBreak(t){let e=Dn();if(this.insertNodes([e]),t){let o=e.getParentOrThrow(),r=e.getIndexWithinParent();o.select(r,r)}}extract(){let t=[...this.getNodes()],e=t.length,o=t[0],r=t[e-1],[s,i]=ci(this),a=this.isBackward(),[l,c]=a?[this.focus,this.anchor]:[this.anchor,this.focus],[u,d]=a?[i,s]:[s,i];if(e===0)return[];if(e===1){if(I(o)&&!this.isCollapsed()){let f=o.splitText(u,d),h=u===0?f[0]:f[1];return h?(l.set(h.getKey(),0,\"text\"),c.set(h.getKey(),h.getTextContentSize(),\"text\"),[h]):[]}return[o]}if(I(o)&&(u===o.getTextContentSize()?t.shift():u!==0&&([,o]=o.splitText(u),t[0]=o,l.set(o.getKey(),0,\"text\"))),I(r)){let f=r.getTextContent().length;d===0?t.pop():d!==f&&([r]=r.splitText(d),t[t.length-1]=r,c.set(r.getKey(),r.getTextContentSize(),\"text\"))}return t}modify(t,e,o){if(Gl(this,t,e,o))return;let r=t===\"move\",s=te(),i=et(Ie(s));if(!i)return;let a=s._blockCursorElement,l=s._rootElement,c=this.focus.getNode();if(l===null||a===null||!v(c)||c.isInline()||c.canBeEmpty()||fi(a,s,l),this.dirty){let u=nn(s,this.anchor.key),d=nn(s,this.focus.key);this.anchor.type===\"text\"&&(u=tn(u)),this.focus.type===\"text\"&&(d=tn(d)),u&&d&&uu(i,u,this.anchor.offset,d,this.focus.offset)}if((function(u,d,f,h){u.modify(d,f,h)})(i,t,e?\"backward\":\"forward\",o),i.rangeCount>0){let u=i.getRangeAt(0),d=this.anchor.getNode(),f=ge(d)?d:ku(d);if(this.applyDOMRange(u),this.dirty=!0,!r){let h=this.getNodes(),g=[],p=!1;for(let _=0;_<h.length;_++){let x=h[_];xr(x,f)?g.push(x):p=!0}if(p&&g.length>0)if(e){let _=g[0];v(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{let _=g[g.length-1];v(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}i.anchorNode===u.startContainer&&i.anchorOffset===u.startOffset||(function(_){let x=_.focus,y=_.anchor,N=y.key,S=y.offset,M=y.type;y.set(x.key,x.offset,x.type,!0),x.set(N,S,M,!0)})(this)}}o===\"lineboundary\"&&Gl(this,t,e,o,\"decorators\")}forwardDeletion(t,e,o){if(!o&&(t.type===\"element\"&&v(e)&&t.offset===e.getChildrenSize()||t.type===\"text\"&&t.offset===e.getTextContentSize())){let r=e.getParent(),s=e.getNextSibling()||(r===null?null:r.getNextSibling());if(v(s)&&s.isShadowRoot())return!0}return!1}deleteCharacter(t){let e=this.isCollapsed();if(this.isCollapsed()){let o=this.anchor,r=o.getNode();if(this.forwardDeletion(o,r,t))return;let s=ji(Pt(o,t?\"previous\":\"next\"));if(s.getTextSlices().every(a=>a===null||a.distance===0)){let a={type:\"initial\"};for(let l of s.iterNodeCarets(\"shadowRoot\"))if(ze(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(a.type===\"merge-block\")break;if(v(s.anchor.origin)&&s.anchor.origin.isEmpty()){let c=Be(l);go(this,wt(c,c)),s.anchor.origin.remove()}return}a.type!==\"merge-next-block\"&&a.type!==\"merge-block\"||(a={block:a.block,caret:l,type:\"merge-block\"})}}else{if(a.type===\"merge-block\")break;if(on(l)){if(v(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(s.anchor.origin))break}else a={block:l.origin,type:\"merge-next-block\"};continue}if(Z(l.origin)){if(!l.origin.isIsolated())if(a.type===\"merge-next-block\"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&v(s.anchor.origin)&&s.anchor.origin.isEmpty()){s.anchor.origin.remove();let c=Ai();c.add(l.origin.getKey()),Me(c)}else l.origin.remove();return}break}}if(a.type===\"merge-block\"){let{caret:l,block:c}=a;return go(this,wt(!l.origin.isEmpty()&&c.isEmpty()?Kn(he(c,l.direction)):s.anchor,l)),this.removeText()}}let i=this.focus;if(this.modify(\"extend\",t,\"character\"),this.isCollapsed()){if(t&&o.offset===0&&Bl(this,o.getNode()))return}else{let a=i.type===\"text\"?i.getNode():null;if(r=o.type===\"text\"?o.getNode():null,a!==null&&a.isSegmented()){let l=i.offset,c=a.getTextContentSize();if(a.is(r)||t&&l!==c||!t&&l!==0)return void Wl(a,t,l)}else if(r!==null&&r.isSegmented()){let l=o.offset,c=r.getTextContentSize();if(r.is(a)||t&&l!==0||!t&&l!==c)return void Wl(r,t,l)}(function(l,c){let u=l.anchor,d=l.focus,f=u.getNode(),h=d.getNode();if(f===h&&u.type===\"text\"&&d.type===\"text\"){let g=u.offset,p=d.offset,_=g<p,x=_?g:p,y=_?p:g,N=y-1;x!==N&&(function(S){return!(Tu(S)||mp(S))})(f.getTextContent().slice(x,y))&&(c?d.set(d.key,N,d.type):u.set(u.key,N,u.type))}})(this,t)}}if(this.removeText(),t&&!e&&this.isCollapsed()&&this.anchor.type===\"element\"&&this.anchor.offset===0){let o=this.anchor.getNode();o.isEmpty()&&ge(o.getParent())&&o.getPreviousSibling()===null&&Bl(this,o)}}deleteLine(t){this.isCollapsed()&&this.modify(\"extend\",t,\"lineboundary\"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){let e=this.anchor,o=e.getNode();if(this.forwardDeletion(e,o,t))return;this.modify(\"extend\",t,\"word\")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}};function Tr(n){return n instanceof gr}function Kl(n){let t=n.offset;if(n.type===\"text\")return t;let e=n.getNode();return t===e.getChildrenSize()?e.getTextContent().length:0}function ci(n){let t=n.getStartEndPoints();if(t===null)return[0,0];let[e,o]=t;return e.type===\"element\"&&o.type===\"element\"&&e.key===o.key&&e.offset===o.offset?[0,0]:[Kl(e),Kl(o)]}function Bl(n,t){for(let e=t;e;e=e.getParent()){if(v(e)){if(e.collapseAtStart(n))return!0;if(Ye(e))break}if(e.getPreviousSibling())break}return!1}var mp=(()=>{try{let n=new RegExp(\"\\\\p{Emoji}\",\"u\"),t=n.test.bind(n);if(t(\"\\u2764\\uFE0F\")&&t(\"#\\uFE0F\\u20E3\")&&t(\"\\u{1F44D}\"))return t}catch{}return()=>!1})();function Wl(n,t,e){let o=n,r=o.getTextContent().split(/(?=\\s)/g),s=r.length,i=0,a=0;for(let c=0;c<s;c++){let u=c===s-1;if(a=i,i+=r[c].length,t&&i===e||i>e||u){r.splice(c,1),u&&(a=void 0);break}}let l=r.join(\"\").trim();l===\"\"?o.remove():(o.setTextContent(l),o.select(a,a))}function zl(n,t,e,o){let r,s=t;if(Ce(n)){let i=!1,a=n.childNodes,l=a.length,c=o._blockCursorElement;s===l&&(i=!0,s=l-1);let u=a[s],d=!1;if(u===c)u=a[s+1],d=!0;else if(c!==null){let f=c.parentNode;n===f&&t>Array.prototype.indexOf.call(f.children,c)&&s--}if(r=Sn(u),I(r))s=Ue(r,i?\"next\":\"previous\");else{let f=Sn(n);if(f===null)return null;if(v(f)){let h=o.getElementByKey(f.getKey());h===null&&A(214),[f,s]=f.getDOMSlot(h).resolveChildIndex(f,h,n,t),v(f)||A(215),i&&s>=f.getChildrenSize()&&(s=Math.max(0,f.getChildrenSize()-1));let p=f.getChildAtIndex(s);if(v(p)&&(function(_,x,y){let N=_.getParent();return y===null||N===null||!N.canBeEmpty()||N!==y.getNode()})(p,0,e)){let _=i?p.getLastDescendant():p.getFirstDescendant();_===null?f=p:(p=_,f=v(p)?p:p.getParentOrThrow()),s=0}I(p)?(r=p,f=null,s=Ue(p,i?\"next\":\"previous\")):p!==f&&i&&!d&&(v(f)||A(216),s=Math.min(f.getChildrenSize(),s+1))}else{let h=f.getIndexWithinParent();s=t===0&&Z(f)&&Sn(n)===f?h:h+1,f=f.getParentOrThrow()}if(v(f))return He(f.__key,s,\"element\")}}else r=Sn(n);return I(r)?He(r.__key,Ue(r,s,\"clamp\"),\"text\"):null}function Ul(n,t,e){let o=n.offset,r=n.getNode();if(o===0){let s=r.getPreviousSibling(),i=r.getParent();if(t){if((e||!t)&&s===null&&v(i)&&i.isInline()){let a=i.getPreviousSibling();I(a)&&n.set(a.__key,a.getTextContent().length,\"text\")}}else v(s)&&!e&&s.isInline()?n.set(s.__key,s.getChildrenSize(),\"element\"):I(s)&&n.set(s.__key,s.getTextContent().length,\"text\")}else if(o===r.getTextContent().length){let s=r.getNextSibling(),i=r.getParent();if(t&&v(s)&&s.isInline())n.set(s.__key,0,\"element\");else if((e||t)&&s===null&&v(i)&&i.isInline()&&!i.canInsertTextAfter()){let a=i.getNextSibling();I(a)&&n.set(a.__key,0,\"text\")}}}function iu(n,t,e){if(n.type===\"text\"&&t.type===\"text\"){let o=n.isBefore(t),r=n.is(t);Ul(n,o,r),Ul(t,!o,r),r&&t.set(n.key,n.offset,n.type);let s=te();if(s.isComposing()&&s._compositionKey!==n.key&&w(e)){let i=e.anchor,a=e.focus;n.set(i.key,i.offset,i.type,!0),t.set(a.key,a.offset,a.type,!0)}}}function au(n,t,e,o,r,s){if(n===null||e===null||!To(r,n,e))return null;let i=zl(n,t,w(s)?s.anchor:null,r);if(i===null)return null;let a=zl(e,o,w(s)?s.focus:null,r);if(a===null)return null;if(i.type===\"element\"&&a.type===\"element\"){let l=Sn(n),c=Sn(e);if(Z(l)&&Z(c))return null}return iu(i,a,s),[i,a]}function yp(n){return v(n)&&!n.isInline()}function lu(n,t,e,o,r,s){let i=Tt(),a=new en(He(n,t,r),He(e,o,s),0,\"\");return a.dirty=!0,i._selection=a,a}function cu(){let n=He(\"root\",0,\"element\"),t=He(\"root\",0,\"element\");return new en(n,t,0,\"\")}function Ai(){return new gr(new Set)}function xp(n,t){return Or(null,n,t,null)}function Or(n,t,e,o){let r=e._window;if(r===null)return null;let s=o||r.event,i=s?s.type:void 0,a=i===\"selectionchange\",l=!Hs&&(a||i===\"beforeinput\"||i===\"compositionstart\"||i===\"compositionend\"||i===\"click\"&&s&&s.detail===3||i===\"drop\"||i===void 0),c,u,d,f;if(w(n)&&!l)return n.clone();if(t===null)return null;if(c=t.anchorNode,u=t.focusNode,d=t.anchorOffset,f=t.focusOffset,(a||i===void 0)&&w(n)&&!To(e,c,u))return n.clone();let h=au(c,d,u,f,e,n);if(h===null)return null;let[g,p]=h;return new en(g,p,w(n)?n.format:0,w(n)?n.style:\"\")}function Y(){return Tt()._selection}function rn(){return te()._editorState._selection}function hr(n,t,e,o=1){let r=n.anchor,s=n.focus,i=r.getNode(),a=s.getNode();if(!t.is(i)&&!t.is(a))return;let l=t.__key;if(n.isCollapsed()){let c=r.offset;if(e<=c&&o>0||e<c&&o<0){let u=Math.max(0,c+o);r.set(l,u,\"element\"),s.set(l,u,\"element\"),Hl(n)}}else{let c=n.isBackward(),u=c?s:r,d=u.getNode(),f=c?r:s,h=f.getNode();if(t.is(d)){let g=u.offset;(e<=g&&o>0||e<g&&o<0)&&u.set(l,Math.max(0,g+o),\"element\")}if(t.is(h)){let g=f.offset;(e<=g&&o>0||e<g&&o<0)&&f.set(l,Math.max(0,g+o),\"element\")}}Hl(n)}function Hl(n){let t=n.anchor,e=t.offset,o=n.focus,r=o.offset,s=t.getNode(),i=o.getNode();if(n.isCollapsed()){if(!v(s))return;let a=s.getChildrenSize(),l=e>=a,c=l?s.getChildAtIndex(a-1):s.getChildAtIndex(e);if(I(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,\"text\"),o.set(c.__key,u,\"text\")}return}if(v(s)){let a=s.getChildrenSize(),l=e>=a,c=l?s.getChildAtIndex(a-1):s.getChildAtIndex(e);if(I(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,\"text\")}}if(v(i)){let a=i.getChildrenSize(),l=r>=a,c=l?i.getChildAtIndex(a-1):i.getChildAtIndex(r);if(I(c)){let u=0;l&&(u=c.getTextContentSize()),o.set(c.__key,u,\"text\")}}}function pr(n,t,e,o,r){let s=null,i=0,a=null;o!==null?(s=o.__key,I(o)?(i=o.getTextContentSize(),a=\"text\"):v(o)&&(i=o.getChildrenSize(),a=\"element\")):r!==null&&(s=r.__key,I(r)?a=\"text\":v(r)&&(a=\"element\")),s!==null&&a!==null?n.set(s,i,a):(i=t.getIndexWithinParent(),i===-1&&(i=e.getChildrenSize()),n.set(e.__key,i,\"element\"))}function Yl(n,t,e,o,r){n.type===\"text\"?n.set(e,n.offset+(t?0:r),\"text\"):n.offset>o.getIndexWithinParent()&&n.set(n.key,n.offset-1,\"element\")}function uu(n,t,e,o,r){try{n.setBaseAndExtent(t,e,o,r)}catch{}}function Np(n,t,e,o,r,s,i){let a=o.anchorNode,l=o.focusNode,c=o.anchorOffset,u=o.focusOffset,d=document.activeElement;if(r.has(eu)&&d!==s||d!==null&&Li(d))return;if(!w(t))return void(n!==null&&To(e,a,l)&&o.removeAllRanges());let f=t.anchor,h=t.focus,g=f.key,p=h.key,_=nn(e,g),x=nn(e,p),y=f.offset,N=h.offset,S=t.format,M=t.style,E=t.isCollapsed(),T=_,D=x,O=!1;if(f.type===\"text\"){T=tn(_);let ee=f.getNode();O=ee.getFormat()!==S||ee.getStyle()!==M}else w(n)&&n.anchor.type===\"text\"&&(O=!0);var b,P,q,H,G;if(h.type===\"text\"&&(D=tn(x)),T!==null&&D!==null&&(E&&(n===null||O||w(n)&&(n.format!==S||n.style!==M))&&(b=S,P=M,q=y,H=g,G=performance.now(),Jc=[b,P,q,H,G]),c!==y||u!==N||a!==T||l!==D||o.type===\"Range\"&&E||(d!==null&&s.contains(d)||r.has(ou)||s.focus({preventScroll:!0}),f.type===\"element\"))){if(uu(o,T,y,D,N),!r.has(tu)&&t.isCollapsed()&&s!==null&&s===document.activeElement){let ee=w(t)&&t.anchor.type===\"element\"?T.childNodes[y]||null:o.rangeCount>0?o.getRangeAt(0):null;if(ee!==null){let se;if(ee instanceof Text){let Ae=document.createRange();Ae.selectNode(ee),se=Ae.getBoundingClientRect()}else se=ee.getBoundingClientRect();(function(Ae,xn,ft){let to=zi(ft),pl=Ui(to);if(to===null||pl===null)return;let{top:As,bottom:bs}=xn,Go=0,Jo=0,Dt=ft;for(;Dt!==null;){let Rs=Dt===to.body;if(Rs)Go=0,Jo=Ie(Ae).innerHeight;else{let jo=Dt.getBoundingClientRect();Go=jo.top,Jo=jo.bottom}let no=0;if(As<Go?no=-(Go-As):bs>Jo&&(no=bs-Jo),no!==0)if(Rs)pl.scrollBy(0,no);else{let jo=Dt.scrollTop;Dt.scrollTop+=no;let _l=Dt.scrollTop-jo;As-=_l,bs-=_l}if(Rs)break;Dt=Mo(Dt)}})(e,se,s)}}si=!0}}function Cp(n){let t=Y()||rn();t===null&&(t=ke().selectEnd()),t.insertNodes(n)}function Sp(){let n=Y();return n===null?\"\":n.getTextContent()}function Ks(n){let t=n;n.isCollapsed()||t.removeText();let e=Y();w(e)&&(t=e),w(t)||A(161);let o=t.anchor,r=o.getNode(),s=o.offset;for(;!xt(r);){let i=r;if([r,s]=Ep(r,s),i.is(r))break}return s}function Ep(n,t){let e=n.getParent();if(!e){let r=Nt();return ke().append(r),r.select(),[ke(),0]}if(I(n)){let r=n.splitText(t);if(r.length===0)return[e,n.getIndexWithinParent()];let s=t===0?0:1;return[e,r[0].getIndexWithinParent()+s]}if(!v(n)||t===0)return[e,n.getIndexWithinParent()];let o=n.getChildAtIndex(t);if(o){let r=new en(He(n.__key,t,\"element\"),He(n.__key,t,\"element\"),0,\"\"),s=n.insertNewAfter(r);s&&s.append(o,...o.getNextSiblings())}return[e,n.getIndexWithinParent()+1]}function Gl(n,t,e,o,r=\"decorators-and-blocks\"){if(t===\"move\"&&o===\"character\"&&!n.isCollapsed()){let[u,d]=e===n.isBackward()?[n.focus,n.anchor]:[n.anchor,n.focus];return d.set(u.key,u.offset,u.type),!0}let s=Pt(n.focus,e?\"previous\":\"next\"),i=o===\"lineboundary\",a=t===\"move\",l=s,c=r===\"decorators-and-blocks\";if(!Uu(l)){for(let u of l){c=!1;let{origin:d}=u;if(!Z(d)||d.isIsolated()||(l=u,!i||!d.isInline()))break}if(c)for(let u of ji(s).iterNodeCarets(t===\"extend\"?\"shadowRoot\":\"root\")){if(ze(u))u.origin.isInline()||(l=u);else{if(v(u.origin))continue;Z(u.origin)&&!u.origin.isInline()&&(l=u)}break}}if(l===s)return!1;if(a&&!i&&Z(l.origin)&&l.origin.isKeyboardSelectable()){let u=Ai();return u.add(l.origin.getKey()),Me(u),!0}return l=Be(l),a&&wn(n.anchor,l),wn(n.focus,l),c||!i}var de=null,fe=null,Oe=!1,Bs=!1,nr=0,Jl={characterData:!0,childList:!0,subtree:!0};function Pn(){return Oe||de!==null&&de._readOnly}function ce(){Oe&&A(13)}function du(){nr>99&&A(14)}function Tt(){return de===null&&A(195,fu()),de}function te(){return fe===null&&A(196,fu()),fe}function fu(){let n=0,t=new Set,e=Ct.version;if(typeof window<\"u\")for(let r of document.querySelectorAll(\"[contenteditable]\")){let s=Oo(r);if(vr(s))n++;else if(s){let i=String(s.constructor.version||\"<0.17.1\");i===e&&(i+=\" (separately built, likely a bundler configuration issue)\"),t.add(i)}}let o=` Detected on the page: ${n} compatible editor(s) with version ${e}`;return t.size&&(o+=` and incompatible editors with versions ${Array.from(t).join(\", \")}`),o}function Tp(){return fe}function jl(n,t,e){let o=t.__type,r=$i(n,o),s=e.get(o);s===void 0&&(s=Array.from(r.transforms),e.set(o,s));let i=s.length;for(let a=0;a<i&&(s[a](t),t.isAttached());a++);}function Vl(n,t){return n!==void 0&&n.__key!==t&&n.isAttached()}function gu(n,t){if(!t)return;let e=n._updateTags,o=t;Array.isArray(t)||(o=[t]);for(let r of o)e.add(r)}function Op(n){return bi(n,te()._nodes)}function bi(n,t){let e=n.type,o=t.get(e);o===void 0&&A(17,e);let r=o.klass;n.type!==r.getType()&&A(18,r.name);let s=r.importJSON(n),i=n.children;if(v(s)&&Array.isArray(i))for(let a=0;a<i.length;a++){let l=bi(i[a],t);s.append(l)}return s}function Xl(n,t,e){let o=de,r=Oe,s=fe;de=t,Oe=!0,fe=n;try{return e()}finally{de=o,Oe=r,fe=s}}function yt(n,t){let e=n._pendingEditorState,o=n._rootElement,r=n._headless||o===null;if(e===null)return;let s=n._editorState,i=s._selection,a=e._selection,l=n._dirtyType!==0,c=de,u=Oe,d=fe,f=n._updating,h=n._observer,g=null;if(n._pendingEditorState=null,n._editorState=e,!r&&l&&h!==null){fe=n,de=e,Oe=!1,n._updating=!0;try{let E=n._dirtyType,T=n._dirtyElements,D=n._dirtyLeaves;h.disconnect(),g=Vh(s,e,n,E,T,D)}catch(E){if(E instanceof Error&&n._onError(E),Bs)throw E;return mu(n,null,o,e),yc(n),n._dirtyType=2,Bs=!0,yt(n,s),void(Bs=!1)}finally{h.observe(o,Jl),n._updating=f,de=c,Oe=u,fe=d}}e._readOnly||(e._readOnly=!0);let p=n._dirtyLeaves,_=n._dirtyElements,x=n._normalizedNodes,y=n._updateTags,N=n._deferred;l&&(n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),(function(E,T){let D=E._decorators,O=E._pendingDecorators||D,b=T._nodeMap,P;for(P in O)b.has(P)||(O===D&&(O=Su(E)),delete O[P])})(n,e);let S=r?null:et(Ie(n));if(n._editable&&S!==null&&(l||a===null||a.dirty||!a.is(i))&&o!==null&&!y.has(nu)){fe=n,de=e;try{if(h!==null&&h.disconnect(),l||a===null||a.dirty){let E=n._blockCursorElement;E!==null&&fi(E,n,o),Np(i,a,n,S,y,o)}(function(E,T,D){let O=E._blockCursorElement;if(w(D)&&D.isCollapsed()&&D.anchor.type===\"element\"&&T.contains(document.activeElement)){let b=D.anchor,P=b.getNode(),q=b.offset,H=!1,G=null;if(q===P.getChildrenSize())zs(P.getChildAtIndex(q-1))&&(H=!0);else{let ee=P.getChildAtIndex(q);if(ee!==null&&zs(ee)){let se=ee.getPreviousSibling();(se===null||zs(se))&&(H=!0,G=E.getElementByKey(ee.__key))}}if(H){let ee=E.getElementByKey(P.__key);return O===null&&(E._blockCursorElement=O=(function(se){let Ae=se.theme,xn=document.createElement(\"div\");xn.contentEditable=\"false\",xn.setAttribute(\"data-lexical-cursor\",\"true\");let ft=Ae.blockCursor;if(ft!==void 0){if(typeof ft==\"string\"){let to=fc(ft);ft=Ae.blockCursor=to}ft!==void 0&&xn.classList.add(...ft)}return xn})(E._config)),T.style.caretColor=\"transparent\",void(G===null?ee.appendChild(O):ee.insertBefore(O,G))}}O!==null&&fi(O,E,T)})(n,o,a)}finally{h!==null&&h.observe(o,Jl),fe=d,de=c}}g!==null&&(function(E,T,D,O,b){let P=Array.from(E._listeners.mutation),q=P.length;for(let H=0;H<q;H++){let[G,ee]=P[H];for(let se of ee){let Ae=T.get(se);Ae!==void 0&&G(Ae,{dirtyLeaves:O,prevEditorState:b,updateTags:D})}}})(n,g,y,p,s),w(a)||a===null||i!==null&&i.is(a)||n.dispatchCommand(Ci,void 0);let M=n._pendingDecorators;M!==null&&(n._decorators=M,n._pendingDecorators=null,co(\"decorator\",n,!0,M)),(function(E,T,D){let O=tc(T),b=tc(D);O!==b&&co(\"textcontent\",E,!0,b)})(n,t||s,e),co(\"update\",n,!0,{dirtyElements:_,dirtyLeaves:p,editorState:e,mutatedNodes:g,normalizedNodes:x,prevEditorState:t||s,tags:y}),(function(E,T){if(E._deferred=[],T.length!==0){let D=E._updating;E._updating=!0;try{for(let O=0;O<T.length;O++)T[O]()}finally{E._updating=D}}})(n,N),(function(E){let T=E._updates;if(T.length!==0){let D=T.shift();if(D){let[O,b]=D;Mr(E,O,b)}}})(n)}function co(n,t,e,...o){let r=t._updating;t._updating=e;try{let s=Array.from(t._listeners[n]);for(let i=0;i<s.length;i++)s[i].apply(null,o)}finally{t._updating=r}}function ql(n,t){let e=n._updates,o=t||!1;for(;e.length!==0;){let r=e.shift();if(r){let[s,i]=r,a=n._pendingEditorState,l;i!==void 0&&(l=i.onUpdate,i.skipTransforms&&(o=!0),i.discrete&&(a===null&&A(191),a._flushSync=!0),l&&n._deferred.push(l),gu(n,i.tag)),a==null?Mr(n,s,i):s()}}return o}function Mr(n,t,e){let o=n._updateTags,r,s=!1,i=!1;e!==void 0&&(r=e.onUpdate,gu(n,e.tag),s=e.skipTransforms||!1,i=e.discrete||!1),r&&n._deferred.push(r);let a=n._editorState,l=n._pendingEditorState,c=!1;(l===null||l._readOnly)&&(l=n._pendingEditorState=hu(l||a),c=!0),l._flushSync=i;let u=de,d=Oe,f=fe,h=n._updating;de=l,Oe=!1,n._updating=!0,fe=n;let g=n._headless||n.getRootElement()===null;ki(null);try{c&&(g?a._selection!==null&&(l._selection=a._selection.clone()):l._selection=(function(y,N){let S=y.getEditorState()._selection,M=et(Ie(y));return w(S)||S==null?Or(S,M,y,N):S.clone()})(n,e&&e.event||null));let _=n._compositionKey;t(),s=ql(n,s),(function(y,N){let S=N.getEditorState()._selection,M=y._selection;if(w(M)){let E=M.anchor,T=M.focus,D;if(E.type===\"text\"&&(D=E.getNode(),D.selectionTransform(S,M)),T.type===\"text\"){let O=T.getNode();D!==O&&O.selectionTransform(S,M)}}})(l,n),n._dirtyType!==0&&(s?(function(y,N){let S=N._dirtyLeaves,M=y._nodeMap;for(let E of S){let T=M.get(E);I(T)&&T.isAttached()&&T.isSimpleText()&&!T.isUnmergeable()&&vl(T)}})(l,n):(function(y,N){let S=N._dirtyLeaves,M=N._dirtyElements,E=y._nodeMap,T=bt(),D=new Map,O=S,b=O.size,P=M,q=P.size;for(;b>0||q>0;){if(b>0){N._dirtyLeaves=new Set;for(let H of O){let G=E.get(H);I(G)&&G.isAttached()&&G.isSimpleText()&&!G.isUnmergeable()&&vl(G),G!==void 0&&Vl(G,T)&&jl(N,G,D),S.add(H)}if(O=N._dirtyLeaves,b=O.size,b>0){nr++;continue}}N._dirtyLeaves=new Set,N._dirtyElements=new Map,P.delete(\"root\")&&P.set(\"root\",!0);for(let H of P){let G=H[0],ee=H[1];if(M.set(G,ee),!ee)continue;let se=E.get(G);se!==void 0&&Vl(se,T)&&jl(N,se,D)}O=N._dirtyLeaves,b=O.size,P=N._dirtyElements,q=P.size,nr++}N._dirtyLeaves=S,N._dirtyElements=M})(l,n),ql(n),(function(y,N,S,M){let E=y._nodeMap,T=N._nodeMap,D=[];for(let[O]of M){let b=T.get(O);b!==void 0&&(b.isAttached()||(v(b)&&pc(b,O,E,T,D,M),E.has(O)||M.delete(O),D.push(O)))}for(let O of D)T.delete(O);for(let O of S){let b=T.get(O);b===void 0||b.isAttached()||(E.has(O)||S.delete(O),T.delete(O))}})(a,l,n._dirtyLeaves,n._dirtyElements)),_!==n._compositionKey&&(l._flushSync=!0);let x=l._selection;if(w(x)){let y=l._nodeMap,N=x.anchor.key,S=x.focus.key;y.get(N)!==void 0&&y.get(S)!==void 0||A(19)}else Tr(x)&&x._nodes.size===0&&(l._selection=null)}catch(_){return _ instanceof Error&&n._onError(_),n._pendingEditorState=a,n._dirtyType=2,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void yt(n)}finally{de=u,Oe=d,fe=f,n._updating=h,nr=0}n._dirtyType!==0||n._deferred.length>0||(function(_,x){let y=x.getEditorState()._selection,N=_._selection;if(N!==null){if(N.dirty||!N.is(y))return!0}else if(y!==null)return!0;return!1})(l,n)?l._flushSync?(l._flushSync=!1,yt(n)):c&&Lp(()=>{yt(n)}):(l._flushSync=!1,c&&(o.clear(),n._deferred=[],n._pendingEditorState=null))}function be(n,t,e){fe===n&&e===void 0?t():Mr(n,t,e)}var ui=class n{constructor(t,e,o){C(this,\"element\");C(this,\"before\");C(this,\"after\");this.element=t,this.before=e||null,this.after=o||null}withBefore(t){return new n(this.element,t,this.after)}withAfter(t){return new n(this.element,this.before,t)}withElement(t){return this.element===t?this:new n(t,this.before,this.after)}insertChild(t){let e=this.before||this.getManagedLineBreak();return e!==null&&e.parentElement!==this.element&&A(222),this.element.insertBefore(t,e),this}removeChild(t){return t.parentElement!==this.element&&A(223),this.element.removeChild(t),this}replaceChild(t,e){return e.parentElement!==this.element&&A(224),this.element.replaceChild(t,e),this}getFirstChild(){let t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{let e=t===\"decorator\"&&(po||Mn||ho);this.insertManagedLineBreak(e)}}removeManagedLineBreak(){let t=this.getManagedLineBreak();if(t){let e=this.element,o=t.nodeName===\"IMG\"?t.nextSibling:null;o&&e.removeChild(o),e.removeChild(t),e.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){let e=this.getManagedLineBreak();if(e){if(t===(e.nodeName===\"IMG\"))return;this.removeManagedLineBreak()}let o=this.element,r=this.before,s=document.createElement(\"br\");if(o.insertBefore(s,r),t){let i=document.createElement(\"img\");i.setAttribute(\"data-lexical-linebreak\",\"true\"),i.style.cssText=\"display: inline !important; border: 0px !important; margin: 0px !important;\",i.alt=\"\",o.insertBefore(i,s),o.__lexicalLineBreak=i}else o.__lexicalLineBreak=s}getFirstChildOffset(){let t=0;for(let e=this.after;e!==null;e=e.previousSibling)t++;return t}resolveChildIndex(t,e,o,r){if(o===this.element){let l=this.getFirstChildOffset();return[t,Math.min(l+t.getChildrenSize(),Math.max(l,r))]}let s=Zl(e,o);s.push(r);let i=Zl(e,this.element),a=t.getIndexWithinParent();for(let l=0;l<i.length;l++){let c=s[l],u=i[l];if(c===void 0||c<u)break;if(c>u){a+=1;break}}return[t.getParentOrThrow(),a]}};function Zl(n,t){let e=[],o=t;for(;o!==n&&o!==null;o=o.parentNode){let r=0;for(let s=o.previousSibling;s!==null;s=s.previousSibling)r++;e.push(r)}return o!==n&&A(225),e.reverse()}var It=class extends Re{constructor(e){super(e);C(this,\"__first\");C(this,\"__last\");C(this,\"__size\");C(this,\"__format\");C(this,\"__style\");C(this,\"__indent\");C(this,\"__dir\");C(this,\"__textFormat\");C(this,\"__textStyle\");this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style=\"\",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=\"\"}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){let e=this.getFormat();return Lh[e]||\"\"}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],o=this.getFirstChild();for(;o!==null;)e.push(o),o=o.getNextSibling();return e}getChildrenKeys(){let e=[],o=this.getFirstChild();for(;o!==null;)e.push(o.__key),o=o.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){let e=te()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),o=this.getParentOrThrow().getLastChild();return o!==null&&o.is(e)}getAllTextNodes(){let e=[],o=this.getFirstChild();for(;o!==null;){if(I(o)&&e.push(o),v(o)){let r=o.getAllTextNodes();e.push(...r)}o=o.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;v(e);){let o=e.getFirstChild();if(o===null)break;e=o}return e}getLastDescendant(){let e=this.getLastChild();for(;v(e);){let o=e.getLastChild();if(o===null)break;e=o}return e}getDescendantByIndex(e){let o=this.getChildren(),r=o.length;if(e>=r){let i=o[r-1];return v(i)&&i.getLastDescendant()||i||null}let s=o[e];return v(s)&&s.getFirstDescendant()||s||null}getFirstChild(){let e=this.getLatest().__first;return e===null?null:ae(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return e===null&&A(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return e===null?null:ae(e)}getLastChildOrThrow(){let e=this.getLastChild();return e===null&&A(96,this.__key),e}getChildAtIndex(e){let o=this.getChildrenSize(),r,s;if(e<o/2){for(r=this.getFirstChild(),s=0;r!==null&&s<=e;){if(s===e)return r;r=r.getNextSibling(),s++}return null}for(r=this.getLastChild(),s=o-1;r!==null&&s>=e;){if(s===e)return r;r=r.getPreviousSibling(),s--}return null}getTextContent(){let e=\"\",o=this.getChildren(),r=o.length;for(let s=0;s<r;s++){let i=o[s];e+=i.getTextContent(),v(i)&&s!==r-1&&!i.isInline()&&(e+=$t)}return e}getTextContentSize(){let e=0,o=this.getChildren(),r=o.length;for(let s=0;s<r;s++){let i=o[s];e+=i.getTextContentSize(),v(i)&&s!==r-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==\"\"){let o=xl[e];return(this.getFormat()&o)!==0}return!1}hasTextFormat(e){let o=xe[e];return(this.getTextFormat()&o)!==0}getFormatFlags(e,o){return mr(this.getLatest().__textFormat,e,o)}getTextStyle(){return this.getLatest().__textStyle}select(e,o){ce();let r=Y(),s=e,i=o,a=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&o===0){let c=this.getFirstChild();if(I(c)||v(c))return c.select(0,0)}else if(!(e!==void 0&&e!==a||o!==void 0&&o!==a)){let c=this.getLastChild();if(I(c)||v(c))return c.select()}}s===void 0&&(s=a),i===void 0&&(i=a);let l=this.__key;return w(r)?(r.anchor.set(l,s,\"element\"),r.focus.set(l,i,\"element\"),r.dirty=!0,r):lu(l,s,l,i,\"element\",\"element\")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(o=>o.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let o=this.getWritable();return o.__dir=e,o}setFormat(e){return this.getWritable().__format=e!==\"\"?xl[e]:0,this}setStyle(e){return this.getWritable().__style=e||\"\",this}setTextFormat(e){let o=this.getWritable();return o.__textFormat=e,o}setTextStyle(e){let o=this.getWritable();return o.__textStyle=e,o}setIndent(e){return this.getWritable().__indent=e,this}splice(e,o,r){fr(this)&&A(324,this.__key,this.__type);let s=this.getChildrenSize(),i=this.getWritable();e+o<=s||A(226,String(e),String(o),String(s));let a=i.__key,l=[],c=[],u=this.getChildAtIndex(e+o),d=null,f=s-o+r.length;if(e!==0)if(e===s)d=this.getLastChild();else{let g=this.getChildAtIndex(e);g!==null&&(d=g.getPreviousSibling())}if(o>0){let g=d===null?this.getFirstChild():d.getNextSibling();for(let p=0;p<o;p++){g===null&&A(100);let _=g.getNextSibling(),x=g.__key;kt(g.getWritable()),c.push(x),g=_}}let h=d;for(let g of r){h!==null&&g.is(h)&&(d=h=h.getPreviousSibling());let p=g.getWritable();p.__parent===a&&f--,kt(p);let _=g.__key;if(h===null)i.__first=_,p.__prev=null;else{let x=h.getWritable();x.__next=_,p.__prev=x.__key}g.__key===a&&A(76),p.__parent=a,l.push(_),h=g}if(e+o===s)h!==null&&(h.getWritable().__next=null,i.__last=h.__key);else if(u!==null){let g=u.getWritable();if(h!==null){let p=h.getWritable();g.__prev=h.__key,p.__next=u.__key}else g.__prev=null}if(i.__size=f,c.length){let g=Y();if(w(g)){let p=new Set(c),_=new Set(l),{anchor:x,focus:y}=g;Ql(x,p,_)&&pr(x,x.getNode(),this,d,u),Ql(y,p,_)&&pr(y,y.getNode(),this,d,u),f!==0||this.canBeEmpty()||Ye(this)||this.remove()}}return i}getDOMSlot(e){return new ui(e)}exportDOM(e){let{element:o}=super.exportDOM(e);if(Ce(o)){let r=this.getIndent();r>0&&(o.style.paddingInlineStart=40*r+\"px\");let s=this.getDirection();s&&(o.dir=s)}return{element:o}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},o=this.getTextFormat(),r=this.getTextStyle();return o!==0&&(e.textFormat=o),r!==\"\"&&(e.textStyle=r),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||\"\")}insertNewAfter(e,o){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,o,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,o){let r=this.getDOMSlot(e),s=r.getFirstChild();for(let i=this.getFirstChild();i;i=i.getNextSibling()){let a=o.getElementByKey(i.getKey());a!==null&&(s==null?(r.insertChild(a),s=a):s!==a&&r.replaceChild(a,s),s=s.nextSibling)}}};function v(n){return n instanceof It}function Ql(n,t,e){let o=n.getNode();for(;o;){let r=o.__key;if(t.has(r)&&!e.has(r))return!0;o=o.getParent()}return!1}var Co=class extends Re{decorate(t,e){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function Z(n){return n instanceof Co}var bn=class n extends It{constructor(){super(\"root\");C(this,\"__cachedText\");this.__cachedText=null}static getType(){return\"root\"}static clone(){return new n}getTopLevelElementOrThrow(){A(51)}getTextContent(){let e=this.__cachedText;return!Pn()&&te()._dirtyType!==0||e===null?super.getTextContent():e}remove(){A(52)}replace(e){A(53)}insertBefore(e){A(54)}insertAfter(e){A(55)}updateDOM(e,o){return!1}splice(e,o,r){for(let s of r)v(s)||Z(s)||A(282);return super.splice(e,o,r)}static importJSON(e){return ke().updateFromJSON(e)}collapseAtStart(){return!0}};function ge(n){return n instanceof bn}function hu(n){return new So(new Map(n._nodeMap))}function Ri(){return new So(new Map([[\"root\",new bn]]))}function pu(n){let t=n.exportJSON(),e=n.constructor;if(t.type!==e.getType()&&A(130,e.name),v(n)){let o=t.children;Array.isArray(o)||A(59,e.name);let r=n.getChildren();for(let s=0;s<r.length;s++){let i=pu(r[s]);o.push(i)}}return t}function Mp(n){return n instanceof So}var So=class n{constructor(t,e){C(this,\"_nodeMap\");C(this,\"_selection\");C(this,\"_flushSync\");C(this,\"_readOnly\");this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,e){return Xl(e&&e.editor||null,this,t)}clone(t){let e=new n(this._nodeMap,t===void 0?this._selection:t);return e._readOnly=!0,e}toJSON(){return Xl(null,this,()=>({root:pu(ke())}))}},_r=class extends It{static getType(){return\"artificial\"}createDOM(t){return document.createElement(\"div\")}},Rn=class n extends It{static getType(){return\"paragraph\"}static clone(t){return new n(t.__key)}createDOM(t){let e=document.createElement(\"p\"),o=On(t.theme,\"paragraph\");return o!==void 0&&e.classList.add(...o),e}updateDOM(t,e,o){return!1}static importDOM(){return{p:t=>({conversion:vp,priority:0})}}exportDOM(t){let{element:e}=super.exportDOM(t);if(Ce(e)){this.isEmpty()&&e.append(document.createElement(\"br\"));let o=this.getFormatType();o&&(e.style.textAlign=o)}return{element:e}}static importJSON(t){return Nt().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,e){let o=Nt();o.setTextFormat(t.format),o.setTextStyle(t.style);let r=this.getDirection();return o.setDirection(r),o.setFormat(this.getFormatType()),o.setStyle(this.getStyle()),this.insertAfter(o,e),o}collapseAtStart(){let t=this.getChildren();if(t.length===0||I(t[0])&&t[0].getTextContent().trim()===\"\"){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}};function vp(n){let t=Nt();return n.style&&(t.setFormat(n.style.textAlign),Pu(n,t)),{node:t}}function Nt(){return vo(new Rn)}function _u(n){return n instanceof Rn}var Dp=0,Ap=1,bp=2,Rp=3,kp=4;function mu(n,t,e,o){let r=n._keyToDOMMap;r.clear(),n._editorState=Ri(),n._pendingEditorState=o,n._compositionKey=null,n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;let s=n._observer;s!==null&&(s.disconnect(),n._observer=null),t!==null&&(t.textContent=\"\"),e!==null&&(e.textContent=\"\",r.set(\"root\",e))}function yu(n){let t=new Set,e=new Set,o=n;for(;o;){let{ownNodeConfig:r}=Do(o),s=o.transform;if(!e.has(s)){e.add(s);let i=o.transform();i&&t.add(i)}if(r){let i=r.$transform;i&&t.add(i),o=r.extends}else{let i=Object.getPrototypeOf(o);o=i.prototype instanceof Re&&i!==Re?i:void 0}}return t}function $p(n){let t=n||{},e=Tp(),o=t.theme||{},r=n===void 0?e:t.parentEditor||null,s=t.disableEvents||!1,i=Ri(),a=t.namespace||(r!==null?r._config.namespace:Ou()),l=t.editorState,c=[bn,Qt,vn,An,Rn,_r,...t.nodes||[]],{onError:u,html:d}=t,f=t.editable===void 0||t.editable,h;if(n===void 0&&e!==null)h=e._nodes;else{h=new Map;for(let p=0;p<c.length;p++){let _=c[p],x=null,y=null;if(typeof _!=\"function\"){let M=_;_=M.replace,x=M.with,y=M.withKlass||null}Do(_);let N=_.getType(),S=yu(_);h.set(N,{exportDOM:d&&d.export?d.export.get(_):void 0,klass:_,replace:x,replaceWithKlass:y,sharedNodeState:xc(c[p]),transforms:S})}}let g=new Ct(i,r,h,{disableEvents:s,namespace:a,theme:o},u||console.error,(function(p,_){let x=new Map,y=new Set,N=S=>{Object.keys(S).forEach(M=>{let E=x.get(M);E===void 0&&(E=[],x.set(M,E)),E.push(S[M])})};return p.forEach(S=>{let M=S.klass.importDOM;if(M==null||y.has(M))return;y.add(M);let E=M.call(S.klass);E!==null&&N(E)}),_&&N(_),x})(h,d?d.import:void 0),f,n);return l!==void 0&&(g._pendingEditorState=l,g._dirtyType=2),g}var Ct=class{constructor(t,e,o,r,s,i,a,l){C(this,\"_headless\");C(this,\"_parentEditor\");C(this,\"_rootElement\");C(this,\"_editorState\");C(this,\"_pendingEditorState\");C(this,\"_compositionKey\");C(this,\"_deferred\");C(this,\"_keyToDOMMap\");C(this,\"_updates\");C(this,\"_updating\");C(this,\"_listeners\");C(this,\"_commands\");C(this,\"_nodes\");C(this,\"_decorators\");C(this,\"_pendingDecorators\");C(this,\"_config\");C(this,\"_dirtyType\");C(this,\"_cloneNotNeeded\");C(this,\"_dirtyLeaves\");C(this,\"_dirtyElements\");C(this,\"_normalizedNodes\");C(this,\"_updateTags\");C(this,\"_observer\");C(this,\"_key\");C(this,\"_onError\");C(this,\"_htmlConversions\");C(this,\"_window\");C(this,\"_editable\");C(this,\"_blockCursorElement\");C(this,\"_createEditorArgs\");this._createEditorArgs=l,this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=o,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Ou(),this._onError=s,this._htmlConversions=i,this._editable=a,this._headless=e!==null&&e._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){let e=this._listeners.update;return e.add(t),()=>{e.delete(t)}}registerEditableListener(t){let e=this._listeners.editable;return e.add(t),()=>{e.delete(t)}}registerDecoratorListener(t){let e=this._listeners.decorator;return e.add(t),()=>{e.delete(t)}}registerTextContentListener(t){let e=this._listeners.textcontent;return e.add(t),()=>{e.delete(t)}}registerRootListener(t){let e=this._listeners.root;return t(this._rootElement,null),e.add(t),()=>{t(null,this._rootElement),e.delete(t)}}registerCommand(t,e,o){o===void 0&&A(35);let r=this._commands;r.has(t)||r.set(t,[new Set,new Set,new Set,new Set,new Set]);let s=r.get(t);s===void 0&&A(36,String(t));let i=s[o];return i.add(e),()=>{i.delete(e),s.every(a=>a.size===0)&&r.delete(t)}}registerMutationListener(t,e,o){let r=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,s=this._listeners.mutation,i=s.get(e);i===void 0&&(i=new Set,s.set(e,i)),i.add(r);let a=o&&o.skipInitialization;return a!==void 0&&a||this.initializeMutationListener(e,r),()=>{i.delete(r),i.size===0&&s.delete(e)}}getRegisteredNode(t){let e=this._nodes.get(t.getType());return e===void 0&&A(37,t.name),e}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,e){let o=this._editorState,r=hi(o).get(e.getType());if(!r)return;let s=new Map;for(let i of r.keys())s.set(i,\"created\");s.size>0&&t(s,{dirtyLeaves:new Set,prevEditorState:o,updateTags:new Set([\"registerMutationListener\"])})}registerNodeTransformToKlass(t,e){let o=this.getRegisteredNode(t);return o.transforms.add(e),o}registerNodeTransform(t,e){let o=this.registerNodeTransformToKlass(t,e),r=[o],s=o.replaceWithKlass;if(s!=null){let i=this.registerNodeTransformToKlass(s,e);r.push(i)}return(function(i,a){let l=hi(i.getEditorState()),c=[];for(let u of a){let d=l.get(u);d&&c.push(d)}c.length!==0&&i.update(()=>{for(let u of c)for(let d of u.keys()){let f=ae(d);f&&f.markDirty()}},i._pendingEditorState===null?{tag:tr}:void 0)})(this,r.map(i=>i.klass.getType())),()=>{r.forEach(i=>i.transforms.delete(e))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,e){return k(this,t,e)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){let e=this._rootElement;if(t!==e){let o=On(this._config.theme,\"root\"),r=this._pendingEditorState||this._editorState;if(this._rootElement=t,mu(this,e,t,r),e!==null&&(this._config.disableEvents||sp(e),o!=null&&e.classList.remove(...o)),t!==null){let s=Ui(t),i=t.style;i.userSelect=\"text\",i.whiteSpace=\"pre-wrap\",i.wordBreak=\"break-word\",t.setAttribute(\"data-lexical-editor\",\"true\"),this._window=s,this._dirtyType=2,yc(this),this._updateTags.add(tr),yt(this),this._config.disableEvents||(function(a,l){let c=a.ownerDocument;ri.set(a,c);let u=dr.get(c)??0;u<1&&c.addEventListener(\"selectionchange\",Zc),dr.set(c,u+1),a.__lexicalEditor=l;let d=qc(a);for(let f=0;f<oi.length;f++){let[h,g]=oi[f],p=typeof g==\"function\"?_=>{$l(_)||(kl(_),(l.isEditable()||h===\"click\")&&g(_,l))}:_=>{if($l(_))return;kl(_);let x=l.isEditable();switch(h){case\"cut\":return x&&k(l,Mi,_);case\"copy\":return k(l,Oi,_);case\"paste\":return x&&k(l,Si,_);case\"dragstart\":return x&&k(l,Kc,_);case\"dragover\":return x&&k(l,Bc,_);case\"dragend\":return x&&k(l,Wc,_);case\"focus\":return x&&k(l,zc,_);case\"blur\":return x&&k(l,Uc,_);case\"drop\":return x&&k(l,Fc,_)}};a.addEventListener(h,p),d.push(()=>{a.removeEventListener(h,p)})}})(t,this),o!=null&&t.classList.add(...o)}else this._window=null,this._updateTags.add(tr),yt(this);co(\"root\",this,!1,t,e)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,e){t.isEmpty()&&A(38);let o=t;o._readOnly&&(o=hu(t),o._selection=t._selection?t._selection.clone():null),mc(this);let r=this._pendingEditorState,s=this._updateTags,i=e!==void 0?e.tag:null;r===null||r.isEmpty()||(i!=null&&s.add(i),yt(this)),this._pendingEditorState=o,this._dirtyType=2,this._dirtyElements.set(\"root\",!1),this._compositionKey=null,i!=null&&s.add(i),this._updating||yt(this)}parseEditorState(t,e){return(function(o,r,s){let i=Ri(),a=de,l=Oe,c=fe,u=r._dirtyElements,d=r._dirtyLeaves,f=r._cloneNotNeeded,h=r._dirtyType;r._dirtyElements=new Map,r._dirtyLeaves=new Set,r._cloneNotNeeded=new Set,r._dirtyType=0,de=i,Oe=!1,fe=r,ki(null);try{let g=r._nodes;bi(o.root,g),s&&s(),i._readOnly=!0}catch(g){g instanceof Error&&r._onError(g)}finally{r._dirtyElements=u,r._dirtyLeaves=d,r._cloneNotNeeded=f,r._dirtyType=h,de=a,Oe=l,fe=c}return i})(typeof t==\"string\"?JSON.parse(t):t,this,e)}read(t){return yt(this),this.getEditorState().read(t,{editor:this})}update(t,e){(function(o,r,s){o._updating?o._updates.push([r,s]):Mr(o,r,s)})(this,t,e)}focus(t,e={}){let o=this._rootElement;o!==null&&(o.setAttribute(\"autocapitalize\",\"off\"),be(this,()=>{let r=Y(),s=ke();r!==null?r.dirty||Me(r.clone()):s.getChildrenSize()!==0&&(e.defaultSelection===\"rootStart\"?s.selectStart():s.selectEnd()),bu(\"focus\"),Ru(()=>{o.removeAttribute(\"autocapitalize\"),t&&t()})}),this._pendingEditorState===null&&o.removeAttribute(\"autocapitalize\"))}blur(){let t=this._rootElement;t!==null&&t.blur();let e=et(this._window);e!==null&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,co(\"editable\",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}};C(Ct,\"version\");Ct.version=\"0.38.2+prod.esm\";var di=null;function ki(n){di=n}var xu=1;function Ip(){xu=1}function $i(n,t){let e=Ii(n,t);return e===void 0&&A(30,t),e}function Ii(n,t){return n._nodes.get(t)}var Lp=typeof queueMicrotask==\"function\"?queueMicrotask:n=>{Promise.resolve().then(n)};function ec(n){return Z(Ar(n))}function Li(n){let t=document.activeElement;if(!Ce(t))return!1;let e=t.nodeName;return Z(Ar(n))&&(e===\"INPUT\"||e===\"TEXTAREA\"||t.contentEditable===\"true\"&&Oo(t)==null)}function To(n,t,e){let o=n.getRootElement();try{return o!==null&&o.contains(t)&&o.contains(e)&&t!==null&&!Li(t)&&wi(t)===n}catch{return!1}}function vr(n){return n instanceof Ct}function wi(n){let t=n;for(;t!=null;){let e=Oo(t);if(vr(e))return e;t=Mo(t)}return null}function Oo(n){return n?n.__lexicalEditor:null}function wp(n){return kh.test(n)?\"rtl\":$h.test(n)?\"ltr\":null}function Rt(n){return Di(n)||n.isToken()}function _t(n){return Rt(n)||n.isSegmented()}function tt(n){return Fn(n)&&n.nodeType===3}function Nu(n){return Fn(n)&&n.nodeType===9}function tn(n){let t=n;for(;t!=null;){if(tt(t))return t;t=t.firstChild}return null}function mr(n,t,e){let o=xe[t];if(e!==null&&(n&o)===(e&o))return n;let r=n^o;return t===\"subscript\"?r&=~xe.superscript:t===\"superscript\"?r&=~xe.subscript:t===\"lowercase\"?(r&=~xe.uppercase,r&=~xe.capitalize):t===\"uppercase\"?(r&=~xe.lowercase,r&=~xe.capitalize):t===\"capitalize\"&&(r&=~xe.lowercase,r&=~xe.uppercase),r}function Pp(n){return I(n)||Vt(n)||Z(n)}function Cu(n,t){let e=(function(){let i=di;return di=null,i})();if((t=t||e&&e.__key)!=null)return void(n.__key=t);ce(),du();let o=te(),r=Tt(),s=\"\"+xu++;r._nodeMap.set(s,n),v(n)?o._dirtyElements.set(s,!0):o._dirtyLeaves.add(s),o._cloneNotNeeded.add(s),o._dirtyType=1,n.__key=s}function kt(n){let t=n.getParent();if(t!==null){let e=n.getWritable(),o=t.getWritable(),r=n.getPreviousSibling(),s=n.getNextSibling(),i=s!==null?s.__key:null,a=r!==null?r.__key:null,l=r!==null?r.getWritable():null,c=s!==null?s.getWritable():null;r===null&&(o.__first=i),s===null&&(o.__last=a),l!==null&&(l.__next=i),c!==null&&(c.__prev=a),e.__prev=null,e.__next=null,e.__parent=null,o.__size--}}function yr(n){du(),fr(n)&&A(323,n.__key,n.__type);let t=n.getLatest(),e=t.__parent,o=Tt(),r=te(),s=o._nodeMap,i=r._dirtyElements;e!==null&&(function(l,c,u){let d=l;for(;d!==null;){if(u.has(d))return;let f=c.get(d);if(f===void 0)break;u.set(d,!1),d=f.__parent}})(e,s,i);let a=t.__key;r._dirtyType=1,v(n)?i.set(a,!0):r._dirtyLeaves.add(a)}function ue(n){ce();let t=te(),e=t._compositionKey;if(n!==e){if(t._compositionKey=n,e!==null){let o=ae(e);o!==null&&o.getWritable()}if(n!==null){let o=ae(n);o!==null&&o.getWritable()}}}function bt(){return Pn()?null:te()._compositionKey}function ae(n,t){let e=(t||Tt())._nodeMap.get(n);return e===void 0?null:e}function Pi(n,t){let e=Dr(n,te());return e!==void 0?ae(e,t):null}function Dr(n,t){return n[`__lexicalKey_${t._key}`]}function Ar(n,t){let e=n;for(;e!=null;){let o=Pi(e,t);if(o!==null)return o;e=Mo(e)}return null}function Su(n){let t=n._decorators,e=Object.assign({},t);return n._pendingDecorators=e,e}function tc(n){return n.read(()=>ke().getTextContent())}function ke(){return Eu(Tt())}function Eu(n){return n._nodeMap.get(\"root\")}function Me(n){ce();let t=Tt();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),t._selection=n}function Sn(n){let t=te(),e=(function(o,r){let s=o;for(;s!=null;){let i=Dr(s,r);if(i!==void 0)return i;s=Mo(s)}return null})(n,t);return e===null?n===t.getRootElement()?ae(\"root\"):null:ae(e)}function Tu(n){return/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g.test(n)}function Fi(n){let t=[],e=n;for(;e!==null;)t.push(e),e=e._parentEditor;return t}function Ou(){return Math.random().toString(36).replace(/[^a-z]+/g,\"\").substring(0,5)}function Mu(n){return tt(n)?n.nodeValue:null}function Ki(n,t,e){let o=et(Ie(t));if(o===null)return;let r=o.anchorNode,{anchorOffset:s,focusOffset:i}=o;if(r!==null){let a=Mu(r),l=Ar(r);if(a!==null&&I(l)){if(a===Cr&&e){let c=e.length;a=e,s=c,i=c}a!==null&&Bi(l,a,s,i,n)}}}function Bi(n,t,e,o,r){let s=n;if(s.isAttached()&&(r||!s.isDirty())){let i=s.isComposing(),a=t;(i||r)&&t[t.length-1]===Cr&&(a=t.slice(0,-1));let l=s.getTextContent();if(r||a!==l){if(a===\"\"){if(ue(null),ho||Mn||po)s.remove();else{let p=te();setTimeout(()=>{p.update(()=>{s.isAttached()&&s.remove()})},20)}return}let c=s.getParent(),u=rn(),d=s.getTextContentSize(),f=bt(),h=s.getKey();if(s.isToken()||f!==null&&h===f&&!i||w(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===n.__key&&u.anchor.offset===0&&!s.canInsertTextBefore()&&!i||u.focus.key===n.__key&&u.focus.offset===d&&!s.canInsertTextAfter()&&!i))return void s.markDirty();let g=Y();if(!w(g)||e===null||o===null)return void nc(s,a,g);if(g.setTextNodeRange(s,e,s,o),s.isSegmented()){let p=le(s.getTextContent());s.replace(p),s=p}nc(s,a,g)}}}function nc(n,t,e){if(n.setTextContent(t),w(e)){let o=n.getKey();for(let r of[\"anchor\",\"focus\"]){let s=e[r];s.type===\"text\"&&s.key===o&&(s.offset=Ue(n,s.offset,\"clamp\"))}}}function Zo(n,t,e){let o=t[e]||!1;return o===\"any\"||o===n[e]}function vu(n,t){return Zo(n,t,\"altKey\")&&Zo(n,t,\"ctrlKey\")&&Zo(n,t,\"shiftKey\")&&Zo(n,t,\"metaKey\")}function j(n,t,e){return vu(n,e)&&n.key.toLowerCase()===t.toLowerCase()}var pt={ctrlKey:!Ke,metaKey:Ke},oc={altKey:Ke,ctrlKey:!Ke};function rc(n){return n.key===\"Backspace\"}function sc(n){return j(n,\"a\",pt)}function Fp(n){let t=ke();if(w(n)){let e=n.anchor,o=n.focus,r=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(r.getKey(),0,\"element\"),o.set(r.getKey(),r.getChildrenSize(),\"element\"),sr(n),n}{let e=t.select(0,t.getChildrenSize());return Me(sr(e)),e}}function On(n,t){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});let e=n.__lexicalClassNameCache,o=e[t];if(o!==void 0)return o;let r=n[t];if(typeof r==\"string\"){let s=fc(r);return e[t]=s,s}return r}function Wi(n,t,e,o,r){if(e.size===0)return;let s=o.__type,i=o.__key,a=t.get(s);a===void 0&&A(33,s);let l=a.klass,c=n.get(l);c===void 0&&(c=new Map,n.set(l,c));let u=c.get(i),d=u===\"destroyed\"&&r===\"created\";(u===void 0||d)&&c.set(i,d?\"updated\":r)}function Kp(n){let t=n.getType(),e=Tt();if(e._readOnly){let s=hi(e).get(t);return s?Array.from(s.values()):[]}let o=e._nodeMap,r=[];for(let[,s]of o)s instanceof n&&s.__type===t&&s.isAttached()&&r.push(s);return r}function ic(n,t,e){let o=n.getParent(),r=e,s=n;return o!==null&&(t&&e===0?(r=s.getIndexWithinParent(),s=o):t||e!==s.getChildrenSize()||(r=s.getIndexWithinParent()+1,s=o)),s.getChildAtIndex(t?r-1:r)}function Du(n,t){let e=n.offset;if(n.type===\"element\")return ic(n.getNode(),t,e);{let o=n.getNode();if(t&&e===0||!t&&e===o.getTextContentSize()){let r=t?o.getPreviousSibling():o.getNextSibling();return r===null?ic(o.getParentOrThrow(),t,o.getIndexWithinParent()+(t?0:1)):r}}return null}function Au(n){let t=Ie(n).event,e=t&&t.inputType;return e===\"insertFromPaste\"||e===\"insertFromPasteAsQuotation\"}function k(n,t,e){return(function(o,r,s){let i=Fi(o);for(let a=4;a>=0;a--)for(let l=0;l<i.length;l++){let c=i[l],u=c._commands.get(r);if(u!==void 0){let d=u[a];if(d!==void 0){let f=Array.from(d),h=f.length,g=!1;if(be(c,()=>{for(let p=0;p<h;p++)if(f[p](s,o))return void(g=!0)}),g)return g}}}return!1})(n,t,e)}function br(n){return!ge(n)&&!n.isLastChild()&&!n.isInline()}function nn(n,t){let e=n._keyToDOMMap.get(t);return e===void 0&&A(75,t),e}function Mo(n){let t=n.assignedSlot||n.parentElement;return Lu(t)?t.host:t}function zi(n){return Nu(n)?n:Ce(n)?n.ownerDocument:null}function Bp(n){return te()._updateTags.has(n)}function bu(n){ce(),te()._updateTags.add(n)}function Ru(n){ce(),te()._deferred.push(n)}function xr(n,t){let e=n.getParent();for(;e!==null;){if(e.is(t))return!0;e=e.getParent()}return!1}function Ui(n){let t=zi(n);return t?t.defaultView:null}function Ie(n){let t=n._window;return t===null&&A(78),t}function Wp(n){return v(n)&&n.isInline()||Z(n)&&n.isInline()}function ku(n){let t=n.getParentOrThrow();for(;t!==null;){if(Ye(t))return t;t=t.getParentOrThrow()}return t}function Ye(n){return ge(n)||v(n)&&n.isShadowRoot()}function Hi(n){let t=n.constructor.clone(n);return Cu(t,null),t.afterCloneFrom(n),t}function vo(n){let t=te(),e=n.getType(),o=Ii(t,e);o===void 0&&A(200,n.constructor.name,e);let{replace:r,replaceWithKlass:s}=o;if(r!==null){let i=r(n),a=i.constructor;return s!==null?i instanceof s||A(201,s.name,s.getType(),a.name,a.getType(),n.constructor.name,e):i instanceof n.constructor&&a!==n.constructor||A(202,a.name,a.getType(),n.constructor.name,e),i.__key===n.__key&&A(203,n.constructor.name,e,a.name,a.getType()),i}return n}function Ws(n,t){!ge(n.getParent())||v(t)||Z(t)||A(99)}function $u(n){let t=ae(n);return t===null&&A(63,n),t}function zs(n){return(Z(n)||v(n)&&!n.canBeEmpty())&&!n.isInline()}function fi(n,t,e){e.style.removeProperty(\"caret-color\"),t._blockCursorElement=null;let o=n.parentElement;o!==null&&o.removeChild(n)}function et(n){return Ge?(n||window).getSelection():null}function Iu(n){let t=Ui(n);return t?t.getSelection():null}function zp(n,t){let e=n.getChildAtIndex(t);e==null&&(e=n),Ye(n)&&A(102);let o=i=>{let a=i.getParentOrThrow(),l=Ye(a),c=i!==e||l?Hi(i):i;if(l)return v(i)&&v(c)||A(133),i.insertAfter(c),[i,c,c];{let[u,d,f]=o(a),h=i.getNextSiblings();return f.append(c,...h),[u,d,c]}},[r,s]=o(e);return[r,s]}function Up(n){return Ce(n)&&n.tagName===\"A\"}function Ce(n){return Fn(n)&&n.nodeType===1}function Fn(n){return typeof n==\"object\"&&n!==null&&\"nodeType\"in n&&typeof n.nodeType==\"number\"}function Lu(n){return Fn(n)&&n.nodeType===11}function wu(n){let t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,\"i\");return n.nodeName.match(t)!==null}function gi(n){let t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,\"i\");return n.nodeName.match(t)!==null}function xt(n){if(Z(n)&&!n.isInline())return!0;if(!v(n)||Ye(n))return!1;let t=n.getFirstChild(),e=t===null||Vt(t)||I(t)||t.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&e}function Yi(){return te()}var ac=new WeakMap,Hp=new Map;function hi(n){if(!n._readOnly&&n.isEmpty())return Hp;n._readOnly||A(192);let t=ac.get(n);return t||(t=(function(e){let o=new Map;for(let[r,s]of e._nodeMap){let i=s.__type,a=o.get(i);a||(a=new Map,o.set(i,a)),a.set(r,s)}return o})(n),ac.set(n,t)),t}function Gi(n){let t=n.constructor.clone(n);return t.afterCloneFrom(n),t}function Yp(n){return(t=Gi(n))[Qc]=!0,t;var t}function Pu(n,t){let e=parseInt(n.style.paddingInlineStart,10)||0,o=Math.round(e/40);t.setIndent(o)}function Gp(n){n.__lexicalUnmanaged=!0}function Fu(n){return n.__lexicalUnmanaged===!0}function ro(n,t){return(function(e,o){return Object.prototype.hasOwnProperty.call(e,o)})(n,t)&&n[t]!==Re[t]}function Do(n){let t=Nl in n.prototype?n.prototype[Nl]():void 0,e=(function(i){if(!(i===Re||i.prototype instanceof Re)){let a=\"<unknown>\",l=\"<unknown>\";try{a=i.getType()}catch{}try{Ct.version&&(l=JSON.parse(Ct.version))}catch{}A(290,i.name,a,l)}return i===Co||i===It||i===Re})(n),o=!e&&ro(n,\"getType\")?n.getType():void 0,r,s=o;if(t)if(o)r=t[o];else for(let[i,a]of Object.entries(t))s=i,r=a;if(!e&&s&&(ro(n,\"getType\")||(n.getType=()=>s),ro(n,\"clone\")||(n.clone=i=>(ki(i),new n)),ro(n,\"importJSON\")||(n.importJSON=r&&r.$importJSON||(i=>new n().updateFromJSON(i))),!ro(n,\"importDOM\")&&r)){let{importDOM:i}=r;i&&(n.importDOM=()=>i)}return{ownNodeConfig:r,ownNodeType:s}}function Jp(n){let t=Yi();return ce(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(n))).klass}var uo=(n,t)=>{let e=n;for(;e!=null&&!ge(e);){if(t(e))return e;e=e.getParent()}return null},jp={next:\"previous\",previous:\"next\"},kn=class{constructor(t){C(this,\"origin\");this.origin=t}[Symbol.iterator](){return Vi({hasNext:on,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return he(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return he(this.origin,this.direction)}remove(){let t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,e){let o=this.getNodeAtCaret();return t.is(this.origin)||t.is(o)||(o===null?this.insert(t):o.replace(t,e)),this}splice(t,e,o=\"next\"){let r=o===this.direction?e:Array.from(e).reverse(),s=this,i=this.getParentAtCaret(),a=new Map;for(let l=s.getAdjacentCaret();l!==null&&a.size<t;l=l.getAdjacentCaret()){let c=l.origin.getWritable();a.set(c.getKey(),c)}for(let l of r){if(a.size>0){let c=s.getNodeAtCaret();if(c){if(a.delete(c.getKey()),a.delete(l.getKey()),!(c.is(l)||s.origin.is(l))){let u=l.getParent();u&&u.is(i)&&l.remove(),c.replace(l)}}else c===null&&A(263,Array.from(a).join(\" \"))}else s.insert(l);s=he(l,this.direction)}for(let l of a.values())l.remove();return this}},Eo=class n extends kn{constructor(){super(...arguments);C(this,\"type\",\"child\")}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:Et(e,this.direction)}getParentCaret(e=\"root\"){return he(Ji(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=Kt(this.direction);return he(this.getNodeAtCaret(),e)||Et(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof n&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}},Vp={root:ge,shadowRoot:Ye};function Kt(n){return jp[n]}function Ji(n,t=\"root\"){return Vp[t](n)?null:n}var $n=class n extends kn{constructor(){super(...arguments);C(this,\"type\",\"sibling\")}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:he(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return v(this.origin)?Et(this.origin,this.direction):null}getParentCaret(e=\"root\"){return he(Ji(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=Kt(this.direction);return he(this.getNodeAtCaret(),e)||Et(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof n&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof n||e instanceof In)&&this.direction===e.direction&&this.origin.is(e.origin)}},In=class n extends kn{constructor(e,o){super(e);C(this,\"type\",\"text\");C(this,\"offset\");this.offset=o}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:Lt(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(e=\"root\"){return he(Ji(this.getParentAtCaret(),e),this.direction)}getFlipped(){return Lt(this.origin,Kt(this.direction),this.offset)}isSamePointCaret(e){return e instanceof n&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof $n||e instanceof n)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return he(this.origin,this.direction)}};function St(n){return n instanceof In}function Xp(n){return n instanceof kn}function on(n){return n instanceof $n}function ze(n){return n instanceof Eo}var qp={next:class extends In{constructor(){super(...arguments);C(this,\"direction\",\"next\")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends In{constructor(){super(...arguments);C(this,\"direction\",\"previous\")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},Zp={next:class extends $n{constructor(){super(...arguments);C(this,\"direction\",\"next\")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends $n{constructor(){super(...arguments);C(this,\"direction\",\"previous\")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},Qp={next:class extends Eo{constructor(){super(...arguments);C(this,\"direction\",\"next\")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(t){return this.origin.splice(0,0,[t]),this}},previous:class extends Eo{constructor(){super(...arguments);C(this,\"direction\",\"previous\")}getNodeAtCaret(){return this.origin.getLastChild()}insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this}}};function he(n,t){return n?new Zp[t](n):null}function Lt(n,t,e){return n?new qp[t](n,Ue(n,e)):null}function Ue(n,t,e=\"error\"){let o=n.getTextContentSize(),r=t===\"next\"?o:t===\"previous\"?0:t;return(r<0||r>o)&&(e!==\"clamp\"&&uc(284,String(t),String(o),n.getKey()),r=r<0?0:o),r}function pi(n,t){return new Nr(n,t)}function Et(n,t){return v(n)?new Qp[t](n):null}function Ku(n){return n&&n.getChildCaret()||n}function Ln(n){return n&&Ku(n.getAdjacentCaret())}var _i=class n{constructor(t,e,o){C(this,\"type\",\"node-caret-range\");C(this,\"direction\");C(this,\"anchor\");C(this,\"focus\");this.anchor=t,this.focus=e,this.direction=o}getLatest(){let t=this.anchor.getLatest(),e=this.focus.getLatest();return t===this.anchor&&e===this.focus?this:new n(t,e,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let t=r=>{let s=this[r].getLatest();return St(s)?(function(i,a){let{direction:l,origin:c}=i,u=Ue(c,a===\"focus\"?Kt(l):l);return pi(i,u-i.offset)})(s,r):null},e=t(\"anchor\"),o=t(\"focus\");if(e&&o){let{caret:r}=e,{caret:s}=o;if(r.isSameNodeCaret(s))return[pi(r,s.offset-r.offset),null]}return[e,o]}iterNodeCarets(t=\"root\"){let e=St(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),o=this.focus.getLatest(),r=St(o),s=i=>i.isSameNodeCaret(o)?null:Ln(i)||i.getParentCaret(t);return Vi({hasNext:i=>i!==null&&!(r&&o.isSameNodeCaret(i)),initial:e.isSameNodeCaret(o)?null:s(e),map:i=>i,step:s})}[Symbol.iterator](){return this.iterNodeCarets(\"root\")}},Nr=class{constructor(t,e){C(this,\"type\",\"slice\");C(this,\"caret\");C(this,\"distance\");this.caret=t,this.distance=e}getSliceIndices(){let{distance:t,caret:{offset:e}}=this,o=e+t;return o<e?[o,e]:[e,o]}getTextContent(){let[t,e]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,e)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:t,direction:e}}=this,[o,r]=this.getSliceIndices(),s=t.getTextContent();return Lt(t.setTextContent(s.slice(0,o)+s.slice(r)),e,o)}};function e_(n){return n instanceof Nr}function ji(n){return wt(n,he(ke(),n.direction))}function Bu(n){return wt(n,n)}function wt(n,t){return n.direction!==t.direction&&A(265),new _i(n,t,n.direction)}function Vi(n){let{initial:t,hasNext:e,step:o,map:r}=n,s=t;return{[Symbol.iterator](){return this},next(){if(!e(s))return{done:!0,value:void 0};let i={done:!1,value:r(s)};return s=o(s),i}}}function Xi(n,t){let e=fo(n.origin,t.origin);switch(e===null&&A(275,n.origin.getKey(),t.origin.getKey()),e.type){case\"same\":{let o=n.type===\"text\",r=t.type===\"text\";return o&&r?(function(s,i){return Math.sign(s-i)})(n.offset,t.offset):n.type===t.type?0:o?-1:r?1:n.type===\"child\"?-1:1}case\"ancestor\":return n.type===\"child\"?-1:1;case\"descendant\":return t.type===\"child\"?1:-1;case\"branch\":return qi(e)}}function qi(n){let{a:t,b:e}=n,o=t.__key,r=e.__key,s=t,i=e;for(;s&&i;s=s.getNextSibling(),i=i.getNextSibling()){if(s.__key===r)return-1;if(i.__key===o)return 1}return s===null?1:-1}function Qo(n,t){return t.is(n)}function lc(n){return v(n)?[n.getLatest(),null]:[n.getParent(),n.getLatest()]}function fo(n,t){if(n.is(t))return{commonAncestor:n,type:\"same\"};let e=new Map;for(let[o,r]=lc(n);o;r=o,o=o.getParent())e.set(o,r);for(let[o,r]=lc(t);o;r=o,o=o.getParent()){let s=e.get(o);if(s!==void 0)return s===null?(Qo(n,o)||A(276),{commonAncestor:o,type:\"ancestor\"}):r===null?(Qo(t,o)||A(277),{commonAncestor:o,type:\"descendant\"}):((v(s)||Qo(n,s))&&(v(r)||Qo(t,r))&&o.is(s.getParent())&&o.is(r.getParent())||A(278),{a:s,b:r,commonAncestor:o,type:\"branch\"})}return null}function Pt(n,t){let{type:e,key:o,offset:r}=n,s=$u(n.key);return e===\"text\"?(I(s)||A(266,s.getType(),o),Lt(s,t,r)):(v(s)||A(267,s.getType(),o),Hu(s,n.offset,t))}function wn(n,t){let{origin:e,direction:o}=t,r=o===\"next\";St(t)?n.set(e.getKey(),t.offset,\"text\"):on(t)?I(e)?n.set(e.getKey(),Ue(e,o),\"text\"):n.set(e.getParentOrThrow().getKey(),e.getIndexWithinParent()+(r?1:0),\"element\"):(ze(t)&&v(e)||A(268),n.set(e.getKey(),r?0:e.getChildrenSize(),\"element\"))}function Wu(n){let t=Y(),e=w(t)?t:cu();return go(e,n),Me(e),e}function go(n,t){wn(n.anchor,t.anchor),wn(n.focus,t.focus)}function mi(n){let{anchor:t,focus:e}=n,o=Pt(t,\"next\"),r=Pt(e,\"next\"),s=Xi(o,r)<=0?\"next\":\"previous\";return wt(Ft(o,s),Ft(r,s))}function Kn(n){let{direction:t,origin:e}=n,o=he(e,Kt(t)).getNodeAtCaret();return o?he(o,t):Et(e.getParentOrThrow(),t)}function cc(n,t=\"root\"){let e=[n];for(let o=ze(n)?n.getParentCaret(t):n.getSiblingCaret();o!==null;o=o.getParentCaret(t))e.push(Kn(o));return e}function Us(n){return!!n&&n.origin.isAttached()}function zu(n,t=\"removeEmptySlices\"){if(n.isCollapsed())return n;let e=\"root\",o=\"next\",r=t,s=Zi(n,o),i=cc(s.anchor,e),a=cc(s.focus.getFlipped(),e),l=new Set,c=[];for(let g of s.iterNodeCarets(e))if(ze(g))l.add(g.origin.getKey());else if(on(g)){let{origin:p}=g;v(p)&&!l.has(p.getKey())||c.push(p)}for(let g of c)g.remove();for(let g of s.getTextSlices()){if(!g)continue;let{origin:p}=g.caret,_=p.getTextContentSize(),x=Kn(he(p,o)),y=p.getMode();if(Math.abs(g.distance)===_&&r===\"removeEmptySlices\"||y===\"token\"&&g.distance!==0)x.remove();else if(g.distance!==0){r=\"removeEmptySlices\";let N=g.removeTextSlice(),S=g.caret.origin;if(y===\"segmented\"){let M=N.origin,E=le(M.getTextContent()).setStyle(M.getStyle()).setFormat(M.getFormat());x.replaceOrInsert(E),N=Lt(E,o,N.offset)}S.is(i[0].origin)&&(i[0]=N),S.is(a[0].origin)&&(a[0]=N.getFlipped())}}let u,d;for(let g of i)if(Us(g)){u=Be(g);break}for(let g of a)if(Us(g)){d=Be(g);break}let f=(function(g,p,_){if(!g||!p)return null;let x=g.getParentAtCaret(),y=p.getParentAtCaret();if(!x||!y)return null;let N=x.getParents().reverse();N.push(x);let S=y.getParents().reverse();S.push(y);let M=Math.min(N.length,S.length),E;for(E=0;E<M&&N[E]===S[E];E++);let T=(b,P)=>{let q;for(let H=E;H<b.length;H++){let G=b[H];if(Ye(G))return;!q&&P(G)&&(q=G)}return q},D=T(N,xt),O=D&&T(S,b=>_.has(b.getKey())&&xt(b));return D&&O?[D,O]:null})(u,d,l);if(f){let[g,p]=f;Et(g,\"previous\").splice(0,p.getChildren()),p.remove()}let h=[u,d,...i,...a].find(Us);if(h)return Bu(Ft(Be(h),n.direction));A(269,JSON.stringify(i.map(g=>g.origin.__key)))}function Be(n){let t=(function(r){let s=r;for(;ze(s);){let i=Ln(s);if(!ze(i))break;s=i}return s})(n.getLatest()),{direction:e}=t;if(I(t.origin))return St(t)?t:Lt(t.origin,e,e);let o=t.getAdjacentCaret();return on(o)&&I(o.origin)?Lt(o.origin,e,Kt(e)):t}function Uu(n){return St(n)&&n.offset!==Ue(n.origin,n.direction)}function Ft(n,t){return n.direction===t?n:n.getFlipped()}function Zi(n,t){return n.direction===t?n:wt(Ft(n.focus,t),Ft(n.anchor,t))}function Hu(n,t,e){let o=Et(n,\"next\");for(let r=0;r<t;r++){let s=o.getAdjacentCaret();if(s===null)break;o=s}return Ft(o,e)}function t_(n,t=\"root\"){let e=0,o=n,r=Ln(o);for(;r===null;){if(e--,r=o.getParentCaret(t),!r)return null;o=r,r=Ln(o)}return r&&[r,e]}function n_(n){let{origin:t,offset:e,direction:o}=n;if(e===Ue(t,o))return n.getSiblingCaret();if(e===Ue(t,Kt(o)))return Kn(n.getSiblingCaret());let[r]=t.splitText(e);return I(r)||A(281),Ft(he(r,\"next\"),o)}function o_(n,t){return!0}function r_(n,{$copyElementNode:t=Hi,$splitTextPointCaretNext:e=n_,rootMode:o=\"shadowRoot\",$shouldSplit:r=o_}={}){if(St(n))return e(n);let s=n.getParentCaret(o);if(s){let{origin:i}=s;if(ze(n)&&(!i.canBeEmpty()||!r(i,\"first\")))return Kn(s);let a=(function(l){let c=[];for(let u=l.getAdjacentCaret();u;u=u.getAdjacentCaret())c.push(u.origin);return c})(n);(a.length>0||i.canBeEmpty()&&r(i,\"last\"))&&s.insert(t(i).splice(0,0,a))}return s}function s_(n){return n}function i_(...n){return n}function a_(n,t){return[n,t]}function l_(n){return n}function c_(n,t){if(!t||n===t)return n;for(let e in t)if(n[e]!==t[e])return{...n,...t};return n}var m=Qi,vy=m.$addUpdateTag,Ot=m.$applyNodeReplacement,Bn=m.$caretFromPoint,Yu=m.$caretRangeFromSelection,Rr=m.$cloneWithProperties,Gu=m.$cloneWithPropertiesEphemeral,Dy=m.$comparePointCaretNext,Ay=m.$copyNode,Ju=m.$create,ea=m.$createLineBreakNode,ju=m.$createNodeSelection,oe=m.$createParagraphNode,by=m.$createPoint,Wn=m.$createRangeSelection,Ry=m.$createRangeSelectionFromDom,kr=m.$createTabNode,Bt=m.$createTextNode,Vu=m.$extendCaretToRange,Wt=m.$findMatchingParent,ta=m.$getAdjacentChildCaret,na=m.$getAdjacentNode,sn=m.$getAdjacentSiblingOrParentSiblingCaret,oa=m.$getCaretInDirection,Xu=m.$getCaretRange,ky=m.$getCaretRangeInDirection,qu=m.$getCharacterOffsets,Je=m.$getChildCaret,$y=m.$getChildCaretAtIndex,ra=m.$getChildCaretOrSelf,Zu=m.$getCollapsedCaretRange,Iy=m.$getCommonAncestor,Ly=m.$getCommonAncestorResultBranchOrder,$r=m.$getEditor,nt=m.$getNearestNodeFromDOMNode,wy=m.$getNearestRootOrShadowRoot,zn=m.$getNodeByKey,Py=m.$getNodeByKeyOrThrow,Qu=m.$getNodeFromDOMNode,Ao=m.$getPreviousSelection,Se=m.$getRoot,$=m.$getSelection,Mt=m.$getSiblingCaret,ed=m.$getState,Fy=m.$getStateChange,Ky=m.$getTextContent,By=m.$getTextNodeOffset,Wy=m.$getTextPointCaret,zy=m.$getTextPointCaretSlice,Uy=m.$getWritableNodeState,td=m.$hasAncestor,Hy=m.$hasUpdateTag,Ir=m.$insertNodes,Un=m.$isBlockElementNode,bo=m.$isChildCaret,an=m.$isDecoratorNode,nd=m.$isEditorState,L=m.$isElementNode,od=m.$isExtendableTextPointCaret,Yy=m.$isInlineElementOrDecoratorNode,Ro=m.$isLeafNode,sa=m.$isLineBreakNode,Gy=m.$isNodeCaret,_e=m.$isNodeSelection,rd=m.$isParagraphNode,R=m.$isRangeSelection,ln=m.$isRootNode,Le=m.$isRootOrShadowRoot,sd=m.$isSiblingCaret,Jy=m.$isTabNode,z=m.$isTextNode,Lr=m.$isTextPointCaret,jy=m.$isTextPointCaretSlice,ia=m.$isTokenOrSegmented,Vy=m.$isTokenOrTab,Xy=m.$nodesOfType,ko=m.$normalizeCaret,cn=m.$normalizeSelection__EXPERIMENTAL,qy=m.$onUpdate,id=m.$parseSerializedNode,Zy=m.$removeTextFromCaretRange,ad=m.$rewindSiblingCaret,wr=m.$selectAll,Qy=m.$setCompositionKey,aa=m.$setPointFromCaret,je=m.$setSelection,ld=m.$setSelectionFromCaretRange,cd=m.$setState,ud=m.$splitAtPointCaretNext,dd=m.$splitNode,ex=m.$updateRangeSelectionFromCaretRange,la=m.ArtificialNode__DO_NOT_USE,tx=m.BLUR_COMMAND,un=m.CAN_REDO_COMMAND,dn=m.CAN_UNDO_COMMAND,Pr=m.CLEAR_EDITOR_COMMAND,fd=m.CLEAR_HISTORY_COMMAND,Fr=m.CLICK_COMMAND,nx=m.COLLABORATION_TAG,Kr=m.COMMAND_PRIORITY_CRITICAL,B=m.COMMAND_PRIORITY_EDITOR,ox=m.COMMAND_PRIORITY_HIGH,pe=m.COMMAND_PRIORITY_LOW,gd=m.COMMAND_PRIORITY_NORMAL,hd=m.CONTROLLED_TEXT_INSERTION_COMMAND,Br=m.COPY_COMMAND,pd=m.CUT_COMMAND,Wr=m.DELETE_CHARACTER_COMMAND,_d=m.DELETE_LINE_COMMAND,md=m.DELETE_WORD_COMMAND,rx=m.DRAGEND_COMMAND,yd=m.DRAGOVER_COMMAND,xd=m.DRAGSTART_COMMAND,Nd=m.DROP_COMMAND,zr=m.DecoratorNode,ot=m.ElementNode,sx=m.FOCUS_COMMAND,Ur=m.FORMAT_ELEMENT_COMMAND,Hr=m.FORMAT_TEXT_COMMAND,Yr=m.HISTORIC_TAG,Gr=m.HISTORY_MERGE_TAG,Cd=m.HISTORY_PUSH_TAG,$o=m.INDENT_CONTENT_COMMAND,ca=m.INSERT_LINE_BREAK_COMMAND,Io=m.INSERT_PARAGRAPH_COMMAND,Jr=m.INSERT_TAB_COMMAND,Lo=m.INTERNAL_$isBlock,ix=m.IS_ALL_FORMATTING,ax=m.IS_BOLD,lx=m.IS_CODE,cx=m.IS_HIGHLIGHT,ux=m.IS_ITALIC,dx=m.IS_STRIKETHROUGH,fx=m.IS_SUBSCRIPT,gx=m.IS_SUPERSCRIPT,hx=m.IS_UNDERLINE,jr=m.KEY_ARROW_DOWN_COMMAND,Vr=m.KEY_ARROW_LEFT_COMMAND,Sd=m.KEY_ARROW_RIGHT_COMMAND,Xr=m.KEY_ARROW_UP_COMMAND,Ed=m.KEY_BACKSPACE_COMMAND,Td=m.KEY_DELETE_COMMAND,px=m.KEY_DOWN_COMMAND,qr=m.KEY_ENTER_COMMAND,Zr=m.KEY_ESCAPE_COMMAND,_x=m.KEY_MODIFIER_COMMAND,Qr=m.KEY_SPACE_COMMAND,es=m.KEY_TAB_COMMAND,Od=m.LineBreakNode,mx=m.MOVE_TO_END,yx=m.MOVE_TO_START,xx=m.NODE_STATE_KEY,wo=m.OUTDENT_CONTENT_COMMAND,ts=m.PASTE_COMMAND,Md=m.PASTE_TAG,vd=m.ParagraphNode,ns=m.REDO_COMMAND,Dd=m.REMOVE_TEXT_COMMAND,Ad=m.RootNode,Nx=m.SELECTION_CHANGE_COMMAND,bd=m.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,Rd=m.SELECT_ALL_COMMAND,Cx=m.SKIP_COLLAB_TAG,Sx=m.SKIP_DOM_SELECTION_TAG,Ex=m.SKIP_SCROLL_INTO_VIEW_TAG,Tx=m.SKIP_SELECTION_FOCUS_TAG,Ox=m.TEXT_TYPE_TO_FORMAT,kd=m.TabNode,Hn=m.TextNode,os=m.UNDO_COMMAND,ua=m.buildImportMap,rs=m.configExtension,ve=m.createCommand,ss=m.createEditor,Mx=m.createSharedNodeState,vx=m.createState,$d=m.declarePeerDependency,ne=m.defineExtension,Dx=m.flipDirection,Ax=m.getDOMOwnerDocument,da=m.getDOMSelection,bx=m.getDOMSelectionFromTarget,Id=m.getDOMTextNode,Rx=m.getEditorPropertyFromDOMNode,is=m.getNearestEditorFromDOMNode,Ld=m.getRegisteredNode,kx=m.getRegisteredNodeOrThrow,$x=m.getStaticNodeConfig,Ix=m.getTextDirection,Lx=m.getTransformSetFromKlass,wd=m.isBlockDomNode,wx=m.isCurrentlyReadOnlyMode,Pd=m.isDOMDocumentNode,Yn=m.isDOMNode,Px=m.isDOMTextNode,Fx=m.isDOMUnmanaged,fa=m.isDocumentFragment,Kx=m.isExactShortcutMatch,Fd=m.isHTMLAnchorElement,as=m.isHTMLElement,Po=m.isInlineDomNode,Bx=m.isLexicalEditor,Wx=m.isModifierMatch,Kd=m.isSelectionCapturedInDecoratorInput,Bd=m.isSelectionWithinEditor,ga=m.makeStepwiseIterator,zx=m.removeFromParent,Ux=m.resetRandomKey,Ee=m.safeCast,Hx=m.setDOMUnmanaged,ha=m.setNodeIndentFromDOM,zt=m.shallowMergeConfig;var Ca={};Fe(Ca,{$addNodeStyle:()=>p_,$cloneWithProperties:()=>Rr,$copyBlockFormatIndent:()=>Vd,$ensureForwardRangeSelection:()=>jd,$forEachSelectedTextNode:()=>Jd,$getComputedStyleForElement:()=>ya,$getComputedStyleForParent:()=>xa,$getSelectionStyleValueForProperty:()=>E_,$isAtNodeEnd:()=>h_,$isParentElementRTL:()=>Na,$isParentRTL:()=>f_,$moveCaretSelection:()=>Zd,$moveCharacter:()=>C_,$patchStyleText:()=>__,$selectAll:()=>wr,$setBlocksType:()=>m_,$shouldOverrideDefaultCharacterSelection:()=>N_,$sliceSelectedTextNodeContent:()=>g_,$trimTextContentFromAnchor:()=>Gd,$wrapNodes:()=>x_,createDOMRange:()=>u_,createRectsFromDOMRange:()=>d_,getCSSFromStyleObject:()=>Yd,getStyleObjectFromCSS:()=>cs,trimTextContentFromAnchor:()=>T_});function ma(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",n);for(let r of t)o.append(\"v\",r);throw e.search=o.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var ls=new Map;function Wd(n){let t=n;for(;t!=null;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function zd(n){let t=n.parentNode;if(t==null)throw new Error(\"Should never happen\");return[t,Array.from(t.childNodes).indexOf(n)]}function u_(n,t,e,o,r){let s=t.getKey(),i=o.getKey(),a=document.createRange(),l=n.getElementByKey(s),c=n.getElementByKey(i),u=e,d=r;if(z(t)&&(l=Wd(l)),z(o)&&(c=Wd(c)),t===void 0||o===void 0||l===null||c===null)return null;l.nodeName===\"BR\"&&([l,u]=zd(l)),c.nodeName===\"BR\"&&([c,d]=zd(c));let f=l.firstChild;l===c&&f!=null&&f.nodeName===\"BR\"&&u===0&&d===0&&(d=1);try{a.setStart(l,u),a.setEnd(c,d)}catch{return null}return!a.collapsed||u===d&&s===i||(a.setStart(c,d),a.setEnd(l,u)),a}function d_(n,t){let e=n.getRootElement();if(e===null)return[];let o=e.getBoundingClientRect(),r=getComputedStyle(e),s=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i=Array.from(t.getClientRects()),a,l=i.length;i.sort((c,u)=>{let d=c.top-u.top;return Math.abs(d)<=3?c.left-u.left:d});for(let c=0;c<l;c++){let u=i[c],d=a&&a.top<=u.top&&a.top+a.height>u.top&&a.left+a.width>u.left,f=u.width+s===o.width;d||f?(i.splice(c--,1),l--):a=u}return i}function Hd(n){let t={};if(!n)return t;let e=n.split(\";\");for(let o of e)if(o!==\"\"){let[r,s]=o.split(/:([^]+)/);r&&s&&(t[r.trim()]=s.trim())}return t}function cs(n){let t=ls.get(n);return t===void 0&&(t=Hd(n),ls.set(n,t)),t}function Yd(n){let t=\"\";for(let e in n)e&&(t+=`${e}: ${n[e]};`);return t}function ya(n){let t=$r().getElementByKey(n.getKey());if(t===null)return null;let e=t.ownerDocument.defaultView;return e===null?null:e.getComputedStyle(t)}function xa(n){return ya(ln(n)?n:n.getParentOrThrow())}function f_(n){let t=xa(n);return t!==null&&t.direction===\"rtl\"}function g_(n,t,e=\"self\"){let o=n.getStartEndPoints();if(t.isSelected(n)&&!ia(t)&&o!==null){let[r,s]=o,i=n.isBackward(),a=r.getNode(),l=s.getNode(),c=t.is(a),u=t.is(l);if(c||u){let[d,f]=qu(n),h=a.is(l),g=t.is(i?l:a),p=t.is(i?a:l),_,x=0;h?(x=d>f?f:d,_=d>f?d:f):g?(x=i?f:d,_=void 0):p&&(x=0,_=i?d:f);let y=t.__text.slice(x,_);y!==t.__text&&(e===\"clone\"&&(t=Gu(t)),t.__text=y)}}return t}function h_(n){if(n.type===\"text\")return n.offset===n.getNode().getTextContentSize();let t=n.getNode();return L(t)||ma(177),n.offset===t.getChildrenSize()}function Gd(n,t,e){let o=t.getNode(),r=e;if(L(o)){let s=o.getDescendantByIndex(t.offset);s!==null&&(o=s)}for(;r>0&&o!==null;){if(L(o)){let c=o.getLastDescendant();c!==null&&(o=c)}let s=o.getPreviousSibling(),i=0;if(s===null){let c=o.getParentOrThrow(),u=c.getPreviousSibling();for(;u===null;){if(c=c.getParent(),c===null){s=null;break}u=c.getPreviousSibling()}c!==null&&(i=c.isInline()?0:2,s=u)}let a=o.getTextContent();a===\"\"&&L(o)&&!o.isInline()&&(a=`\n\n`);let l=a.length;if(!z(o)||r>=l){let c=o.getParent();o.remove(),c==null||c.getChildrenSize()!==0||ln(c)||c.remove(),r-=l+i,o=s}else{let c=o.getKey(),u=n.getEditorState().read(()=>{let h=zn(c);return z(h)&&h.isSimpleText()?h.getTextContent():null}),d=l-r,f=a.slice(0,d);if(u!==null&&u!==a){let h=Ao(),g=o;if(o.isSimpleText())o.setTextContent(u);else{let p=Bt(u);o.replace(p),g=p}if(R(h)&&h.isCollapsed()){let p=h.anchor.offset;g.select(p,p)}}else if(o.isSimpleText()){let h=t.key===c,g=t.offset;g<r&&(g=l);let p=h?g-r:0,_=h?g:d;if(h&&p===0){let[x]=o.splitText(p,_);x.remove()}else{let[,x]=o.splitText(p,_);x.remove()}}else{let h=Bt(f);o.replace(h)}r=0}}}function p_(n){let t=n.getStyle(),e=Hd(t);ls.set(t,e)}function pa(n,t){(R(n)?n.isCollapsed():z(n)||L(n))||ma(280);let e=cs(R(n)?n.style:z(n)?n.getStyle():n.getTextStyle()),o=Object.entries(t).reduce((s,[i,a])=>(typeof a==\"function\"?s[i]=a(e[i],n):a===null?delete s[i]:s[i]=a,s),{...e}),r=Yd(o);R(n)||z(n)?n.setStyle(r):n.setTextStyle(r),ls.set(r,o)}function __(n,t){if(R(n)&&n.isCollapsed()){pa(n,t);let e=n.anchor.getNode();L(e)&&e.isEmpty()&&pa(e,t)}Jd(e=>{pa(e,t)})}function Jd(n){let t=$();if(!t)return;let e=new Map,o=s=>e.get(s.getKey())||[0,s.getTextContentSize()];if(R(t))for(let s of Yu(t).getTextSlices())s&&e.set(s.caret.origin.getKey(),s.getSliceIndices());let r=t.getNodes();for(let s of r){if(!z(s)||!s.canHaveFormat())continue;let[i,a]=o(s);a!==i&&(ia(s)||i===0&&a===s.getTextContentSize()?n(s):n(s.splitText(i,a)[i===0?0:1]))}R(t)&&t.anchor.type===\"text\"&&t.focus.type===\"text\"&&t.anchor.key===t.focus.key&&jd(t)}function jd(n){if(n.isBackward()){let{anchor:t,focus:e}=n,{key:o,offset:r,type:s}=t;t.set(e.key,e.offset,e.type),e.set(o,r,s)}}function Vd(n,t){let e=n.getFormatType(),o=n.getIndent();e!==t.getFormatType()&&t.setFormat(e),o!==t.getIndent()&&t.setIndent(o)}function m_(n,t,e=Vd){if(n===null)return;let o=n.getStartEndPoints(),r=new Map,s=null;if(o){let[i,a]=o;s=Wn(),s.anchor.set(i.key,i.offset,i.type),s.focus.set(a.key,a.offset,a.type);let l=Wt(i.getNode(),Lo),c=Wt(a.getNode(),Lo);L(l)&&r.set(l.getKey(),l),L(c)&&r.set(c.getKey(),c)}for(let i of n.getNodes())if(L(i)&&Lo(i))r.set(i.getKey(),i);else if(o===null){let a=Wt(i,Lo);L(a)&&r.set(a.getKey(),a)}for(let[i,a]of r){let l=t();e(a,l),a.replace(l,!0),s&&(i===s.anchor.key&&s.anchor.set(l.getKey(),s.anchor.offset,s.anchor.type),i===s.focus.key&&s.focus.set(l.getKey(),s.focus.offset,s.focus.type))}s&&n.is($())&&je(s)}function Ud(n){return n.getNode().isAttached()}function y_(n){let t=n;for(;t!==null&&!Le(t);){let e=t.getLatest(),o=t.getParent();e.getChildrenSize()===0&&t.remove(!0),t=o}}function x_(n,t,e=null){let o=n.getStartEndPoints(),r=o?o[0]:null,s=n.getNodes(),i=s.length;if(r!==null&&(i===0||i===1&&r.type===\"element\"&&r.getNode().getChildrenSize()===0)){let c=r.type===\"text\"?r.getNode().getParentOrThrow():r.getNode(),u=c.getChildren(),d=t();return d.setFormat(c.getFormatType()),d.setIndent(c.getIndent()),u.forEach(f=>d.append(f)),e&&(d=e.append(d)),void c.replace(d)}let a=null,l=[];for(let c=0;c<i;c++){let u=s[c];Le(u)?(_a(n,l,l.length,t,e),l=[],a=u):a===null||a!==null&&td(u,a)?l.push(u):(_a(n,l,l.length,t,e),l=[u])}_a(n,l,l.length,t,e)}function _a(n,t,e,o,r=null){if(t.length===0)return;let s=t[0],i=new Map,a=[],l=L(s)?s:s.getParentOrThrow();l.isInline()&&(l=l.getParentOrThrow());let c=!1;for(;l!==null;){let g=l.getPreviousSibling();if(g!==null){l=g,c=!0;break}if(l=l.getParentOrThrow(),Le(l))break}let u=new Set;for(let g=0;g<e;g++){let p=t[g];L(p)&&p.getChildrenSize()===0&&u.add(p.getKey())}let d=new Set;for(let g=0;g<e;g++){let p=t[g],_=p.getParent();if(_!==null&&_.isInline()&&(_=_.getParent()),_!==null&&Ro(p)&&!d.has(p.getKey())){let x=_.getKey();if(i.get(x)===void 0){let y=o();y.setFormat(_.getFormatType()),y.setIndent(_.getIndent()),a.push(y),i.set(x,y),_.getChildren().forEach(N=>{y.append(N),d.add(N.getKey()),L(N)&&N.getChildrenKeys().forEach(S=>d.add(S))}),y_(_)}}else if(u.has(p.getKey())){L(p)||ma(179);let x=o();x.setFormat(p.getFormatType()),x.setIndent(p.getIndent()),a.push(x),p.remove(!0)}}if(r!==null)for(let g=0;g<a.length;g++){let p=a[g];r.append(p)}let f=null;if(Le(l))if(c)if(r!==null)l.insertAfter(r);else for(let g=a.length-1;g>=0;g--){let p=a[g];l.insertAfter(p)}else{let g=l.getFirstChild();if(L(g)&&(l=g),g===null)if(r)l.append(r);else for(let p=0;p<a.length;p++){let _=a[p];l.append(_),f=_}else if(r!==null)g.insertBefore(r);else for(let p=0;p<a.length;p++){let _=a[p];g.insertBefore(_),f=_}}else if(r)l.insertAfter(r);else for(let g=a.length-1;g>=0;g--){let p=a[g];l.insertAfter(p),f=p}let h=Ao();R(h)&&Ud(h.anchor)&&Ud(h.focus)?je(h.clone()):f!==null?f.selectEnd():n.dirty=!0}function Xd(n){let t=qd(n);return t!==null&&t.writingMode===\"vertical-rl\"}function qd(n){let t=n.anchor.getNode();return L(t)?ya(t):xa(t)}function N_(n,t){let e=Xd(n)?!t:t;Na(n)&&(e=!e);let o=Bn(n.focus,e?\"previous\":\"next\");if(od(o))return!1;for(let r of Vu(o)){if(bo(r))return!r.origin.isInline();if(!L(r.origin)){if(an(r.origin))return!0;break}}return!1}function Zd(n,t,e,o){n.modify(t?\"extend\":\"move\",e,o)}function Na(n){let t=qd(n);return t!==null&&t.direction===\"rtl\"}function C_(n,t,e){let o=Na(n),r;r=Xd(n)||o?!e:e,Zd(n,t,r,\"character\")}function S_(n,t,e){let o=cs(n.getStyle());return o!==null&&o[t]||e}function E_(n,t,e=\"\"){let o=null,r=n.getNodes(),s=n.anchor,i=n.focus,a=n.isBackward(),l=a?i.offset:s.offset,c=a?i.getNode():s.getNode();if(R(n)&&n.isCollapsed()&&n.style!==\"\"){let u=cs(n.style);if(u!==null&&t in u)return u[t]}for(let u=0;u<r.length;u++){let d=r[u];if((u===0||l!==0||!d.is(c))&&z(d)){let f=S_(d,t,e);if(o===null)o=f;else if(o!==f){o=\"\";break}}}return o===null?e:o}var T_=Gd;var Q=Ca,Qd=Q.$addNodeStyle,jx=Q.$cloneWithProperties,Vx=Q.$copyBlockFormatIndent,Xx=Q.$ensureForwardRangeSelection,qx=Q.$forEachSelectedTextNode,Zx=Q.$getComputedStyleForElement,Qx=Q.$getComputedStyleForParent,Sa=Q.$getSelectionStyleValueForProperty,eN=Q.$isAtNodeEnd,tN=Q.$isParentElementRTL,Ea=Q.$isParentRTL,nN=Q.$moveCaretSelection,Ta=Q.$moveCharacter,ef=Q.$patchStyleText,oN=Q.$selectAll,Oa=Q.$setBlocksType,Ma=Q.$shouldOverrideDefaultCharacterSelection,us=Q.$sliceSelectedTextNodeContent,rN=Q.$trimTextContentFromAnchor,sN=Q.$wrapNodes,iN=Q.createDOMRange,tf=Q.createRectsFromDOMRange,aN=Q.getCSSFromStyleObject,va=Q.getStyleObjectFromCSS,lN=Q.trimTextContentFromAnchor;var Ra={};Fe(Ra,{$descendantsMatching:()=>lm,$dfs:()=>Y_,$dfsIterator:()=>gf,$filter:()=>om,$findMatchingParent:()=>Wt,$firstToLastIterator:()=>cm,$getAdjacentCaret:()=>G_,$getAdjacentSiblingOrParentSiblingCaret:()=>sn,$getDepth:()=>pf,$getNearestBlockElementAncestorOrThrow:()=>q_,$getNearestNodeOfType:()=>X_,$getNextRightPreorderNode:()=>V_,$getNextSiblingOrParentSibling:()=>j_,$insertFirst:()=>rm,$insertNodeToNearestRoot:()=>em,$insertNodeToNearestRootAtCaret:()=>mf,$isEditorIsNestedEditor:()=>im,$lastToFirstIterator:()=>ba,$restoreEditorState:()=>Q_,$reverseDfs:()=>J_,$reverseDfsIterator:()=>_f,$splitNode:()=>dd,$unwrapAndFilterDescendants:()=>am,$unwrapNode:()=>um,$wrapNodeInElement:()=>tm,CAN_USE_BEFORE_INPUT:()=>I_,CAN_USE_DOM:()=>uf,IS_ANDROID:()=>L_,IS_ANDROID_CHROME:()=>w_,IS_APPLE:()=>P_,IS_APPLE_WEBKIT:()=>F_,IS_CHROME:()=>K_,IS_FIREFOX:()=>df,IS_IOS:()=>B_,IS_SAFARI:()=>W_,addClassNamesToElement:()=>z_,calculateZoomLevel:()=>sm,isBlockDomNode:()=>wd,isHTMLAnchorElement:()=>Fd,isHTMLElement:()=>as,isInlineDomNode:()=>Po,isMimeType:()=>ff,makeStateWrapper:()=>dm,markSelection:()=>cf,mediaFileReader:()=>H_,mergeRegister:()=>af,objectKlassEquals:()=>nm,positionNodeOnRange:()=>lf,registerNestedElementResolver:()=>Z_,removeClassNamesFromElement:()=>U_,selectionAlwaysOnDisplay:()=>$_});function ds(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",n);for(let r of t)o.append(\"v\",r);throw e.search=o.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var Ve=typeof window<\"u\"&&window.document!==void 0&&window.document.createElement!==void 0,O_=Ve&&\"documentMode\"in document?document.documentMode:null,of=Ve&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),M_=Ve&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),v_=!(!Ve||!(\"InputEvent\"in window)||O_)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),D_=Ve&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),A_=Ve&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,rf=Ve&&/Android/.test(navigator.userAgent),Aa=Ve&&/^(?=.*Chrome).*/i.test(navigator.userAgent),b_=Ve&&rf&&Aa,R_=Ve&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&of&&!Aa;function sf(...n){let t=[];for(let e of n)if(e&&typeof e==\"string\")for(let[o]of e.matchAll(/\\S+/g))t.push(o);return t}function af(...n){return()=>{for(let t=n.length-1;t>=0;t--)n[t]();n.length=0}}function rt(n){return`${n}px`}var k_={attributes:!0,characterData:!0,childList:!0,subtree:!0};function lf(n,t,e){let o=null,r=null,s=null,i=[],a=document.createElement(\"div\");function l(){o===null&&ds(182),r===null&&ds(183);let{left:d,top:f}=r.getBoundingClientRect(),h=tf(n,t);var g,p;a.isConnected||(p=a,(g=r).insertBefore(p,g.firstChild));let _=!1;for(let x=0;x<h.length;x++){let y=h[x],N=i[x]||document.createElement(\"div\"),S=N.style;S.position!==\"absolute\"&&(S.position=\"absolute\",_=!0);let M=rt(y.left-d);S.left!==M&&(S.left=M,_=!0);let E=rt(y.top-f);S.top!==E&&(N.style.top=E,_=!0);let T=rt(y.width);S.width!==T&&(N.style.width=T,_=!0);let D=rt(y.height);S.height!==D&&(N.style.height=D,_=!0),N.parentNode!==a&&(a.append(N),_=!0),i[x]=N}for(;i.length>h.length;)i.pop();_&&e(i)}function c(){r=null,o=null,s!==null&&s.disconnect(),s=null,a.remove();for(let d of i)d.remove();i=[]}a.style.position=\"relative\";let u=n.registerRootListener(function d(){let f=n.getRootElement();if(f===null)return c();let h=f.parentElement;if(!as(h))return c();c(),o=f,r=h,s=new MutationObserver(g=>{let p=n.getRootElement(),_=p&&p.parentElement;if(p!==o||_!==r)return d();for(let x of g)if(!a.contains(x.target))return l()}),s.observe(h,k_),l()});return()=>{u(),c()}}function nf(n,t,e){if(n.type!==\"text\"&&L(t)){let o=t.getDOMSlot(e);return[o.element,o.getFirstChildOffset()+n.offset]}return[Id(e)||e,n.offset]}function cf(n,t){let e=null,o=null,r=null,s=null,i=null,a=null,l=()=>{};function c(u){u.read(()=>{let d=$();if(!R(d))return e=null,r=null,s=null,a=null,l(),void(l=()=>{});let[f,h]=(function(D){let O=D.getStartEndPoints();return D.isBackward()?[O[1],O[0]]:O})(d),g=f.getNode(),p=g.getKey(),_=f.offset,x=h.getNode(),y=x.getKey(),N=h.offset,S=n.getElementByKey(p),M=n.getElementByKey(y),E=e===null||S!==o||_!==r||p!==e.getKey(),T=s===null||M!==i||N!==a||y!==s.getKey();if((E||T)&&S!==null&&M!==null){let D=(function(O,b,P,q,H,G,ee){let se=(O._window?O._window.document:document).createRange();return se.setStart(...nf(b,P,q)),se.setEnd(...nf(H,G,ee)),se})(n,f,g,S,h,x,M);l(),l=lf(n,D,O=>{if(t===void 0)for(let b of O){let P=b.style;P.background!==\"Highlight\"&&(P.background=\"Highlight\"),P.color!==\"HighlightText\"&&(P.color=\"HighlightText\"),P.marginTop!==rt(-1.5)&&(P.marginTop=rt(-1.5)),P.paddingTop!==rt(4)&&(P.paddingTop=rt(4)),P.paddingBottom!==rt(0)&&(P.paddingBottom=rt(0))}else t(O)})}e=g,o=S,r=_,s=x,i=M,a=N})}return c(n.getEditorState()),af(n.registerUpdateListener(({editorState:u})=>c(u)),()=>{l()})}function $_(n){let t=null,e=()=>{let o=getSelection(),r=o&&o.anchorNode,s=n.getRootElement();r!==null&&s!==null&&s.contains(r)?t!==null&&(t(),t=null):t===null&&(t=cf(n))};return document.addEventListener(\"selectionchange\",e),()=>{t!==null&&t(),document.removeEventListener(\"selectionchange\",e)}}var I_=v_,uf=Ve,L_=rf,w_=b_,P_=of,F_=R_,K_=Aa,df=M_,B_=A_,W_=D_;function z_(n,...t){let e=sf(...t);e.length>0&&n.classList.add(...e)}function U_(n,...t){let e=sf(...t);e.length>0&&n.classList.remove(...e)}function ff(n,t){for(let e of t)if(n.type.startsWith(e))return!0;return!1}function H_(n,t){let e=n[Symbol.iterator]();return new Promise((o,r)=>{let s=[],i=()=>{let{done:a,value:l}=e.next();if(a)return o(s);let c=new FileReader;c.addEventListener(\"error\",r),c.addEventListener(\"load\",()=>{let u=c.result;typeof u==\"string\"&&s.push({file:l,result:u}),i()}),ff(l,t)?c.readAsDataURL(l):i()};i()})}function Y_(n,t){return Array.from(gf(n,t))}function G_(n){return n?n.getAdjacentCaret():null}function J_(n,t){return Array.from(_f(n,t))}function gf(n,t){return hf(\"next\",n,t)}function hf(n,t,e){let o=Se(),r=t||o,s=L(r)?Je(r,n):Mt(r,n),i=pf(r),a=e?ta(ra(Mt(e,n))):(function(c,u){let d=sn(Mt(c,u));return d&&d[0]})(r,n),l=i;return ga({hasNext:c=>c!==null,initial:s,map:c=>({depth:l,node:c.origin}),step:c=>{if(c.isSameNodeCaret(a))return null;bo(c)&&l++;let u=sn(c);return!u||u[0].isSameNodeCaret(a)?null:(l+=u[1],u[0])}})}function j_(n){let t=sn(Mt(n,\"next\"));return t&&[t[0].origin,t[1]]}function pf(n){let t=-1;for(let e=n;e!==null;e=e.getParent())t++;return t}function V_(n){let t=ra(Mt(n,\"previous\")),e=sn(t,\"root\");return e&&e[0].origin}function _f(n,t){return hf(\"previous\",n,t)}function X_(n,t){let e=n;for(;e!=null;){if(e instanceof t)return e;e=e.getParent()}return null}function q_(n){let t=Wt(n,e=>L(e)&&!e.isInline());return L(t)||ds(4,n.__key),t}function Z_(n,t,e,o){let r=s=>s instanceof t;return n.registerNodeTransform(t,s=>{let i=(a=>{let l=a.getChildren();for(let d=0;d<l.length;d++){let f=l[d];if(r(f))return null}let c=a,u=a;for(;c!==null;)if(u=c,c=c.getParent(),r(c))return{child:u,parent:c};return null})(s);if(i!==null){let{child:a,parent:l}=i;if(a.is(s)){o(l,s);let c=a.getNextSiblings(),u=c.length;if(l.insertAfter(a),u!==0){let d=e(l);a.insertAfter(d);for(let f=0;f<u;f++)d.append(c[f])}l.canBeEmpty()||l.getChildrenSize()!==0||l.remove()}}})}function Q_(n,t){let e=new Map,o=n._pendingEditorState;for(let[s,i]of t._nodeMap)e.set(s,Rr(i));o&&(o._nodeMap=e),n._dirtyType=2;let r=t._selection;je(r===null?null:r.clone())}function em(n){let t=$()||Ao(),e;if(R(t))e=Bn(t.focus,\"next\");else{if(t!=null){let i=t.getNodes(),a=i[i.length-1];a&&(e=Mt(a,\"next\"))}e=e||Je(Se(),\"previous\").getFlipped().insert(oe())}let o=mf(n,e),r=ta(o),s=bo(r)?ko(r):o;return ld(Zu(s)),n.getLatest()}function mf(n,t,e){let o=oa(t,\"next\");for(let r=o;r;r=ud(r,e))o=r;return Lr(o)&&ds(283),o.insert(n.isInline()?oe().append(n):n),oa(Mt(n.getLatest(),\"next\"),t.direction)}function tm(n,t){let e=t();return n.replace(e),e.append(n),e}function nm(n,t){return n!==null&&Object.getPrototypeOf(n).constructor.name===t.name}function om(n,t){let e=[];for(let o=0;o<n.length;o++){let r=t(n[o]);r!==null&&e.push(r)}return e}function rm(n,t){Je(n,\"next\").insert(t)}var Da=!(df||!uf)&&void 0;function sm(n){let t=1;if((function(){if(Da===void 0){let e=document.createElement(\"div\");e.style.cssText=\"position: absolute; opacity: 0; width: 100px; left: -1000px;\",document.body.appendChild(e);let o=e.getBoundingClientRect();e.style.setProperty(\"zoom\",\"2\"),Da=e.getBoundingClientRect().width===o.width,document.body.removeChild(e)}return Da})())for(;n;)t*=Number(window.getComputedStyle(n).getPropertyValue(\"zoom\")),n=n.parentElement;return t}function im(n){return n._parentEditor!==null}function am(n,t){return yf(n,t,null)}function yf(n,t,e){let o=!1;for(let r of ba(n))t(r)?e!==null&&e(r):(o=!0,L(r)&&yf(r,t,e||(s=>r.insertAfter(s))),r.remove());return o}function lm(n,t){let e=[],o=Array.from(n).reverse();for(let r=o.pop();r!==void 0;r=o.pop())if(t(r))e.push(r);else if(L(r))for(let s of ba(r))o.push(s);return e}function cm(n){return xf(Je(n,\"next\"))}function ba(n){return xf(Je(n,\"previous\"))}function xf(n){return ga({hasNext:sd,initial:n.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function um(n){ad(Mt(n,\"next\")).splice(1,n.getChildren())}function dm(n){let t=o=>ed(o,n),e=(o,r)=>cd(o,n,r);return{$get:t,$set:e,accessors:[t,e],makeGetterMethod:()=>function(){return t(this)},makeSetterMethod:()=>function(o){return e(this,o)},stateConfig:n}}var F=Ra,gN=F.$descendantsMatching,hN=F.$dfs,pN=F.$dfsIterator,Nf=F.$filter,we=F.$findMatchingParent,_N=F.$firstToLastIterator,mN=F.$getAdjacentCaret,yN=F.$getAdjacentSiblingOrParentSiblingCaret,xN=F.$getDepth,Fo=F.$getNearestBlockElementAncestorOrThrow,Cf=F.$getNearestNodeOfType,NN=F.$getNextRightPreorderNode,CN=F.$getNextSiblingOrParentSibling,SN=F.$insertFirst,EN=F.$insertNodeToNearestRoot,TN=F.$insertNodeToNearestRootAtCaret,ON=F.$isEditorIsNestedEditor,MN=F.$lastToFirstIterator,vN=F.$restoreEditorState,DN=F.$reverseDfs,AN=F.$reverseDfsIterator,bN=F.$splitNode,RN=F.$unwrapAndFilterDescendants,kN=F.$unwrapNode,$N=F.$wrapNodeInElement,IN=F.CAN_USE_BEFORE_INPUT,LN=F.CAN_USE_DOM,wN=F.IS_ANDROID,PN=F.IS_ANDROID_CHROME,FN=F.IS_APPLE,KN=F.IS_APPLE_WEBKIT,BN=F.IS_CHROME,WN=F.IS_FIREFOX,zN=F.IS_IOS,UN=F.IS_SAFARI,Xe=F.addClassNamesToElement,Sf=F.calculateZoomLevel,ka=F.isBlockDomNode,fs=F.isHTMLAnchorElement,Pe=F.isHTMLElement,HN=F.isInlineDomNode,YN=F.isMimeType,GN=F.makeStateWrapper,JN=F.markSelection,jN=F.mediaFileReader,me=F.mergeRegister,qe=F.objectKlassEquals,VN=F.positionNodeOnRange,XN=F.registerNestedElementResolver,Ko=F.removeClassNamesFromElement,qN=F.selectionAlwaysOnDisplay;var Ga={};Fe(Ga,{$createHorizontalRuleNode:()=>Ya,$isHorizontalRuleNode:()=>Wf,AutoFocusExtension:()=>hm,ClearEditorExtension:()=>pm,EditorStateExtension:()=>_s,HorizontalRuleExtension:()=>vm,HorizontalRuleNode:()=>gn,INSERT_HORIZONTAL_RULE_COMMAND:()=>Om,InitialStateExtension:()=>Kf,LexicalBuilder:()=>Vn,NodeSelectionExtension:()=>Wa,TabIndentationExtension:()=>Dm,batch:()=>Df,buildEditorFromExtensions:()=>Nm,computed:()=>Rf,configExtension:()=>rs,declarePeerDependency:()=>$d,defineExtension:()=>ne,effect:()=>Ht,getExtensionDependencyFromEditor:()=>Sm,getKnownTypesAndNodes:()=>_m,getPeerDependencyFromEditor:()=>Bf,getPeerDependencyFromEditorOrThrow:()=>Em,namedSignals:()=>ys,registerClearEditor:()=>If,registerTabIndentation:()=>zf,safeCast:()=>Ee,shallowMergeConfig:()=>zt,signal:()=>jn,untracked:()=>Pa,watchedSignal:()=>Ua});var fm=Symbol.for(\"preact-signals\");function ms(){if(Ut>1)return void Ut--;let n,t=!1;for(;Wo!==void 0;){let e=Wo;for(Wo=void 0,Fa++;e!==void 0;){let o=e.o;if(e.o=void 0,e.f&=-3,!(8&e.f)&&Af(e))try{e.c()}catch(r){t||(n=r,t=!0)}e=o}}if(Fa=0,Ut--,t)throw n}function Df(n){if(Ut>0)return n();Ut++;try{return n()}finally{ms()}}var V,Wo;function Pa(n){let t=V;V=void 0;try{return n()}finally{V=t}}var Ut=0,Fa=0,ps=0;function Ef(n){if(V===void 0)return;let t=n.n;return t===void 0||t.t!==V?(t={i:0,S:n,p:V.s,n:void 0,t:V,e:void 0,x:void 0,r:t},V.s!==void 0&&(V.s.n=t),V.s=t,n.n=t,32&V.f&&n.S(t),t):t.i===-1?(t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=V.s,t.n=void 0,V.s.n=t,V.s=t),t):void 0}function Te(n,t){this.v=n,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function jn(n,t){return new Te(n,t)}function Af(n){for(let t=n.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Tf(n){for(let t=n.s;t!==void 0;t=t.n){let e=t.S.n;if(e!==void 0&&(t.r=e),t.S.n=t,t.i=-1,t.n===void 0){n.s=t;break}}}function bf(n){let t,e=n.s;for(;e!==void 0;){let o=e.p;e.i===-1?(e.S.U(e),o!==void 0&&(o.n=e.n),e.n!==void 0&&(e.n.p=o)):t=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=o}n.s=t}function fn(n,t){Te.call(this,void 0),this.x=n,this.s=void 0,this.g=ps-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function Rf(n,t){return new fn(n,t)}function kf(n){let t=n.u;if(n.u=void 0,typeof t==\"function\"){Ut++;let e=V;V=void 0;try{t()}catch(o){throw n.f&=-2,n.f|=8,za(n),o}finally{V=e,ms()}}}function za(n){for(let t=n.s;t!==void 0;t=t.n)t.S.U(t);n.x=void 0,n.s=void 0,kf(n)}function gm(n){if(V!==this)throw new Error(\"Out-of-order effect\");bf(this),V=n,this.f&=-2,8&this.f&&za(this),ms()}function Jn(n,t){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}function Ht(n,t){let e=new Jn(n,t);try{e.c()}catch(r){throw e.d(),r}let o=e.d.bind(e);return o[Symbol.dispose]=o,o}function ys(n,t={}){let e={};for(let o in n){let r=t[o],s=jn(r===void 0?n[o]:r);e[o]=s}return e}Te.prototype.brand=fm,Te.prototype.h=function(){return!0},Te.prototype.S=function(n){let t=this.t;t!==n&&n.e===void 0&&(n.x=t,this.t=n,t!==void 0?t.e=n:Pa(()=>{var e;(e=this.W)==null||e.call(this)}))},Te.prototype.U=function(n){if(this.t!==void 0){let t=n.e,e=n.x;t!==void 0&&(t.x=e,n.e=void 0),e!==void 0&&(e.e=t,n.x=void 0),n===this.t&&(this.t=e,e===void 0&&Pa(()=>{var o;(o=this.Z)==null||o.call(this)}))}},Te.prototype.subscribe=function(n){return Ht(()=>{let t=this.value,e=V;V=void 0;try{n(t)}finally{V=e}},{name:\"sub\"})},Te.prototype.valueOf=function(){return this.value},Te.prototype.toString=function(){return this.value+\"\"},Te.prototype.toJSON=function(){return this.value},Te.prototype.peek=function(){let n=V;V=void 0;try{return this.value}finally{V=n}},Object.defineProperty(Te.prototype,\"value\",{get(){let n=Ef(this);return n!==void 0&&(n.i=this.i),this.v},set(n){if(n!==this.v){if(Fa>100)throw new Error(\"Cycle detected\");this.v=n,this.i++,ps++,Ut++;try{for(let t=this.t;t!==void 0;t=t.x)t.t.N()}finally{ms()}}}}),fn.prototype=new Te,fn.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===ps))return!0;if(this.g=ps,this.f|=1,this.i>0&&!Af(this))return this.f&=-2,!0;let n=V;try{Tf(this),V=this;let t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return V=n,bf(this),this.f&=-2,!0},fn.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(let t=this.s;t!==void 0;t=t.n)t.S.S(t)}Te.prototype.S.call(this,n)},fn.prototype.U=function(n){if(this.t!==void 0&&(Te.prototype.U.call(this,n),this.t===void 0)){this.f&=-33;for(let t=this.s;t!==void 0;t=t.n)t.S.U(t)}},fn.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let n=this.t;n!==void 0;n=n.x)n.t.N()}},Object.defineProperty(fn.prototype,\"value\",{get(){if(1&this.f)throw new Error(\"Cycle detected\");let n=Ef(this);if(this.h(),n!==void 0&&(n.i=this.i),16&this.f)throw this.v;return this.v}}),Jn.prototype.c=function(){let n=this.S();try{if(8&this.f||this.x===void 0)return;let t=this.x();typeof t==\"function\"&&(this.u=t)}finally{n()}},Jn.prototype.S=function(){if(1&this.f)throw new Error(\"Cycle detected\");this.f|=1,this.f&=-9,kf(this),Tf(this),Ut++;let n=V;return V=this,gm.bind(this,n)},Jn.prototype.N=function(){2&this.f||(this.f|=2,this.o=Wo,Wo=this)},Jn.prototype.d=function(){this.f|=8,1&this.f||za(this)},Jn.prototype.dispose=function(){this.d()};var hm=ne({build:(n,t,e)=>ys(t),config:Ee({defaultSelection:\"rootEnd\",disabled:!1}),name:\"@lexical/extension/AutoFocus\",register(n,t,e){let o=e.getOutput();return Ht(()=>o.disabled.value?void 0:n.registerRootListener(r=>{n.focus(()=>{let s=document.activeElement;r===null||s!==null&&r.contains(s)||r.focus({preventScroll:!0})},{defaultSelection:o.defaultSelection.peek()})}))}});function $f(){let n=Se(),t=$(),e=oe();n.clear(),n.append(e),t!==null&&e.select(),R(t)&&(t.format=0)}function If(n,t=$f){return n.registerCommand(Pr,e=>(n.update(t),!0),B)}var pm=ne({build:(n,t,e)=>ys(t),config:Ee({$onClear:$f}),name:\"@lexical/extension/ClearEditor\",register(n,t,e){let{$onClear:o}=e.getOutput();return Ht(()=>If(n,o.value))}});function _m(n){let t=new Set,e=new Set;for(let o of Lf(n)){let r=typeof o==\"function\"?o:o.replace;t.add(r.getType()),e.add(r)}return{nodes:e,types:t}}function Lf(n){return(typeof n.nodes==\"function\"?n.nodes():n.nodes)||[]}function Ua(n,t){let e;return jn(n(),{unwatched(){e&&(e(),e=void 0)},watched(){this.value=n(),e=t(this)}})}var _s=ne({build:n=>Ua(()=>n.getEditorState(),t=>n.registerUpdateListener(e=>{t.value=e.editorState})),name:\"@lexical/extension/EditorState\"});function X(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",n);for(let r of t)o.append(\"v\",r);throw e.search=o.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function wf(n,t){if(n&&t&&!Array.isArray(t)&&typeof n==\"object\"&&typeof t==\"object\"){let e=n,o=t;for(let r in o)e[r]=wf(e[r],o[r]);return n}return t}var Ha=0,Ka=1,Pf=2,$a=3,gs=4,Gn=5,Ia=6,Bo=7;function La(n){return n.id===Ha}function Ff(n){return n.id===Pf}function mm(n){return(function(t){return t.id===Ka})(n)||X(305,String(n.id),String(Ka)),Object.assign(n,{id:Pf})}var ym=new Set,Ba=class{constructor(t,e){C(this,\"builder\");C(this,\"configs\");C(this,\"_dependency\");C(this,\"_peerNameSet\");C(this,\"extension\");C(this,\"state\");C(this,\"_signal\");this.builder=t,this.extension=e,this.configs=new Set,this.state={id:Ha}}mergeConfigs(){let t=this.extension.config||{},e=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):zt;for(let o of this.configs)t=e(t,o);return t}init(t){let e=this.state;Ff(e)||X(306,String(e.id));let o={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},r={...o,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},s=(function(a,l,c){return Object.assign(a,{config:l,id:$a,registerState:c})})(e,this.mergeConfigs(),o),i;this.state=s,this.extension.init&&(i=this.extension.init(t,s.config,o)),this.state=(function(a,l,c){return Object.assign(a,{id:gs,initResult:l,registerState:c})})(s,i,r)}build(t){let e=this.state,o;e.id!==gs&&X(307,String(e.id),String(Gn)),this.extension.build&&(o=this.extension.build(t,e.config,e.registerState));let r={...e.registerState,getOutput:()=>o,getSignal:this.getSignal.bind(this)};this.state=(function(s,i,a){return Object.assign(s,{id:Gn,output:i,registerState:a})})(e,o,r)}register(t,e){this._signal=e;let o=this.state;o.id!==Gn&&X(308,String(o.id),String(Gn));let r=this.extension.register&&this.extension.register(t,o.config,o.registerState);return this.state=(function(s){return Object.assign(s,{id:Ia})})(o),()=>{let s=this.state;s.id!==Bo&&X(309,String(o.id),String(Bo)),this.state=(function(i){return Object.assign(i,{id:Gn})})(s),r&&r()}}afterRegistration(t){let e=this.state,o;return e.id!==Ia&&X(310,String(e.id),String(Ia)),this.extension.afterRegistration&&(o=this.extension.afterRegistration(t,e.config,e.registerState)),this.state=(function(r){return Object.assign(r,{id:Bo})})(e),o}getSignal(){return this._signal===void 0&&X(311),this._signal}getInitResult(){this.extension.init===void 0&&X(312,this.extension.name);let t=this.state;return(function(e){return e.id>=gs})(t)||X(313,String(t.id),String(gs)),t.initResult}getInitPeer(t){let e=this.builder.extensionNameMap.get(t);return e?e.getExtensionInitDependency():void 0}getExtensionInitDependency(){let t=this.state;return(function(e){return e.id>=$a})(t)||X(314,String(t.id),String($a)),{config:t.config}}getPeer(t){let e=this.builder.extensionNameMap.get(t);return e?e.getExtensionDependency():void 0}getInitDependency(t){let e=this.builder.getExtensionRep(t);return e===void 0&&X(315,this.extension.name,t.name),e.getExtensionInitDependency()}getDependency(t){let e=this.builder.getExtensionRep(t);return e===void 0&&X(315,this.extension.name,t.name),e.getExtensionDependency()}getState(){let t=this.state;return(function(e){return e.id>=Bo})(t)||X(316,String(t.id),String(Bo)),t}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||ym}getPeerNameSet(){let t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(([e])=>e)),this._peerNameSet=t),t}getExtensionDependency(){if(!this._dependency){let t=this.state;(function(e){return e.id>=Gn})(t)||X(317,this.extension.name),this._dependency={config:t.config,init:t.initResult,output:t.output}}return this._dependency}},Of={tag:Gr};function xm(){let n=Se();n.isEmpty()&&n.append(oe())}var Kf=ne({config:Ee({setOptions:Of,updateOptions:Of}),init:({$initialEditorState:n=xm})=>({$initialEditorState:n,initialized:!1}),afterRegistration(n,{updateOptions:t,setOptions:e},o){let r=o.getInitResult();if(!r.initialized){r.initialized=!0;let{$initialEditorState:s}=r;if(nd(s))n.setEditorState(s,e);else if(typeof s==\"function\")n.update(()=>{s(n)},t);else if(s&&(typeof s==\"string\"||typeof s==\"object\")){let i=n.parseEditorState(s);n.setEditorState(i,e)}}return()=>{}},name:\"@lexical/extension/InitialState\",nodes:[Ad,Hn,Od,kd,vd]}),Mf=Symbol.for(\"@lexical/extension/LexicalBuilder\");function Nm(...n){return Vn.fromExtensions(n).buildEditor()}function vf(){}function Cm(n){throw n}function hs(n){return Array.isArray(n)?n:[n]}var wa=\"0.38.2+prod.esm\",Vn=class n{constructor(t){C(this,\"roots\");C(this,\"extensionNameMap\");C(this,\"outgoingConfigEdges\");C(this,\"incomingEdges\");C(this,\"conflicts\");C(this,\"_sortedExtensionReps\");C(this,\"PACKAGE_VERSION\");this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=wa,this.roots=t;for(let e of t)this.addExtension(e)}static fromExtensions(t){let e=[hs(Kf)];for(let o of t)e.push(hs(o));return new n(e)}static maybeFromEditor(t){let e=t[Mf];return e&&(e.PACKAGE_VERSION!==wa&&X(292,e.PACKAGE_VERSION,wa),e instanceof n||X(293)),e}static fromEditor(t){let e=n.maybeFromEditor(t);return e===void 0&&X(294),e}constructEditor(){let{$initialEditorState:t,onError:e,...o}=this.buildCreateEditorArgs(),r=Object.assign(ss({...o,...e?{onError:s=>{e(s,r)}}:{}}),{[Mf]:this});for(let s of this.sortedExtensionReps())s.build(r);return r}buildEditor(){let t=vf;function e(){try{t()}finally{t=vf}}let o=Object.assign(this.constructEditor(),{dispose:e,[Symbol.dispose]:e});return t=me(this.registerEditor(o),()=>o.setRootElement(null)),o}hasExtensionByName(t){return this.extensionNameMap.has(t)}getExtensionRep(t){let e=this.extensionNameMap.get(t.name);if(e)return e.extension!==t&&X(295,t.name),e}addEdge(t,e,o){let r=this.outgoingConfigEdges.get(t);r?r.set(e,o):this.outgoingConfigEdges.set(t,new Map([[e,o]]));let s=this.incomingEdges.get(e);s?s.add(t):this.incomingEdges.set(e,new Set([t]))}addExtension(t){this._sortedExtensionReps!==void 0&&X(296);let e=hs(t),[o]=e;typeof o.name!=\"string\"&&X(297,typeof o.name);let r=this.extensionNameMap.get(o.name);if(r!==void 0&&r.extension!==o&&X(298,o.name),!r){r=new Ba(this,o),this.extensionNameMap.set(o.name,r);let s=this.conflicts.get(o.name);typeof s==\"string\"&&X(299,o.name,s);for(let i of o.conflictsWith||[])this.extensionNameMap.has(i)&&X(299,o.name,i),this.conflicts.set(i,o.name);for(let i of o.dependencies||[]){let a=hs(i);this.addEdge(o.name,a[0].name,a.slice(1)),this.addExtension(a)}for(let[i,a]of o.peerDependencies||[])this.addEdge(o.name,i,a?[a]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let t=[],e=(o,r)=>{let s=o.state;if(Ff(s))return;let i=o.extension.name;var a;La(s)||X(300,i,r||\"[unknown]\"),La(a=s)||X(304,String(a.id),String(Ha)),s=Object.assign(a,{id:Ka}),o.state=s;let l=this.outgoingConfigEdges.get(i);if(l)for(let c of l.keys()){let u=this.extensionNameMap.get(c);u&&e(u,i)}s=mm(s),o.state=s,t.push(o)};for(let o of this.extensionNameMap.values())La(o.state)&&e(o);for(let o of t)for(let[r,s]of this.outgoingConfigEdges.get(o.extension.name)||[])if(s.length>0){let i=this.extensionNameMap.get(r);if(i)for(let a of s)i.configs.add(a)}for(let[o,...r]of this.roots)if(r.length>0){let s=this.extensionNameMap.get(o.name);s===void 0&&X(301,o.name);for(let i of r)s.configs.add(i)}return this._sortedExtensionReps=t,this._sortedExtensionReps}registerEditor(t){let e=this.sortedExtensionReps(),o=new AbortController,r=[()=>o.abort()],s=o.signal;for(let i of e){let a=i.register(t,s);a&&r.push(a)}for(let i of e){let a=i.afterRegistration(t);a&&r.push(a)}return me(...r)}buildCreateEditorArgs(){let t={},e=new Set,o=new Map,r=new Map,s={},i={},a=this.sortedExtensionReps();for(let u of a){let{extension:d}=u;if(d.onError!==void 0&&(t.onError=d.onError),d.disableEvents!==void 0&&(t.disableEvents=d.disableEvents),d.parentEditor!==void 0&&(t.parentEditor=d.parentEditor),d.editable!==void 0&&(t.editable=d.editable),d.namespace!==void 0&&(t.namespace=d.namespace),d.$initialEditorState!==void 0&&(t.$initialEditorState=d.$initialEditorState),d.nodes)for(let f of Lf(d)){if(typeof f!=\"function\"){let h=o.get(f.replace);h&&X(302,d.name,f.replace.name,h.extension.name),o.set(f.replace,u)}e.add(f)}if(d.html){if(d.html.export)for(let[f,h]of d.html.export.entries())r.set(f,h);d.html.import&&Object.assign(s,d.html.import)}d.theme&&wf(i,d.theme)}Object.keys(i).length>0&&(t.theme=i),e.size&&(t.nodes=[...e]);let l=Object.keys(s).length>0,c=r.size>0;(l||c)&&(t.html={},l&&(t.html.import=s),c&&(t.html.export=r));for(let u of a)u.init(t);return t.onError||(t.onError=Cm),t}};function Sm(n,t){let e=Vn.fromEditor(n).getExtensionRep(t);return e===void 0&&X(303,t.name),e.getExtensionDependency()}function Bf(n,t){let e=Vn.fromEditor(n).extensionNameMap.get(t);return e?e.getExtensionDependency():void 0}function Em(n,t){let e=Bf(n,t);return e===void 0&&X(291,t),e}var Tm=new Set,Wa=ne({build(n,t,e){let o=e.getDependency(_s).output,r=jn({watchedNodeKeys:new Map}),s=Ua(()=>{},()=>Ht(()=>{let i=s.peek(),{watchedNodeKeys:a}=r.value,l,c=!1;o.value.read(()=>{if($())for(let[u,d]of a.entries()){if(d.size===0){a.delete(u);continue}let f=zn(u),h=f&&f.isSelected()||!1;c=c||h!==(!!i&&i.has(u)),h&&(l=l||new Set,l.add(u))}}),!c&&l&&i&&l.size===i.size||(s.value=l)}));return{watchNodeKey:function(i){let a=Rf(()=>(s.value||Tm).has(i)),{watchedNodeKeys:l}=r.peek(),c=l.get(i),u=c!==void 0;return c=c||new Set,c.add(a),u||(l.set(i,c),r.value={watchedNodeKeys:l}),a}}},dependencies:[_s],name:\"@lexical/extension/NodeSelection\"}),Om=ve(\"INSERT_HORIZONTAL_RULE_COMMAND\"),gn=class n extends zr{static getType(){return\"horizontalrule\"}static clone(t){return new n(t.__key)}static importJSON(t){return Ya().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:Mm,priority:0})}}exportDOM(){return{element:document.createElement(\"hr\")}}createDOM(t){let e=document.createElement(\"hr\");return Xe(e,t.theme.hr),e}getTextContent(){return`\n`}isInline(){return!1}updateDOM(){return!1}};function Mm(){return{node:Ya()}}function Ya(){return Ju(gn)}function Wf(n){return n instanceof gn}var vm=ne({dependencies:[_s,Wa],name:\"@lexical/extension/HorizontalRule\",nodes:[gn],register(n,t,e){let{watchNodeKey:o}=e.getDependency(Wa).output,r=jn({nodeSelections:new Map}),s=n._config.theme.hrSelected??\"selected\";return me(n.registerCommand(Fr,i=>{if(Yn(i.target)){let a=Qu(i.target);if(Wf(a))return(function(l,c=!1){let u=$(),d=l.isSelected(),f=l.getKey(),h;c&&_e(u)?h=u:(h=ju(),je(h)),d?h.delete(f):h.add(f)})(a,i.shiftKey),!0}return!1},pe),n.registerMutationListener(gn,(i,a)=>{Df(()=>{let l=!1,{nodeSelections:c}=r.peek();for(let[u,d]of i.entries())if(d===\"destroyed\")c.delete(u),l=!0;else{let f=c.get(u),h=n.getElementByKey(u);f?f.domNode.value=h:(l=!0,c.set(u,{domNode:jn(h),selectedSignal:o(u)}))}l&&(r.value={nodeSelections:c})})}),Ht(()=>{let i=[];for(let{domNode:a,selectedSignal:l}of r.value.nodeSelections.values())i.push(Ht(()=>{let c=a.value;c&&(l.value?Xe(c,s):Ko(c,s))}));return me(...i)}))}});function zf(n,t){return me(n.registerCommand(es,e=>{let o=$();if(!R(o))return!1;e.preventDefault();let r=(function(s){let i=s.getNodes();if(Nf(i,f=>Un(f)&&f.canIndent()?f:null).length>0)return!0;let a=s.anchor,l=s.focus,c=l.isBefore(a)?l:a,u=c.getNode(),d=Fo(u);if(d.canIndent()){let f=d.getKey(),h=Wn();if(h.anchor.set(f,0,\"element\"),h.focus.set(f,0,\"element\"),h=cn(h),h.anchor.is(c))return!0}return!1})(o)?e.shiftKey?wo:$o:Jr;return n.dispatchCommand(r,void 0)},B),n.registerCommand($o,()=>{let e=typeof t==\"number\"?t:t?t.peek():null;if(e==null)return!1;let o=$();if(!R(o))return!1;let r=o.getNodes().map(s=>Fo(s).getIndent());return Math.max(...r)+1>=e},Kr))}var Dm=ne({build:(n,t,e)=>ys(t),config:Ee({disabled:!1,maxIndent:null}),name:\"@lexical/extension/TabIndentation\",register(n,t,e){let{disabled:o,maxIndent:r}=e.getOutput();return Ht(()=>{if(!o.value)return zf(n,r)})}});var J=Ga,oC=J.$createHorizontalRuleNode,rC=J.$isHorizontalRuleNode,sC=J.AutoFocusExtension,iC=J.ClearEditorExtension,aC=J.EditorStateExtension,lC=J.HorizontalRuleExtension,cC=J.HorizontalRuleNode,uC=J.INSERT_HORIZONTAL_RULE_COMMAND,dC=J.InitialStateExtension,fC=J.LexicalBuilder,gC=J.NodeSelectionExtension,hC=J.TabIndentationExtension,Uf=J.batch,pC=J.buildEditorFromExtensions,_C=J.computed,mC=J.configExtension,yC=J.declarePeerDependency,xC=J.defineExtension,st=J.effect,NC=J.getExtensionDependencyFromEditor,CC=J.getKnownTypesAndNodes,Hf=J.getPeerDependencyFromEditor,SC=J.getPeerDependencyFromEditorOrThrow,vt=J.namedSignals,EC=J.registerClearEditor,TC=J.registerTabIndentation,OC=J.safeCast,MC=J.shallowMergeConfig,vC=J.signal,DC=J.untracked,AC=J.watchedSignal;var Ja={};Fe(Ja,{HistoryExtension:()=>xs,SharedHistoryExtension:()=>Rm,createEmptyHistoryState:()=>Jf,registerHistory:()=>Gf});function Am(n,t,e,o,r){if(n===null||e.size===0&&o.size===0&&!r)return 0;let s=t._selection,i=n._selection;if(r)return 1;if(!(R(s)&&R(i)&&i.isCollapsed()&&s.isCollapsed()))return 0;let a=(function(x,y,N){let S=x._nodeMap,M=[];for(let E of y){let T=S.get(E);T!==void 0&&M.push(T)}for(let[E,T]of N){if(!T)continue;let D=S.get(E);D===void 0||ln(D)||M.push(D)}return M})(t,e,o);if(a.length===0)return 0;if(a.length>1){let x=t._nodeMap,y=x.get(s.anchor.key),N=x.get(i.anchor.key);return y&&N&&!n._nodeMap.has(y.__key)&&z(y)&&y.__text.length===1&&s.anchor.offset===1?2:0}let l=a[0],c=n._nodeMap.get(l.__key);if(!z(c)||!z(l)||c.__mode!==l.__mode)return 0;let u=c.__text,d=l.__text;if(u===d)return 0;let f=s.anchor,h=i.anchor;if(f.key!==h.key||f.type!==\"text\")return 0;let g=f.offset,p=h.offset,_=d.length-u.length;return _===1&&p===g-1?2:_===-1&&p===g+1?3:_===-1&&p===g?4:0}function bm(n,t){let e=Date.now(),o=0;return(r,s,i,a,l,c)=>{let u=Date.now();if(c.has(Yr))return o=0,e=u,2;let d=Am(r,s,a,l,n.isComposing()),f=(()=>{let h=i===null||i.editor===n,g=c.has(Cd);if(!g&&h&&c.has(Gr))return 0;if(r===null)return 1;let p=s._selection;if(!(a.size>0||l.size>0))return p!==null?0:2;let _=typeof t==\"number\"?t:t.peek();return g===!1&&d!==0&&d===o&&u<e+_&&h||a.size===1&&(function(x,y,N){let S=y._nodeMap.get(x),M=N._nodeMap.get(x),E=y._selection,T=N._selection;return!(R(E)&&R(T)&&E.anchor.type===\"element\"&&E.focus.type===\"element\"&&T.anchor.type===\"text\"&&T.focus.type===\"text\"||!z(S)||!z(M)||S.__parent!==M.__parent)&&JSON.stringify(y.read(()=>S.exportJSON()))===JSON.stringify(N.read(()=>M.exportJSON()))})(Array.from(a)[0],r,s)?0:1})();return e=u,o=d,f}}function Yf(n){n.undoStack=[],n.redoStack=[],n.current=null}function Gf(n,t,e){let o=bm(n,e);return me(n.registerCommand(os,()=>((function(s,i){let a=i.redoStack,l=i.undoStack;if(l.length!==0){let c=i.current,u=l.pop();c!==null&&(a.push(c),s.dispatchCommand(un,!0)),l.length===0&&s.dispatchCommand(dn,!1),i.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:Yr})}})(n,t),!0),B),n.registerCommand(ns,()=>((function(s,i){let a=i.redoStack,l=i.undoStack;if(a.length!==0){let c=i.current;c!==null&&(l.push(c),s.dispatchCommand(dn,!0));let u=a.pop();a.length===0&&s.dispatchCommand(un,!1),i.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:Yr})}})(n,t),!0),B),n.registerCommand(Pr,()=>(Yf(t),!1),B),n.registerCommand(fd,()=>(Yf(t),n.dispatchCommand(un,!1),n.dispatchCommand(dn,!1),!0),B),n.registerUpdateListener(({editorState:s,prevEditorState:i,dirtyLeaves:a,dirtyElements:l,tags:c})=>{let u=t.current,d=t.redoStack,f=t.undoStack,h=u===null?null:u.editorState;if(u!==null&&s===h)return;let g=o(i,s,u,a,l,c);if(g===1)d.length!==0&&(t.redoStack=[],n.dispatchCommand(un,!1)),u!==null&&(f.push({...u}),n.dispatchCommand(dn,!0));else if(g===2)return;t.current={editor:n,editorState:s}}))}function Jf(){return{current:null,redoStack:[],undoStack:[]}}var xs=ne({build:(n,{delay:t,createInitialHistoryState:e,disabled:o})=>vt({delay:t,disabled:o,historyState:e(n)}),config:Ee({createInitialHistoryState:Jf,delay:300,disabled:typeof window>\"u\"}),name:\"@lexical/history/History\",register:(n,t,e)=>{let o=e.getOutput();return st(()=>o.disabled.value?void 0:Gf(n,o.historyState.value,o.delay))}}),Rm=ne({dependencies:[rs(xs,{createInitialHistoryState:()=>{throw new Error(\"SharedHistory did not inherit parent history\")},disabled:!0})],name:\"@lexical/history/SharedHistory\",register(n,t,e){let{output:o}=e.getDependency(xs),r=(function(i){return i?Hf(i,xs.name):null})(n._parentEditor);if(!r)return()=>{};let s=r.output;return st(()=>Uf(()=>{o.delay.value=s.delay.value,o.historyState.value=s.historyState.value,o.disabled.value=s.disabled.value}))}});var Ns=Ja,IC=Ns.HistoryExtension,LC=Ns.SharedHistoryExtension,jf=Ns.createEmptyHistoryState,Vf=Ns.registerHistory;var ja={};Fe(ja,{$generateHtmlFromNodes:()=>$m,$generateNodesFromDOM:()=>km});function km(n,t){let e=Pd(t)?t.body.childNodes:t.childNodes,o=[],r=[];for(let s of e)if(!qf.has(s.nodeName)){let i=Zf(s,n,r,!1);i!==null&&(o=o.concat(i))}return(function(s){for(let i of s)i.getNextSibling()instanceof la&&i.insertAfter(ea());for(let i of s){let a=i.getChildren();for(let l of a)i.insertBefore(l);i.remove()}})(r),o}function $m(n,t){if(typeof document>\"u\"||typeof window>\"u\"&&global.window===void 0)throw new Error(\"To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.\");let e=document.createElement(\"div\"),o=Se().getChildren();for(let r=0;r<o.length;r++)Xf(n,o[r],e,t);return e.innerHTML}function Xf(n,t,e,o=null){let r=o===null||t.isSelected(o),s=L(t)&&t.excludeFromCopy(\"html\"),i=t;o!==null&&z(t)&&(i=us(o,t,\"clone\"));let a=L(i)?i.getChildren():[],l=Ld(n,i.getType()),c;c=l&&l.exportDOM!==void 0?l.exportDOM(n,i):i.exportDOM(n);let{element:u,after:d}=c;if(!u)return!1;let f=document.createDocumentFragment();for(let h=0;h<a.length;h++){let g=a[h],p=Xf(n,g,f,o);!r&&L(t)&&p&&t.extractWithChild(g,o,\"html\")&&(r=!0)}if(r&&!s){if((Pe(u)||fa(u))&&u.append(f),e.append(u),d){let h=d.call(i,u);h&&(fa(u)?u.replaceChildren(h):u.replaceWith(h))}}else e.append(f);return r}var qf=new Set([\"STYLE\",\"SCRIPT\"]);function Zf(n,t,e,o,r=new Map,s){let i=[];if(qf.has(n.nodeName))return i;let a=null,l=(function(g,p){let{nodeName:_}=g,x=p._htmlConversions.get(_.toLowerCase()),y=null;if(x!==void 0)for(let N of x){let S=N(g);S!==null&&(y===null||(y.priority||0)<=(S.priority||0))&&(y=S)}return y!==null?y.conversion:null})(n,t),c=l?l(n):null,u=null;if(c!==null){u=c.after;let g=c.node;if(a=Array.isArray(g)?g[g.length-1]:g,a!==null){for(let[,p]of r)if(a=p(a,s),!a)break;a&&i.push(...Array.isArray(g)?g:[a])}c.forChild!=null&&r.set(n.nodeName,c.forChild)}let d=n.childNodes,f=[],h=(a==null||!Le(a))&&(a!=null&&Un(a)||o);for(let g=0;g<d.length;g++)f.push(...Zf(d[g],t,e,h,new Map(r),a));return u!=null&&(f=u(f)),ka(n)&&(f=Im(n,f,h?()=>{let g=new la;return e.push(g),g}:oe)),a==null?f.length>0?i=i.concat(f):ka(n)&&(function(g){return g.nextSibling==null||g.previousSibling==null?!1:Po(g.nextSibling)&&Po(g.previousSibling)})(n)&&(i=i.concat(ea())):L(a)&&a.append(...f),i}function Im(n,t,e){let o=n.style.textAlign,r=[],s=[];for(let i=0;i<t.length;i++){let a=t[i];if(Un(a))o&&!a.getFormat()&&a.setFormat(o),r.push(a);else if(s.push(a),i===t.length-1||i<t.length-1&&Un(t[i+1])){let l=e();l.setFormat(o),l.append(...s),r.push(l),s=[]}}return r}var Qf=ja,eg=Qf.$generateHtmlFromNodes,tg=Qf.$generateNodesFromDOM;var Xa={};Fe(Xa,{$generateJSONFromSelectedNodes:()=>ig,$generateNodesFromSerializedNodes:()=>ag,$getClipboardDataFromSelection:()=>cg,$getHtmlContent:()=>og,$getLexicalContent:()=>rg,$insertDataTransferForPlainText:()=>Lm,$insertDataTransferForRichText:()=>wm,$insertGeneratedNodes:()=>Va,copyToClipboard:()=>Pm,setLexicalClipboardDataTransfer:()=>ug});function Cs(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",n);for(let r of t)o.append(\"v\",r);throw e.search=o.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function og(n,t=$()){return t==null&&Cs(166),R(t)&&t.isCollapsed()||t.getNodes().length===0?\"\":eg(n,t)}function rg(n,t=$()){return t==null&&Cs(166),R(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(ig(n,t))}function Lm(n,t){let e=n.getData(\"text/plain\")||n.getData(\"text/uri-list\");e!=null&&t.insertRawText(e)}function wm(n,t,e){let o=n.getData(\"application/x-lexical-editor\");if(o)try{let a=JSON.parse(o);if(a.namespace===e._config.namespace&&Array.isArray(a.nodes))return Va(e,ag(a.nodes),t)}catch(a){console.error(a)}let r=n.getData(\"text/html\"),s=n.getData(\"text/plain\");if(r&&s!==r)try{let a=new DOMParser().parseFromString((function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy(\"lexical\",{createHTML:c=>c}).createHTML(l):l})(r),\"text/html\");return Va(e,tg(e,a),t)}catch(a){console.error(a)}let i=s||n.getData(\"text/uri-list\");if(i!=null)if(R(t)){let a=i.split(/(\\r?\\n|\\t)/);a[a.length-1]===\"\"&&a.pop();for(let l=0;l<a.length;l++){let c=$();if(R(c)){let u=a[l];u===`\n`||u===`\\r\n`?c.insertParagraph():u===\"\t\"?c.insertNodes([kr()]):c.insertText(u)}}}else t.insertRawText(i)}function Va(n,t,e){n.dispatchCommand(bd,{nodes:t,selection:e})||(e.insertNodes(t),(function(o){if(R(o)&&o.isCollapsed()){let r=o.anchor,s=null,i=Bn(r,\"previous\");if(i)if(Lr(i))s=i.origin;else{let a=Xu(i,Je(Se(),\"next\").getFlipped());for(let l of a){if(z(l.origin)){s=l.origin;break}if(L(l.origin)&&!l.origin.isInline())break}}if(s&&z(s)){let a=s.getFormat(),l=s.getStyle();o.format===a&&o.style===l||(o.format=a,o.style=l,o.dirty=!0)}}})(e))}function sg(n,t,e,o=[]){let r=t===null||e.isSelected(t),s=L(e)&&e.excludeFromCopy(\"html\"),i=e;t!==null&&z(i)&&(i=us(t,i,\"clone\"));let a=L(i)?i.getChildren():[],l=(function(c){let u=c.exportJSON(),d=c.constructor;if(u.type!==d.getType()&&Cs(58,d.name),L(c)){let f=u.children;Array.isArray(f)||Cs(59,d.name)}return u})(i);z(i)&&i.getTextContentSize()===0&&(r=!1);for(let c=0;c<a.length;c++){let u=a[c],d=sg(n,t,u,l.children);!r&&L(e)&&d&&e.extractWithChild(u,t,\"clone\")&&(r=!0)}if(r&&!s)o.push(l);else if(Array.isArray(l.children))for(let c=0;c<l.children.length;c++){let u=l.children[c];o.push(u)}return r}function ig(n,t){let e=[],o=Se().getChildren();for(let r=0;r<o.length;r++)sg(n,t,o[r],e);return{namespace:n._config.namespace,nodes:e}}function ag(n){let t=[];for(let e=0;e<n.length;e++){let o=n[e],r=id(o);z(r)&&Qd(r),t.push(r)}return t}var Xn=null;async function Pm(n,t,e){if(Xn!==null)return!1;if(t!==null)return new Promise((c,u)=>{n.update(()=>{c(ng(n,t,e))})});let o=n.getRootElement(),r=n._window||window,s=r.document,i=da(r);if(o===null||i===null)return!1;let a=s.createElement(\"span\");a.style.cssText=\"position: fixed; top: -1000px;\",a.append(s.createTextNode(\"#\")),o.append(a);let l=new Range;return l.setStart(a,0),l.setEnd(a,1),i.removeAllRanges(),i.addRange(l),new Promise((c,u)=>{let d=n.registerCommand(Br,f=>(qe(f,ClipboardEvent)&&(d(),Xn!==null&&(r.clearTimeout(Xn),Xn=null),c(ng(n,f,e))),!0),Kr);Xn=r.setTimeout(()=>{d(),Xn=null,c(!1)},50),s.execCommand(\"copy\"),a.remove()})}function ng(n,t,e){if(e===void 0){let r=da(n._window),s=$();if(!s||s.isCollapsed()||!r)return!1;let i=r.anchorNode,a=r.focusNode;if(i!==null&&a!==null&&!Bd(n,i,a))return!1;e=cg(s)}t.preventDefault();let o=t.clipboardData;return o!==null&&(ug(o,e),!0)}var lg=[[\"text/html\",og],[\"application/x-lexical-editor\",rg]];function cg(n=$()){let t={\"text/plain\":n?n.getTextContent():\"\"};if(n){let e=$r();for(let[o,r]of lg){let s=r(e,n);s!==null&&(t[o]=s)}}return t}function ug(n,t){for(let[e]of lg)t[e]===void 0&&n.setData(e,\"\");for(let e in t){let o=t[e];o!==void 0&&n.setData(e,o)}}var it=Xa,YC=it.$generateJSONFromSelectedNodes,GC=it.$generateNodesFromSerializedNodes,JC=it.$getClipboardDataFromSelection,jC=it.$getHtmlContent,VC=it.$getLexicalContent,XC=it.$insertDataTransferForPlainText,qa=it.$insertDataTransferForRichText,qC=it.$insertGeneratedNodes,Za=it.copyToClipboard,ZC=it.setLexicalClipboardDataTransfer;var Qa={};Fe(Qa,{DragonExtension:()=>Fm,registerDragonSupport:()=>dg});function dg(n){let t=window.location.origin,e=o=>{if(o.origin!==t)return;let r=n.getRootElement();if(document.activeElement!==r)return;let s=o.data;if(typeof s==\"string\"){let i;try{i=JSON.parse(s)}catch{return}if(i&&i.protocol===\"nuanria_messaging\"&&i.type===\"request\"){let a=i.payload;if(a&&a.functionId===\"makeChanges\"){let l=a.args;if(l){let[c,u,d,f,h]=l;n.update(()=>{let g=$();if(R(g)){let p=g.anchor,_=p.getNode(),x=0,y=0;if(z(_)&&c>=0&&u>=0&&(x=c,y=c+u,g.setTextNodeRange(_,x,_,y)),x===y&&d===\"\"||(g.insertRawText(d),_=p.getNode()),z(_)){x=f,y=f+h;let N=_.getTextContentSize();x=x>N?N:x,y=y>N?N:y,g.setTextNodeRange(_,x,_,y)}o.stopImmediatePropagation()}})}}}}};return window.addEventListener(\"message\",e,!0),()=>{window.removeEventListener(\"message\",e,!0)}}var Fm=ne({build:(n,t,e)=>vt(t),config:Ee({disabled:typeof window>\"u\"}),name:\"@lexical/dragon\",register:(n,t,e)=>st(()=>e.getOutput().disabled.value?void 0:dg(n))});var fg=Qa,gg=fg.DragonExtension,nS=fg.registerDragonSupport;var ol={};Fe(ol,{$createHeadingNode:()=>Zn,$createQuoteNode:()=>nl,$isHeadingNode:()=>Jm,$isQuoteNode:()=>Ym,DRAG_DROP_PASTE:()=>tl,HeadingNode:()=>eo,QuoteNode:()=>Qn,RichTextExtension:()=>jm,eventFiles:()=>zo,registerRichText:()=>xg});function hg(n,t){if(document.caretRangeFromPoint!==void 0){let e=document.caretRangeFromPoint(n,t);return e===null?null:{node:e.startContainer,offset:e.startOffset}}if(document.caretPositionFromPoint!==\"undefined\"){let e=document.caretPositionFromPoint(n,t);return e===null?null:{node:e.offsetNode,offset:e.offset}}return null}var hn=typeof window<\"u\"&&window.document!==void 0&&window.document.createElement!==void 0,Km=hn&&\"documentMode\"in document?document.documentMode:null,Bm=hn&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Wm=!(!hn||!(\"InputEvent\"in window)||Km)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),zm=hn&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),pg=hn&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Um=hn&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Hm=hn&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&Bm&&!Um,tl=ve(\"DRAG_DROP_PASTE_FILE\"),Qn=class n extends ot{static getType(){return\"quote\"}static clone(t){return new n(t.__key)}createDOM(t){let e=document.createElement(\"blockquote\");return Xe(e,t.theme.quote),e}updateDOM(t,e){return!1}static importDOM(){return{blockquote:t=>({conversion:Gm,priority:0})}}exportDOM(t){let{element:e}=super.exportDOM(t);if(Pe(e)){this.isEmpty()&&e.append(document.createElement(\"br\"));let o=this.getFormatType();o&&(e.style.textAlign=o);let r=this.getDirection();r&&(e.dir=r)}return{element:e}}static importJSON(t){return nl().updateFromJSON(t)}insertNewAfter(t,e){let o=oe(),r=this.getDirection();return o.setDirection(r),this.insertAfter(o,e),o}collapseAtStart(){let t=oe();return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function nl(){return Ot(new Qn)}function Ym(n){return n instanceof Qn}var eo=class n extends ot{constructor(e,o){super(o);C(this,\"__tag\");this.__tag=e}static getType(){return\"heading\"}static clone(e){return new n(e.__tag,e.__key)}getTag(){return this.__tag}setTag(e){let o=this.getWritable();return this.__tag=e,o}createDOM(e){let o=this.__tag,r=document.createElement(o),s=e.theme.heading;if(s!==void 0){let i=s[o];Xe(r,i)}return r}updateDOM(e,o,r){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:qn,priority:0}),h2:e=>({conversion:qn,priority:0}),h3:e=>({conversion:qn,priority:0}),h4:e=>({conversion:qn,priority:0}),h5:e=>({conversion:qn,priority:0}),h6:e=>({conversion:qn,priority:0}),p:e=>{let o=e.firstChild;return o!==null&&_g(o)?{conversion:()=>({node:null}),priority:3}:null},span:e=>_g(e)?{conversion:o=>({node:Zn(\"h1\")}),priority:3}:null}}exportDOM(e){let{element:o}=super.exportDOM(e);if(Pe(o)){this.isEmpty()&&o.append(document.createElement(\"br\"));let r=this.getFormatType();r&&(o.style.textAlign=r);let s=this.getDirection();s&&(o.dir=s)}return{element:o}}static importJSON(e){return Zn(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,o=!0){let r=e?e.anchor.offset:0,s=this.getLastDescendant(),i=!s||e&&e.anchor.key===s.getKey()&&r===s.getTextContentSize()||!e?oe():Zn(this.getTag()),a=this.getDirection();if(i.setDirection(a),this.insertAfter(i,o),r===0&&!this.isEmpty()&&e){let l=oe();l.select(),this.replace(l,!0)}return i}collapseAtStart(){let e=this.isEmpty()?oe():Zn(this.getTag());return this.getChildren().forEach(o=>e.append(o)),this.replace(e),!0}extractWithChild(){return!0}};function _g(n){return n.nodeName.toLowerCase()===\"span\"&&n.style.fontSize===\"26pt\"}function qn(n){let t=n.nodeName.toLowerCase(),e=null;return t!==\"h1\"&&t!==\"h2\"&&t!==\"h3\"&&t!==\"h4\"&&t!==\"h5\"&&t!==\"h6\"||(e=Zn(t),n.style!==null&&(ha(n,e),e.setFormat(n.style.textAlign))),{node:e}}function Gm(n){let t=nl();return n.style!==null&&(t.setFormat(n.style.textAlign),ha(n,t)),{node:t}}function Zn(n=\"h1\"){return Ot(new eo(n))}function Jm(n){return n instanceof eo}function zo(n){let t=null;if(qe(n,DragEvent)?t=n.dataTransfer:qe(n,ClipboardEvent)&&(t=n.clipboardData),t===null)return[!1,[],!1];let e=t.types,o=e.includes(\"Files\"),r=e.includes(\"text/html\")||e.includes(\"text/plain\");return[o,Array.from(t.files),r]}function mg(n){let t=$();if(!R(t))return!1;let e=new Set,o=t.getNodes();for(let r=0;r<o.length;r++){let s=o[r],i=s.getKey();if(e.has(i))continue;let a=we(s,c=>L(c)&&!c.isInline());if(a===null)continue;let l=a.getKey();a.canIndent()&&!e.has(l)&&(e.add(l),n(a))}return e.size>0}function yg(n){let t=nt(n);return an(t)}function el(n){for(let t of[\"lowercase\",\"uppercase\",\"capitalize\"])n.hasFormat(t)&&n.toggleFormat(t)}function xg(n){return me(n.registerCommand(Fr,t=>{let e=$();return!!_e(e)&&(e.clear(),!0)},B),n.registerCommand(Wr,t=>{let e=$();return R(e)?(e.deleteCharacter(t),!0):!!_e(e)&&(e.deleteNodes(),!0)},B),n.registerCommand(md,t=>{let e=$();return!!R(e)&&(e.deleteWord(t),!0)},B),n.registerCommand(_d,t=>{let e=$();return!!R(e)&&(e.deleteLine(t),!0)},B),n.registerCommand(hd,t=>{let e=$();if(typeof t==\"string\")e!==null&&e.insertText(t);else{if(e===null)return!1;let o=t.dataTransfer;if(o!=null)qa(o,e,n);else if(R(e)){let r=t.data;return r&&e.insertText(r),!0}}return!0},B),n.registerCommand(Dd,()=>{let t=$();return!!R(t)&&(t.removeText(),!0)},B),n.registerCommand(Hr,t=>{let e=$();return!!R(e)&&(e.formatText(t),!0)},B),n.registerCommand(Ur,t=>{let e=$();if(!R(e)&&!_e(e))return!1;let o=e.getNodes();for(let r of o){let s=we(r,i=>L(i)&&!i.isInline());s!==null&&s.setFormat(t)}return!0},B),n.registerCommand(ca,t=>{let e=$();return!!R(e)&&(e.insertLineBreak(t),!0)},B),n.registerCommand(Io,()=>{let t=$();return!!R(t)&&(t.insertParagraph(),!0)},B),n.registerCommand(Jr,()=>(Ir([kr()]),!0),B),n.registerCommand($o,()=>mg(t=>{let e=t.getIndent();t.setIndent(e+1)}),B),n.registerCommand(wo,()=>mg(t=>{let e=t.getIndent();e>0&&t.setIndent(Math.max(0,e-1))}),B),n.registerCommand(Xr,t=>{let e=$();if(_e(e)){let o=e.getNodes();if(o.length>0)return t.preventDefault(),o[0].selectPrevious(),!0}else if(R(e)){let o=na(e.focus,!0);if(!t.shiftKey&&an(o)&&!o.isIsolated()&&!o.isInline())return o.selectPrevious(),t.preventDefault(),!0}return!1},B),n.registerCommand(jr,t=>{let e=$();if(_e(e)){let o=e.getNodes();if(o.length>0)return t.preventDefault(),o[0].selectNext(0,0),!0}else if(R(e)){if((function(r){let s=r.focus;return s.key===\"root\"&&s.offset===Se().getChildrenSize()})(e))return t.preventDefault(),!0;let o=na(e.focus,!1);if(!t.shiftKey&&an(o)&&!o.isIsolated()&&!o.isInline())return o.selectNext(),t.preventDefault(),!0}return!1},B),n.registerCommand(Vr,t=>{let e=$();if(_e(e)){let o=e.getNodes();if(o.length>0)return t.preventDefault(),Ea(o[0])?o[0].selectNext(0,0):o[0].selectPrevious(),!0}if(!R(e))return!1;if(Ma(e,!0)){let o=t.shiftKey;return t.preventDefault(),Ta(e,o,!0),!0}return!1},B),n.registerCommand(Sd,t=>{let e=$();if(_e(e)){let r=e.getNodes();if(r.length>0)return t.preventDefault(),Ea(r[0])?r[0].selectPrevious():r[0].selectNext(0,0),!0}if(!R(e))return!1;let o=t.shiftKey;return!!Ma(e,!1)&&(t.preventDefault(),Ta(e,o,!1),!0)},B),n.registerCommand(Ed,t=>{if(yg(t.target))return!1;let e=$();if(R(e)){if((function(o){if(!o.isCollapsed())return!1;let{anchor:r}=o;if(r.offset!==0)return!1;let s=r.getNode();if(ln(s))return!1;let i=Fo(s);return i.getIndent()>0&&(i.is(s)||s.is(i.getFirstDescendant()))})(e))return t.preventDefault(),n.dispatchCommand(wo,void 0);if(pg&&navigator.language===\"ko-KR\")return!1}else if(!_e(e))return!1;return t.preventDefault(),n.dispatchCommand(Wr,!0)},B),n.registerCommand(Td,t=>{if(yg(t.target))return!1;let e=$();return!(!R(e)&&!_e(e))&&(t.preventDefault(),n.dispatchCommand(Wr,!1))},B),n.registerCommand(qr,t=>{let e=$();if(!R(e))return!1;if(el(e),t!==null){if((pg||zm||Hm)&&Wm)return!1;if(t.preventDefault(),t.shiftKey)return n.dispatchCommand(ca,!1)}return n.dispatchCommand(Io,void 0)},B),n.registerCommand(Zr,()=>{let t=$();return!!R(t)&&(n.blur(),!0)},B),n.registerCommand(Nd,t=>{let[,e]=zo(t);if(e.length>0){let r=hg(t.clientX,t.clientY);if(r!==null){let{offset:s,node:i}=r,a=nt(i);if(a!==null){let l=Wn();if(z(a))l.anchor.set(a.getKey(),s,\"text\"),l.focus.set(a.getKey(),s,\"text\");else{let u=a.getParentOrThrow().getKey(),d=a.getIndexWithinParent()+1;l.anchor.set(u,d,\"element\"),l.focus.set(u,d,\"element\")}let c=cn(l);je(c)}n.dispatchCommand(tl,e)}return t.preventDefault(),!0}let o=$();return!!R(o)},B),n.registerCommand(xd,t=>{let[e]=zo(t),o=$();return!(e&&!R(o))},B),n.registerCommand(yd,t=>{let[e]=zo(t),o=$();if(e&&!R(o))return!1;let r=hg(t.clientX,t.clientY);if(r!==null){let s=nt(r.node);an(s)&&t.preventDefault()}return!0},B),n.registerCommand(Rd,()=>(wr(),!0),B),n.registerCommand(Br,t=>(Za(n,qe(t,ClipboardEvent)?t:null),!0),B),n.registerCommand(pd,t=>((async function(e,o){await Za(o,qe(e,ClipboardEvent)?e:null),o.update(()=>{let r=$();R(r)?r.removeText():_e(r)&&r.getNodes().forEach(s=>s.remove())})})(t,n),!0),B),n.registerCommand(ts,t=>{let[,e,o]=zo(t);return e.length>0&&!o?(n.dispatchCommand(tl,e),!0):Yn(t.target)&&Kd(t.target)?!1:$()!==null&&((function(r,s){r.preventDefault(),s.update(()=>{let i=$(),a=qe(r,InputEvent)||qe(r,KeyboardEvent)?null:r.clipboardData;a!=null&&i!==null&&qa(a,i,s)},{tag:Md})})(t,n),!0)},B),n.registerCommand(Qr,t=>{let e=$();return R(e)&&el(e),!1},B),n.registerCommand(es,t=>{let e=$();return R(e)&&el(e),!1},B))}var jm=ne({conflictsWith:[\"@lexical/plain-text\"],dependencies:[gg],name:\"@lexical/rich-text\",nodes:[eo,Qn],register:xg});var at=ol,Ng=at.$createHeadingNode,uS=at.$createQuoteNode,Cg=at.$isHeadingNode,dS=at.$isQuoteNode,fS=at.DRAG_DROP_PASTE,Sg=at.HeadingNode,gS=at.QuoteNode,hS=at.RichTextExtension,pS=at.eventFiles,Eg=at.registerRichText;var ll={};Fe(ll,{$createListItemNode:()=>$e,$createListNode:()=>De,$getListDepth:()=>Ss,$handleListInsertParagraph:()=>Lg,$insertList:()=>Uo,$isListItemNode:()=>U,$isListNode:()=>W,$removeList:()=>al,CheckListExtension:()=>ny,INSERT_CHECK_LIST_COMMAND:()=>wg,INSERT_ORDERED_LIST_COMMAND:()=>Wg,INSERT_UNORDERED_LIST_COMMAND:()=>Bg,ListExtension:()=>Yg,ListItemNode:()=>Gt,ListNode:()=>_n,REMOVE_LIST_COMMAND:()=>zg,UPDATE_LIST_START_COMMAND:()=>Kg,insertList:()=>ey,registerCheckList:()=>Pg,registerList:()=>Ug,registerListStrictIndentTransform:()=>Hg,removeList:()=>ty});function Yt(n,...t){let e=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",n);for(let r of t)o.append(\"v\",r);throw e.search=o.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Ss(n){let t=1,e=n.getParent();for(;e!=null;){if(U(e)){let o=e.getParent();if(W(o)){t++,e=o.getParent();continue}Yt(40)}return t}return t}function rl(n){let t=n.getParent();W(t)||Yt(40);let e=t;for(;e!==null;)e=e.getParent(),W(e)&&(t=e);return t}function kg(n){let t=[],e=n.getChildren().filter(U);for(let o=0;o<e.length;o++){let r=e[o],s=r.getFirstChild();W(s)?t=t.concat(kg(s)):t.push(r)}return t}function lt(n){return U(n)&&W(n.getFirstChild())}function Tg(n){return $e().append(n)}function $g(n,t){return U(n)&&(t.length===0||t.length===1&&n.is(t[0])&&n.getChildrenSize()===0)}function Uo(n){let t=$();if(t!==null){let e=t.getNodes();if(R(t)){let r=t.getStartEndPoints();r===null&&Yt(143);let[s]=r,i=s.getNode(),a=i.getParent();if(Le(i)){let l=i.getFirstChild();if(l)e=l.selectStart().getNodes();else{let c=oe();i.append(c),e=c.select().getNodes()}}else if($g(i,e)){let l=De(n);if(Le(a)){i.replace(l);let c=$e();L(i)&&(c.setFormat(i.getFormatType()),c.setIndent(i.getIndent())),l.append(c)}else if(U(i)){let c=i.getParentOrThrow();pn(l,c.getChildren()),c.replace(l)}return}}let o=new Set;for(let r=0;r<e.length;r++){let s=e[r];if(L(s)&&s.isEmpty()&&!U(s)&&!o.has(s.getKey())){Og(s,n);continue}let i=Ro(s)?s.getParent():U(s)&&s.isEmpty()?s:null;for(;i!=null;){let a=i.getKey();if(W(i)){if(!o.has(a)){let l=De(n);pn(l,i.getChildren()),i.replace(l),o.add(a)}break}{let l=i.getParent();if(Le(l)&&!o.has(a)){o.add(a),Og(i,n);break}i=l}}}}}function pn(n,t){n.splice(n.getChildrenSize(),0,t)}function Og(n,t){if(W(n))return n;let e=n.getPreviousSibling(),o=n.getNextSibling(),r=$e(),s;if(pn(r,n.getChildren()),W(e)&&t===e.getListType())e.append(r),W(o)&&t===o.getListType()&&(pn(e,o.getChildren()),o.remove()),s=e;else if(W(o)&&t===o.getListType())o.getFirstChildOrThrow().insertBefore(r),s=o;else{let i=De(t);i.append(r),n.replace(i),s=i}return r.setFormat(n.getFormatType()),r.setIndent(n.getIndent()),n.remove(),s}function il(n,t){let e=n.getLastChild(),o=t.getFirstChild();e&&o&&lt(e)&&lt(o)&&(il(e.getFirstChild(),o.getFirstChild()),o.remove());let r=t.getChildren();r.length>0&&n.append(...r),t.remove()}function al(){let n=$();if(R(n)){let t=new Set,e=n.getNodes(),o=n.anchor.getNode();if($g(o,e))t.add(rl(o));else for(let r=0;r<e.length;r++){let s=e[r];if(Ro(s)){let i=Cf(s,Gt);i!=null&&t.add(rl(i))}}for(let r of t){let s=r,i=kg(r);for(let a of i){let l=oe().setTextStyle(n.style).setTextFormat(n.format);pn(l,a.getChildren()),s.insertAfter(l),s=l,a.__key===n.anchor.key&&aa(n.anchor,ko(Je(l,\"next\"))),a.__key===n.focus.key&&aa(n.focus,ko(Je(l,\"next\"))),a.remove()}r.remove()}}}function Ig(n){let t=n.getListType()!==\"check\",e=n.getStart();for(let o of n.getChildren())U(o)&&(o.getValue()!==e&&o.setValue(e),t&&o.getLatest().__checked!=null&&o.setChecked(void 0),W(o.getFirstChild())||e++)}function Vm(n){let t=new Set;if(lt(n)||t.has(n.getKey()))return;let e=n.getParent(),o=n.getNextSibling(),r=n.getPreviousSibling();if(lt(o)&&lt(r)){let s=r.getFirstChild();if(W(s)){s.append(n);let i=o.getFirstChild();W(i)&&(pn(s,i.getChildren()),o.remove(),t.add(o.getKey()))}}else if(lt(o)){let s=o.getFirstChild();if(W(s)){let i=s.getFirstChild();i!==null&&i.insertBefore(n)}}else if(lt(r)){let s=r.getFirstChild();W(s)&&s.append(n)}else if(W(e)){let s=$e().setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle()),i=De(e.getListType()).setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle());s.append(i),i.append(n),r?r.insertAfter(s):o?o.insertBefore(s):e.append(s)}}function Xm(n){if(lt(n))return;let t=n.getParent(),e=t?t.getParent():void 0;if(W(e?e.getParent():void 0)&&U(e)&&W(t)){let o=t?t.getFirstChild():void 0,r=t?t.getLastChild():void 0;if(n.is(o))e.insertBefore(n),t.isEmpty()&&e.remove();else if(n.is(r))e.insertAfter(n),t.isEmpty()&&e.remove();else{let s=t.getListType(),i=$e(),a=De(s);i.append(a),n.getPreviousSiblings().forEach(u=>a.append(u));let l=$e(),c=De(s);l.append(c),pn(c,n.getNextSiblings()),e.insertBefore(i),e.insertAfter(l),e.replace(n)}}}function Lg(){let n=$();if(!R(n)||!n.isCollapsed())return!1;let t=n.anchor.getNode();if(!U(t)||t.getChildrenSize()!==0)return!1;let e=rl(t),o=t.getParent();W(o)||Yt(40);let r=o.getParent(),s;if(Le(r))s=oe(),e.insertAfter(s);else{if(!U(r))return!1;s=$e(),r.insertAfter(s)}s.setTextStyle(n.style).setTextFormat(n.format).select();let i=t.getNextSiblings();if(i.length>0){let a=De(o.getListType());if(U(s)){let l=$e();l.append(a),s.insertAfter(l)}else s.insertAfter(a);a.append(...i)}return(function(a){let l=a;for(;l.getNextSibling()==null&&l.getPreviousSibling()==null;){let c=l.getParent();if(c==null||!U(c)&&!W(c))break;l=c}l.remove()})(t),!0}function Es(...n){let t=[];for(let e of n)if(e&&typeof e==\"string\")for(let[o]of e.matchAll(/\\S+/g))t.push(o);return t}var Gt=class extends ot{constructor(e=1,o=void 0,r){super(r);C(this,\"__value\");C(this,\"__checked\");this.__value=e===void 0?1:e,this.__checked=o}$config(){return this.config(\"listitem\",{$transform:e=>{if(e.__checked==null)return;let o=e.getParent();W(o)&&o.getListType()!==\"check\"&&e.getChecked()!=null&&e.setChecked(void 0)},extends:ot,importDOM:ua({li:()=>({conversion:qm,priority:0})})})}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){let o=document.createElement(\"li\");return this.updateListItemDOM(null,o,e),o}updateListItemDOM(e,o,r){(function(a,l,c){let u=l.getParent();!W(u)||u.getListType()!==\"check\"||W(l.getFirstChild())?(a.removeAttribute(\"role\"),a.removeAttribute(\"tabIndex\"),a.removeAttribute(\"aria-checked\")):(a.setAttribute(\"role\",\"checkbox\"),a.setAttribute(\"tabIndex\",\"-1\"),c&&l.__checked===c.__checked||a.setAttribute(\"aria-checked\",l.getChecked()?\"true\":\"false\"))})(o,this,e),o.value=this.__value,(function(a,l,c){let u=[],d=[],f=l.list,h=f?f.listitem:void 0,g;if(f&&f.nested&&(g=f.nested.listitem),h!==void 0&&u.push(...Es(h)),f){let p=c.getParent(),_=W(p)&&p.getListType()===\"check\",x=c.getChecked();_&&!x||d.push(f.listitemUnchecked),_&&x||d.push(f.listitemChecked),_&&u.push(x?f.listitemChecked:f.listitemUnchecked)}if(g!==void 0){let p=Es(g);c.getChildren().some(_=>W(_))?u.push(...p):d.push(...p)}d.length>0&&Ko(a,...d),u.length>0&&Xe(a,...u)})(o,r.theme,this);let s=e?e.__style:\"\",i=this.__style;s!==i&&(i===\"\"?o.removeAttribute(\"style\"):o.style.cssText=i),(function(a,l,c){let u=va(l.__textStyle);for(let d in u)a.style.setProperty(`--listitem-marker-${d}`,u[d]);if(c)for(let d in va(c.__textStyle))d in u||a.style.removeProperty(`--listitem-marker-${d}`)})(o,this,e)}updateDOM(e,o,r){let s=o;return this.updateListItemDOM(e,s,r),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){let o=this.createDOM(e._config),r=this.getFormatType();r&&(o.style.textAlign=r);let s=this.getDirection();return s&&(o.dir=s),{element:o}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let o=0;o<e.length;o++){let r=e[o];if(L(r)&&this.canMergeWith(r)){let s=r.getChildren();this.append(...s),r.remove()}else super.append(r)}return this}replace(e,o){if(U(e))return super.replace(e);this.setIndent(0);let r=this.getParentOrThrow();if(!W(r))return e;if(r.__first===this.getKey())r.insertBefore(e);else if(r.__last===this.getKey())r.insertAfter(e);else{let s=De(r.getListType()),i=this.getNextSibling();for(;i;){let a=i;i=i.getNextSibling(),s.append(a)}r.insertAfter(e),e.insertAfter(s)}return o&&(L(e)||Yt(139),this.getChildren().forEach(s=>{e.append(s)})),this.remove(),r.getChildrenSize()===0&&r.remove(),e}insertAfter(e,o=!0){let r=this.getParentOrThrow();if(W(r)||Yt(39),U(e))return super.insertAfter(e,o);let s=this.getNextSiblings();if(r.insertAfter(e,o),s.length!==0){let i=De(r.getListType());s.forEach(a=>i.append(a)),e.insertAfter(i,o)}return e}remove(e){let o=this.getPreviousSibling(),r=this.getNextSibling();super.remove(e),o&&r&&lt(o)&&lt(r)&&(il(o.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(e,o=!0){let r=$e().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,o),r}collapseAtStart(e){let o=oe();this.getChildren().forEach(a=>o.append(a));let r=this.getParentOrThrow(),s=r.getParentOrThrow(),i=U(s);if(r.getChildrenSize()===1)if(i)r.remove(),s.select();else{r.insertBefore(o),r.remove();let a=e.anchor,l=e.focus,c=o.getKey();a.type===\"element\"&&a.getNode().is(this)&&a.set(c,a.offset,\"element\"),l.type===\"element\"&&l.getNode().is(this)&&l.set(c,l.offset,\"element\")}else r.insertBefore(o),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){let o=this.getWritable();return o.__value=e,o}getChecked(){let e=this.getLatest(),o,r=this.getParent();return W(r)&&(o=r.getListType()),o===\"check\"?!!e.__checked:void 0}setChecked(e){let o=this.getWritable();return o.__checked=e,o}toggleChecked(){let e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){let e=this.getParent();if(e===null||!this.isAttached())return this.getLatest().__indent;let o=e.getParentOrThrow(),r=0;for(;U(o);)o=o.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(e){typeof e!=\"number\"&&Yt(117),(e=Math.floor(e))>=0||Yt(199);let o=this.getIndent();for(;o!==e;)o<e?(Vm(this),o++):(Xm(this),o--);return this}canInsertAfter(e){return U(e)}canReplaceWith(e){return U(e)}canMergeWith(e){return U(e)||rd(e)}extractWithChild(e,o){if(!R(o))return!1;let r=o.anchor.getNode(),s=o.focus.getNode();return this.isParentOf(r)&&this.isParentOf(s)&&this.getTextContent().length===o.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return De(\"bullet\")}canMergeWhenEmpty(){return!0}};function qm(n){if(n.classList.contains(\"task-list-item\")){for(let e of n.children)if(e.tagName===\"INPUT\")return Mg(e)}if(n.classList.contains(\"joplin-checkbox\")){for(let e of n.children)if(e.classList.contains(\"checkbox-wrapper\")&&e.children.length>0&&e.children[0].tagName===\"INPUT\")return Mg(e.children[0])}let t=n.getAttribute(\"aria-checked\");return{node:$e(t===\"true\"||t!==\"false\"&&void 0)}}function Mg(n){return n.getAttribute(\"type\")!==\"checkbox\"?{node:null}:{node:$e(n.hasAttribute(\"checked\"))}}function $e(n){return Ot(new Gt(void 0,n))}function U(n){return n instanceof Gt}var _n=class extends ot{constructor(e=\"number\",o=1,r){super(r);C(this,\"__tag\");C(this,\"__start\");C(this,\"__listType\");let s=Qm[e]||e;this.__listType=s,this.__tag=s===\"number\"?\"ol\":\"ul\",this.__start=o}$config(){return this.config(\"list\",{$transform:e=>{(function(o){let r=o.getNextSibling();W(r)&&o.getListType()===r.getListType()&&il(o,r)})(e),Ig(e)},extends:ot,importDOM:ua({ol:()=>({conversion:Dg,priority:0}),ul:()=>({conversion:Dg,priority:0})})})}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){let o=this.getWritable();return o.__listType=e,o.__tag=e===\"number\"?\"ol\":\"ul\",o}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){let o=this.getWritable();return o.__start=e,o}createDOM(e,o){let r=this.__tag,s=document.createElement(r);return this.__start!==1&&s.setAttribute(\"start\",String(this.__start)),s.__lexicalListType=this.__listType,vg(s,e.theme,this),s}updateDOM(e,o,r){return e.__tag!==this.__tag||e.__listType!==this.__listType||(vg(o,r.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){let o=this.createDOM(e._config,e);return Pe(o)&&(this.__start!==1&&o.setAttribute(\"start\",String(this.__start)),this.__listType===\"check\"&&o.setAttribute(\"__lexicalListType\",\"check\")),{element:o}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,o,r){let s=r;for(let i=0;i<r.length;i++){let a=r[i];U(a)||(s===r&&(s=[...r]),s[i]=$e().append(!L(a)||W(a)||a.isInline()?a:Bt(a.getTextContent())))}return super.splice(e,o,s)}extractWithChild(e){return U(e)}};function vg(n,t,e){let o=[],r=[],s=t.list;if(s!==void 0){let i=s[`${e.__tag}Depth`]||[],a=Ss(e)-1,l=a%i.length,c=i[l],u=s[e.__tag],d,f=s.nested,h=s.checklist;if(f!==void 0&&f.list&&(d=f.list),u!==void 0&&o.push(u),h!==void 0&&e.__listType===\"check\"&&o.push(h),c!==void 0){o.push(...Es(c));for(let g=0;g<i.length;g++)g!==l&&r.push(e.__tag+g)}if(d!==void 0){let g=Es(d);a>1?o.push(...g):r.push(...g)}}r.length>0&&Ko(n,...r),o.length>0&&Xe(n,...o)}function Zm(n){let t=[];for(let e=0;e<n.length;e++){let o=n[e];if(U(o)){t.push(o);let r=o.getChildren();r.length>1&&r.forEach(s=>{W(s)&&t.push(Tg(s))})}else t.push(Tg(o))}return t}function Dg(n){let t=n.nodeName.toLowerCase(),e=null;return t===\"ol\"?e=De(\"number\",n.start):t===\"ul\"&&(e=(function(o){if(o.getAttribute(\"__lexicallisttype\")===\"check\"||o.classList.contains(\"contains-task-list\")||o.getAttribute(\"data-is-checklist\")===\"1\")return!0;for(let r of o.childNodes)if(Pe(r)&&r.hasAttribute(\"aria-checked\"))return!0;return!1})(n)?De(\"check\"):De(\"bullet\")),{after:Zm,node:e}}var Qm={ol:\"number\",ul:\"bullet\"};function De(n=\"number\",t=1){return Ot(new _n(n,t))}function W(n){return n instanceof _n}var wg=ve(\"INSERT_CHECK_LIST_COMMAND\");function Pg(n){return me(n.registerCommand(wg,()=>(Uo(\"check\"),!0),pe),n.registerCommand(jr,t=>Rg(t,n,!1),pe),n.registerCommand(Xr,t=>Rg(t,n,!0),pe),n.registerCommand(Zr,()=>{if(sl()!=null){let t=n.getRootElement();return t?.focus(),!0}return!1},pe),n.registerCommand(Qr,t=>{let e=sl();return!(e==null||!n.isEditable())&&(n.update(()=>{let o=nt(e);U(o)&&(t.preventDefault(),o.toggleChecked())}),!0)},pe),n.registerCommand(Vr,t=>n.getEditorState().read(()=>{let e=$();if(R(e)&&e.isCollapsed()){let{anchor:o}=e,r=o.type===\"element\";if(r||o.offset===0){let s=o.getNode(),i=we(s,a=>L(a)&&!a.isInline());if(U(i)){let a=i.getParent();if(W(a)&&a.getListType()===\"check\"&&(r||i.getFirstDescendant()===s)){let l=n.getElementByKey(i.__key);if(l!=null&&document.activeElement!==l)return l.focus(),t.preventDefault(),!0}}}}return!1}),pe),n.registerRootListener((t,e)=>{t!==null&&(t.addEventListener(\"click\",Ag),t.addEventListener(\"pointerdown\",bg)),e!==null&&(e.removeEventListener(\"click\",Ag),e.removeEventListener(\"pointerdown\",bg))}))}function Fg(n,t){let e=n.target;if(!Pe(e))return;let o=e.firstChild;if(Pe(o)&&(o.tagName===\"UL\"||o.tagName===\"OL\"))return;let r=e.parentNode;if(!r||r.__lexicalListType!==\"check\")return;let s=e.getBoundingClientRect(),i=Sf(e),a=n.clientX/i,l=window.getComputedStyle?window.getComputedStyle(e,\"::before\"):{width:\"0px\"},c=parseFloat(l.width),u=n.pointerType===\"touch\"?32:0;(e.dir===\"rtl\"?a<s.right+u&&a>s.right-c-u:a>s.left-u&&a<s.left+c+u)&&t()}function Ag(n){Fg(n,()=>{if(Pe(n.target)){let t=n.target,e=is(t);e!=null&&e.isEditable()&&e.update(()=>{let o=nt(t);U(o)&&(t.focus(),o.toggleChecked())})}})}function bg(n){Fg(n,()=>{n.preventDefault()})}function sl(){let n=document.activeElement;return Pe(n)&&n.tagName===\"LI\"&&n.parentNode!=null&&n.parentNode.__lexicalListType===\"check\"?n:null}function Rg(n,t,e){let o=sl();return o!=null&&t.update(()=>{let r=nt(o);if(!U(r))return;let s=(function(i,a){let l=a?i.getPreviousSibling():i.getNextSibling(),c=i;for(;l==null&&U(c);)c=c.getParentOrThrow().getParent(),c!=null&&(l=a?c.getPreviousSibling():c.getNextSibling());for(;U(l);){let u=a?l.getLastChild():l.getFirstChild();if(!W(u))return l;l=a?u.getLastChild():u.getFirstChild()}return null})(r,e);if(s!=null){s.selectStart();let i=t.getElementByKey(s.__key);i!=null&&(n.preventDefault(),setTimeout(()=>{i.focus()},0))}}),!1}var Kg=ve(\"UPDATE_LIST_START_COMMAND\"),Bg=ve(\"INSERT_UNORDERED_LIST_COMMAND\"),Wg=ve(\"INSERT_ORDERED_LIST_COMMAND\"),zg=ve(\"REMOVE_LIST_COMMAND\");function Ug(n){return me(n.registerCommand(Wg,()=>(Uo(\"number\"),!0),pe),n.registerCommand(Kg,t=>{let{listNodeKey:e,newStart:o}=t,r=zn(e);return!!W(r)&&(r.getListType()===\"number\"&&(r.setStart(o),Ig(r)),!0)},pe),n.registerCommand(Bg,()=>(Uo(\"bullet\"),!0),pe),n.registerCommand(zg,()=>(al(),!0),pe),n.registerCommand(Io,()=>Lg(),pe),n.registerNodeTransform(Gt,t=>{let e=t.getFirstChild();if(e){if(z(e)){let o=e.getStyle(),r=e.getFormat();t.getTextStyle()!==o&&t.setTextStyle(o),t.getTextFormat()!==r&&t.setTextFormat(r)}}else{let o=$();R(o)&&(o.style!==t.getTextStyle()||o.format!==t.getTextFormat())&&o.isCollapsed()&&t.is(o.anchor.getNode())&&t.setTextStyle(o.style).setTextFormat(o.format)}}),n.registerNodeTransform(Hn,t=>{let e=t.getParent();if(U(e)&&t.is(e.getFirstChild())){let o=t.getStyle(),r=t.getFormat();o===e.getTextStyle()&&r===e.getTextFormat()||e.setTextStyle(o).setTextFormat(r)}}))}function Hg(n){let t=e=>{let o=e.getParent();if(W(e.getFirstChild())||!W(o))return;let r=we(e,s=>U(s)&&W(s.getParent())&&U(s.getPreviousSibling()));if(r===null&&e.getIndent()>0)e.setIndent(0);else if(U(r)){let s=r.getPreviousSibling();if(U(s)){let i=(function(l){let c=l,u=c.getFirstChild();for(;W(u);){let d=u.getLastChild();if(!U(d))break;c=d,u=c.getFirstChild()}return c})(s),a=i.getParent();if(W(a)){let l=Ss(a);l+1<Ss(o)&&e.setIndent(l)}}}};return n.registerNodeTransform(_n,e=>{let o=[e];for(;o.length>0;){let r=o.shift();if(W(r)){for(let s of r.getChildren())if(U(s)){t(s);let i=s.getFirstChild();W(i)&&o.push(i)}}}})}function ey(n,t){n.update(()=>Uo(t))}function ty(n){n.update(()=>al())}var Yg=ne({build:(n,t,e)=>vt(t),config:Ee({hasStrictIndent:!1}),name:\"@lexical/list/List\",nodes:[_n,Gt],register(n,t,e){let o=e.getOutput();return me(Ug(n),st(()=>o.hasStrictIndent.value?Hg(n):void 0))}}),ny=ne({dependencies:[Yg],name:\"@lexical/list/CheckList\",register:Pg});var re=ll,SS=re.$createListItemNode,ES=re.$createListNode,TS=re.$getListDepth,OS=re.$handleListInsertParagraph,MS=re.$insertList,vS=re.$isListItemNode,cl=re.$isListNode,DS=re.$removeList,AS=re.CheckListExtension,bS=re.INSERT_CHECK_LIST_COMMAND,Gg=re.INSERT_ORDERED_LIST_COMMAND,Jg=re.INSERT_UNORDERED_LIST_COMMAND,RS=re.ListExtension,jg=re.ListItemNode,Vg=re.ListNode,Xg=re.REMOVE_LIST_COMMAND,kS=re.UPDATE_LIST_START_COMMAND,$S=re.insertList,IS=re.registerCheckList,qg=re.registerList,LS=re.registerListStrictIndentTransform,wS=re.removeList;var hl={};Fe(hl,{$createAutoLinkNode:()=>Os,$createLinkNode:()=>mn,$isAutoLinkNode:()=>ut,$isLinkNode:()=>ct,$toggleLink:()=>Ho,AutoLinkExtension:()=>fy,AutoLinkNode:()=>Yo,ClickableLinkExtension:()=>iy,LinkExtension:()=>gl,LinkNode:()=>yn,TOGGLE_LINK_COMMAND:()=>Ms,createLinkMatcherWithRegExp:()=>ay,formatUrl:()=>dl,registerAutoLink:()=>ih,registerClickableLink:()=>eh,registerLink:()=>Qg,toggleLink:()=>gy});var oy=new Set([\"http:\",\"https:\",\"mailto:\",\"sms:\",\"tel:\"]),yn=class n extends ot{constructor(e=\"\",o={},r){super(r);C(this,\"__url\");C(this,\"__target\");C(this,\"__rel\");C(this,\"__title\");let{target:s=null,rel:i=null,title:a=null}=o;this.__url=e,this.__target=s,this.__rel=i,this.__title=a}static getType(){return\"link\"}static clone(e){return new n(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}createDOM(e){let o=document.createElement(\"a\");return this.updateLinkDOM(null,o,e),Xe(o,e.theme.link),o}updateLinkDOM(e,o,r){if(fs(o)){e&&e.__url===this.__url||(o.href=this.sanitizeUrl(this.__url));for(let s of[\"target\",\"rel\",\"title\"]){let i=`__${s}`,a=this[i];e&&e[i]===a||(a?o[s]=a:o.removeAttribute(s))}}}updateDOM(e,o,r){return this.updateLinkDOM(e,o,r),!1}static importDOM(){return{a:e=>({conversion:ry,priority:1})}}static importJSON(e){return mn().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=dl(e);try{let o=new URL(dl(e));if(!oy.has(o.protocol))return\"about:blank\"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){let o=this.getWritable();return o.__url=e,o}getTarget(){return this.getLatest().__target}setTarget(e){let o=this.getWritable();return o.__target=e,o}getRel(){return this.getLatest().__rel}setRel(e){let o=this.getWritable();return o.__rel=e,o}getTitle(){return this.getLatest().__title}setTitle(e){let o=this.getWritable();return o.__title=e,o}insertNewAfter(e,o=!0){let r=mn(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,o),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,o,r){if(!R(o))return!1;let s=o.anchor.getNode(),i=o.focus.getNode();return this.isParentOf(s)&&this.isParentOf(i)&&o.getTextContent().length>0}isEmailURI(){return this.__url.startsWith(\"mailto:\")}isWebSiteURI(){return this.__url.startsWith(\"https://\")||this.__url.startsWith(\"http://\")}};function ry(n){let t=null;if(fs(n)){let e=n.textContent;(e!==null&&e!==\"\"||n.children.length>0)&&(t=mn(n.getAttribute(\"href\")||\"\",{rel:n.getAttribute(\"rel\"),target:n.getAttribute(\"target\"),title:n.getAttribute(\"title\")}))}return{node:t}}function mn(n=\"\",t){return Ot(new yn(n,t))}function ct(n){return n instanceof yn}var Yo=class n extends yn{constructor(e=\"\",o={},r){super(e,o,r);C(this,\"__isUnlinked\");this.__isUnlinked=o.isUnlinked!==void 0&&o.isUnlinked!==null&&o.isUnlinked}static getType(){return\"autolink\"}static clone(e){return new n(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){let o=this.getWritable();return o.__isUnlinked=e,o}createDOM(e){return this.__isUnlinked?document.createElement(\"span\"):super.createDOM(e)}updateDOM(e,o,r){return super.updateDOM(e,o,r)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return Os().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,o=!0){let r=this.getParentOrThrow().insertNewAfter(e,o);if(L(r)){let s=Os(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(s),s}return null}};function Os(n=\"\",t){return Ot(new Yo(n,t))}function ut(n){return n instanceof Yo}var Ms=ve(\"TOGGLE_LINK_COMMAND\");function Zg(n,t){if(n.type===\"element\"){let e=n.getNode();return L(e)||(function(o,...r){let s=new URL(\"https://lexical.dev/docs/error\"),i=new URLSearchParams;i.append(\"code\",o);for(let a of r)i.append(\"v\",a);throw s.search=i.toString(),Error(`Minified Lexical error #${o}; visit ${s.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(252),e.getChildren()[n.offset+t]||null}return null}function Ho(n,t={}){let e;if(n&&typeof n==\"object\"){let{url:u,...d}=n;e=u,t={...d,...t}}else e=n;let{target:o,title:r}=t,s=t.rel===void 0?\"noreferrer\":t.rel,i=$();if(i===null||!R(i)&&!_e(i))return;if(_e(i)){let u=i.getNodes();return u.length===0?void 0:void u.forEach(d=>{if(e===null){let f=we(d,h=>!ut(h)&&ct(h));f&&(f.insertBefore(d),f.getChildren().length===0&&f.remove())}else{let f=we(d,h=>!ut(h)&&ct(h));if(f)f.setURL(e),o!==void 0&&f.setTarget(o),s!==void 0&&f.setRel(s);else{let h=mn(e,{rel:s,target:o});d.insertBefore(h),h.append(d)}}})}let a=i.extract();if(e===null){let u=new Set;return void a.forEach(d=>{let f=d.getParent();if(ct(f)&&!ut(f)){let h=f.getKey();if(u.has(h))return;(function(g,p){let _=new Set(p.filter(T=>g.isParentOf(T)).map(T=>T.getKey())),x=g.getChildren(),y=x.filter(T=>_.has(T.getKey()));if(y.length===x.length)return x.forEach(T=>g.insertBefore(T)),void g.remove();let N=x.findIndex(T=>_.has(T.getKey())),S=x.findLastIndex(T=>_.has(T.getKey())),M=N===0,E=S===x.length-1;if(M)y.forEach(T=>g.insertBefore(T));else if(E)for(let T=y.length-1;T>=0;T--)g.insertAfter(y[T]);else{for(let D=y.length-1;D>=0;D--)g.insertAfter(y[D]);let T=x.slice(S+1);if(T.length>0){let D=mn(g.getURL(),{rel:g.getRel(),target:g.getTarget(),title:g.getTitle()});y[y.length-1].insertAfter(D),T.forEach(O=>D.append(O))}}})(f,a),u.add(h)}})}let l=new Set,c=u=>{l.has(u.getKey())||(l.add(u.getKey()),u.setURL(e),o!==void 0&&u.setTarget(o),s!==void 0&&u.setRel(s),r!==void 0&&u.setTitle(r))};if(a.length===1){let u=a[0],d=we(u,ct);if(d!==null)return c(d)}(function(u){let d=$();if(!R(d))return u();let f=cn(d),h=f.isBackward(),g=Zg(f.anchor,h?-1:0),p=Zg(f.focus,h?0:-1),_=u();if(g||p){let x=$();if(R(x)){let y=x.clone();if(g){let N=g.getParent();N&&y.anchor.set(N.getKey(),g.getIndexWithinParent()+(h?1:0),\"element\")}if(p){let N=p.getParent();N&&y.focus.set(N.getKey(),p.getIndexWithinParent()+(h?0:1),\"element\")}je(cn(y))}}})(()=>{let u=null;for(let d of a){if(!d.isAttached())continue;let f=we(d,ct);if(f){c(f);continue}if(L(d)){if(!d.isInline())continue;if(ct(d)){if(!(ut(d)||u!==null&&u.getParentOrThrow().isParentOf(d))){c(d),u=d;continue}for(let g of d.getChildren())d.insertBefore(g);d.remove();continue}}let h=d.getPreviousSibling();ct(h)&&h.is(u)?h.append(d):(u=mn(e,{rel:s,target:o,title:r}),d.insertAfter(u),u.append(d))}})}var sy=/^\\+?[0-9\\s()-]{5,}$/;function dl(n){return n.match(/^[a-z][a-z0-9+.-]*:/i)||n.match(/^[/#.]/)?n:n.includes(\"@\")?`mailto:${n}`:sy.test(n)?`tel:${n}`:`https://${n}`}function Qg(n,t){return me(st(()=>n.registerCommand(Ms,e=>{let o=t.validateUrl.peek(),r=t.attributes.peek();if(e===null)return Ho(null),!0;if(typeof e==\"string\")return!(o!==void 0&&!o(e))&&(Ho(e,r),!0);{let{url:s,target:i,rel:a,title:l}=e;return Ho(s,{...r,rel:a,target:i,title:l}),!0}},pe)),st(()=>{let e=t.validateUrl.value;if(!e)return;let o=t.attributes.value;return n.registerCommand(ts,r=>{let s=$();if(!R(s)||s.isCollapsed()||!qe(r,ClipboardEvent)||r.clipboardData===null)return!1;let i=r.clipboardData.getData(\"text\");return!!e(i)&&!s.getNodes().some(a=>L(a))&&(n.dispatchCommand(Ms,{...o,url:i}),r.preventDefault(),!0)},pe)}))}var gl=ne({build:(n,t,e)=>vt(t),config:{attributes:void 0,validateUrl:void 0},mergeConfig(n,t){let e=zt(n,t);return n.attributes&&(e.attributes=zt(n.attributes,e.attributes)),e},name:\"@lexical/link/Link\",nodes:[yn],register:(n,t,e)=>Qg(n,e.getOutput())});function eh(n,t,e={}){let o=s=>{let i=s.target;if(!Yn(i))return;let a=is(i);if(a===null)return;let l=null,c=null;if(a.update(()=>{let f=nt(i);if(f!==null){let h=we(f,L);if(!t.disabled.peek())if(ct(h))l=h.sanitizeUrl(h.getURL()),c=h.getTarget();else{let g=(function(p,_){let x=p;for(;x!=null;){if(_(x))return x;x=x.parentNode}return null})(i,fs);g!==null&&(l=g.href,c=g.target)}}}),l===null||l===\"\")return;let u=n.getEditorState().read($);if(R(u)&&!u.isCollapsed())return void s.preventDefault();let d=s.type===\"auxclick\"&&s.button===1;window.open(l,t.newTab.peek()||d||s.metaKey||s.ctrlKey||c===\"_blank\"?\"_blank\":\"_self\"),s.preventDefault()},r=s=>{s.button===1&&o(s)};return n.registerRootListener((s,i)=>{i!==null&&(i.removeEventListener(\"click\",o),i.removeEventListener(\"mouseup\",r)),s!==null&&(s.addEventListener(\"click\",o,e),s.addEventListener(\"mouseup\",r,e))})}var iy=ne({build:(n,t,e)=>vt(t),config:Ee({disabled:!1,newTab:!1}),dependencies:[gl],name:\"@lexical/link/ClickableLink\",register:(n,t,e)=>eh(n,e.getOutput())});function ay(n,t=e=>e){return e=>{let o=n.exec(e);return o===null?null:{index:o.index,length:o[0].length,text:o[0],url:t(o[0])}}}function th(n,t){for(let e=0;e<t.length;e++){let o=t[e](n);if(o)return o}return null}var ly=/[.,;\\s]/;function vs(n){return ly.test(n)}function nh(n){return vs(n[n.length-1])}function fl(n){return vs(n[0])}function oh(n){let t=n.getPreviousSibling();return L(t)&&(t=t.getLastDescendant()),t===null||sa(t)||z(t)&&nh(t.getTextContent())}function rh(n){let t=n.getNextSibling();return L(t)&&(t=t.getFirstDescendant()),t===null||sa(t)||z(t)&&fl(t.getTextContent())}function cy(n,t,e,o){return(n>0?vs(e[n-1]):oh(o[0]))?t<e.length?vs(e[t]):rh(o[o.length-1]):!1}function uy(n,t,e){let o=[],r=[],s=[],i=0,a=0,l=[...n];for(;l.length>0;){let c=l[0],u=c.getTextContent().length,d=a;a+u<=t?(o.push(c),i+=u):d>=e?s.push(c):r.push(c),a+=u,l.shift()}return[i,o,r,s]}function dy(n,t,e,o){let r=Os(o.url,o.attributes);if(n.length===1){let s,i=n[0];t===0?[s,i]=i.splitText(e):[,s,i]=i.splitText(t,e);let a=Bt(o.text);return a.setFormat(s.getFormat()),a.setDetail(s.getDetail()),a.setStyle(s.getStyle()),r.append(a),s.replace(r),i}if(n.length>1){let s=n[0],i,a=s.getTextContent().length;t===0?i=s:[,i]=s.splitText(t);let l=[],c;for(let h=1;h<n.length;h++){let g=n[h],p=g.getTextContent().length,_=a;if(_<e)if(a+p<=e)l.push(g);else{let[x,y]=g.splitText(e-_);l.push(x),c=y}a+=p}let u=$(),d=u?u.getNodes().find(z):void 0,f=Bt(i.getTextContent());return f.setFormat(i.getFormat()),f.setDetail(i.getDetail()),f.setStyle(i.getStyle()),r.append(f,...l),d&&d===i&&(R(u)?f.select(u.anchor.offset,u.focus.offset):_e(u)&&f.select(0,f.getTextContent().length)),i.replace(r),c}}function ul(n,t,e){let o=n.getChildren(),r=o.length;for(let l=0;l<r;l++){let c=o[l];if(!z(c)||!c.isSimpleText())return Ts(n),void e(null,n.getURL())}let s=n.getTextContent(),i=th(s,t);if(i===null||i.text!==s||!oh(n)||!rh(n))return Ts(n),void e(null,n.getURL());let a=n.getURL();if(a!==i.url&&(n.setURL(i.url),e(i.url,a)),i.attributes){let l=n.getRel();l!==i.attributes.rel&&(n.setRel(i.attributes.rel||null),e(i.attributes.rel||null,l));let c=n.getTarget();c!==i.attributes.target&&(n.setTarget(i.attributes.target||null),e(i.attributes.target||null,c))}}function Ts(n){let t=n.getChildren();for(let e=t.length-1;e>=0;e--)n.insertAfter(t[e]);return n.remove(),t.map(e=>e.getLatest())}var sh={changeHandlers:[],matchers:[]};function ih(n,t=sh){let{matchers:e,changeHandlers:o}=t,r=(s,i)=>{for(let a of o)a(s,i)};return me(n.registerNodeTransform(Hn,s=>{let i=s.getParentOrThrow(),a=s.getPreviousSibling();if(ut(i)&&!i.getIsUnlinked())ul(i,e,r);else if(!ct(i)){if(s.isSimpleText()&&(fl(s.getTextContent())||!ut(a))){let l=(function(c){let u=[c],d=c.getNextSibling();for(;d!==null&&z(d)&&d.isSimpleText()&&(u.push(d),!/[\\s]/.test(d.getTextContent()));)d=d.getNextSibling();return u})(s);(function(c,u,d){let f=[...c],h=f.map(x=>x.getTextContent()).join(\"\"),g,p=h,_=0;for(;(g=th(p,u))&&g!==null;){let x=g.index,y=x+g.length;if(cy(_+x,_+y,h,f)){let[N,,S,M]=uy(f,_+x,_+y),E=dy(S,_+x-N,_+y-N,g);f=E?[E,...M]:M,d(g.url,null),_=0}else _+=y;p=p.substring(y)}})(l,e,r)}(function(l,c,u){let d=l.getPreviousSibling(),f=l.getNextSibling(),h=l.getTextContent();var g;!ut(d)||d.getIsUnlinked()||fl(h)&&(g=h,!(d.isEmailURI()?/^\\.[a-zA-Z]{2,}/.test(g):/^\\.[a-zA-Z0-9]{1,}/.test(g)))||(d.append(l),ul(d,c,u),u(null,d.getURL())),!ut(f)||f.getIsUnlinked()||nh(h)||(Ts(f),ul(f,c,u),u(null,f.getURL()))})(s,e,r)}}),n.registerCommand(Ms,s=>{let i=$();return s!==null||!R(i)||i.extract().forEach(a=>{let l=a.getParent();ut(l)&&(l.setIsUnlinked(!l.getIsUnlinked()),l.markDirty())}),!1},pe))}var fy=ne({config:sh,dependencies:[gl],mergeConfig(n,t){let e=zt(n,t);for(let o of[\"matchers\",\"changeHandlers\"]){let r=t[o];Array.isArray(r)&&(e[o]=[...n[o],...r])}return e},name:\"@lexical/link/AutoLink\",register:ih}),gy=Ho;var ye=hl,zS=ye.$createAutoLinkNode,US=ye.$createLinkNode,HS=ye.$isAutoLinkNode,YS=ye.$isLinkNode,GS=ye.$toggleLink,JS=ye.AutoLinkExtension,jS=ye.AutoLinkNode,VS=ye.ClickableLinkExtension,XS=ye.LinkExtension,ah=ye.LinkNode,lh=ye.TOGGLE_LINK_COMMAND,qS=ye.createLinkMatcherWithRegExp,ZS=ye.formatUrl,QS=ye.registerAutoLink,eE=ye.registerClickableLink,tE=ye.registerLink,nE=ye.toggleLink;var uh=ve(\"INSERT_DIVIDER_COMMAND\"),Ds=class n extends zr{static getType(){return\"divider\"}static clone(t){return new n(t.__key)}static importJSON(t){return new n}static importDOM(){return{hr:()=>({conversion:()=>({node:new n}),priority:0})}}exportJSON(){return{type:\"divider\",version:1}}exportDOM(){return{element:document.createElement(\"hr\")}}createDOM(t){let e=document.createElement(\"hr\");return e.className=\"lexical-divider\",e}getTextContent(){return`\n`}updateDOM(){return!1}decorate(){return null}};function hy(n){return n.registerCommand(uh,()=>{let t=$();if(!R(t))return!1;let e=new Ds;Ir([e]);let o=oe();return e.insertAfter(o),o.select(),!0},B)}function dt(n){let t=window.ReactNativeWebView;t&&t.postMessage(JSON.stringify(n))}function py(n){let t=document.getElementById(\"editor\");if(!t)throw new Error(\"Editor element not found\");let e=document.createElement(\"div\");e.contentEditable=\"true\",e.className=\"editor-input show-placeholder\",e.setAttribute(\"data-placeholder\",n),e.setAttribute(\"spellcheck\",\"false\"),t.appendChild(e);let o=ss({namespace:\"PlaygroundEditor\",nodes:[Sg,Vg,jg,ah,Ds],theme:{text:{bold:\"text-bold\",italic:\"text-italic\",underline:\"text-underline\",strikethrough:\"text-strikethrough\",underlineStrikethrough:\"text-underline-strikethrough\"}},onError:r=>{console.error(\"Lexical error:\",r),dt({type:\"error\",payload:{message:r.message}})}});return o.setRootElement(e),Eg(o),qg(o),hy(o),Vf(o,jf(),1e3),o.registerCommand(dn,r=>(dt({type:\"canUndoChange\",payload:{canUndo:r}}),!1),B),o.registerCommand(un,r=>(dt({type:\"canRedoChange\",payload:{canRedo:r}}),!1),B),o.registerUpdateListener(({editorState:r})=>{r.read(()=>{let s=r.toJSON();dt({type:\"contentChange\",payload:{state:JSON.stringify(s)}})}),_y(o),my(o)}),o.registerCommand(qr,()=>!1,gd),e.addEventListener(\"focus\",()=>{dt({type:\"focus\",payload:{}})}),e.addEventListener(\"blur\",()=>{dt({type:\"blur\",payload:{}})}),o}function _y(n){let t=n.getRootElement();t&&n.getEditorState().read(()=>{let e=Se(),o=e.getTextContent(),r=e.getChildren();o.trim()===\"\"&&(r.length===0||r.length===1&&r[0].getType()===\"paragraph\"&&r[0].getTextContent()===\"\")?t.classList.add(\"show-placeholder\"):t.classList.remove(\"show-placeholder\")})}function my(n){n.getEditorState().read(()=>{let t=$();if(!R(t))return;let e=Sa(t,\"color\",void 0),o=Sa(t,\"background-color\",void 0),r={isBold:t.hasFormat(\"bold\"),isItalic:t.hasFormat(\"italic\"),isUnderline:t.hasFormat(\"underline\"),isStrikethrough:t.hasFormat(\"strikethrough\"),blockType:\"paragraph\",textColor:e||null,backgroundColor:o||null,elementFormat:\"left\"},s=t.anchor.getNode(),i=s.getKey()===\"root\"?s:s.getTopLevelElementOrThrow();if(L(i)&&(r.elementFormat=i.getFormatType()||\"left\"),Cg(i)){let a=i.getTag();r.blockType=a}else if(cl(i)){let a=i.getListType();r.blockType=a===\"bullet\"?\"bullet\":\"number\"}else{let a=s.getParent();if(a){let l=a.getParent();if(l&&cl(l)){let c=l.getListType();r.blockType=c===\"bullet\"?\"bullet\":\"number\"}}}dt({type:\"selectionChange\",payload:r})})}function yy(n,t){switch(t.type){case\"setPlaceholder\":{let e=n.getRootElement();e&&e.setAttribute(\"data-placeholder\",String(t.payload||\"\"));break}case\"focus\":n.focus();break;case\"blur\":{n.getRootElement()?.blur();break}case\"getContent\":n.getEditorState().read(()=>{let e=n.getEditorState().toJSON();dt({type:\"contentChange\",payload:{state:JSON.stringify(e)}})});break;case\"formatText\":{let e=t.payload;n.dispatchCommand(Hr,e);break}case\"formatHeading\":{let e=t.payload;n.update(()=>{let o=$();R(o)&&(e===\"paragraph\"?Oa(o,()=>oe()):Oa(o,()=>Ng(e)))});break}case\"formatList\":{let e=t.payload;e===\"bullet\"?n.dispatchCommand(Jg,void 0):e===\"number\"?n.dispatchCommand(Gg,void 0):n.dispatchCommand(Xg,void 0);break}case\"insertLink\":{let e=t.payload;n.dispatchCommand(lh,e||null);break}case\"setContent\":{let e=t.payload;try{let o=n.parseEditorState(e);n.setEditorState(o)}catch(o){console.error(\"Failed to set content:\",o)}break}case\"setEditable\":n.setEditable(t.payload!==!1);break;case\"insertDivider\":n.dispatchCommand(uh,void 0);break;case\"applyStyle\":{let e=t.payload;n.update(()=>{let o=$();R(o)&&ef(o,e)});break}case\"formatAlign\":{let e=t.payload;n.dispatchCommand(Ur,e);break}case\"undo\":n.dispatchCommand(os,void 0);break;case\"redo\":n.dispatchCommand(ns,void 0);break}}function ch(){let n=py(\"\\u30C6\\u30AD\\u30B9\\u30C8\\u3092\\u5165\\u529B...\");window.handleMessage=t=>{try{let e=typeof t==\"string\"?JSON.parse(t):t;yy(n,e)}catch(e){console.error(\"Error handling message:\",e),dt({type:\"error\",payload:{message:e instanceof Error?e.message:String(e)}})}},dt({type:\"ready\",payload:{}})}document.readyState===\"loading\"?document.addEventListener(\"DOMContentLoaded\",ch):ch();})();\n\n    </script>\n  </body>\n</html>\n";
